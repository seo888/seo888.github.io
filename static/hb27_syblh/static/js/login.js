!function e(t,r,o){function a(n,s){if(!r[n]){if(!t[n]){var c="function"==typeof require&&require;if(!s&&c)return c(n,!0);if(i)return i(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[n]={exports:{}};t[n][0].call(u.exports,(function(e){return a(t[n][1][e]||e)}),u,u.exports,e,t,r,o)}return r[n].exports}for(var i="function"==typeof require&&require,n=0;n<o.length;n++)a(o[n]);return a}({1:[function(e,t,r){"use strict";var o;(o=jQuery).fn.qrcode=function(e){var t;function r(e){this.mode=t,this.data=e}function a(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function i(e,t){if(null==e.length)throw Error(e.length+"/"+t);for(var r=0;r<e.length&&0==e[r];)r++;this.num=Array(e.length-r+t);for(var o=0;o<e.length-r;o++)this.num[o]=e[o+r]}function n(e,t){this.totalCount=e,this.dataCount=t}function s(){this.buffer=[],this.length=0}r.prototype={getLength:function(){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},a.prototype={addData:function(e){this.dataList.push(new r(e)),this.dataCache=null},isDark:function(e,t){if(0>e||this.moduleCount<=e||0>t||this.moduleCount<=t)throw Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){var e=1;for(e=1;40>e;e++){for(var t=n.getRSBlocks(e,this.errorCorrectLevel),r=new s,o=0,a=0;a<t.length;a++)o+=t[a].dataCount;for(a=0;a<this.dataList.length;a++)t=this.dataList[a],r.put(t.mode,4),r.put(t.getLength(),c.getLengthInBits(t.mode,e)),t.write(r);if(r.getLengthInBits()<=8*o)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[r][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),7<=this.typeNumber&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=a.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var r=-1;7>=r;r++)if(!(-1>=e+r||this.moduleCount<=e+r))for(var o=-1;7>=o;o++)-1>=t+o||this.moduleCount<=t+o||(this.modules[e+r][t+o]=0<=r&&6>=r&&(0==o||6==o)||0<=o&&6>=o&&(0==r||6==r)||2<=r&&4>=r&&2<=o&&4>=o)},getBestMaskPattern:function(){for(var e=0,t=0,r=0;8>r;r++){this.makeImpl(!0,r);var o=c.getLostPoint(this);(0==r||e>o)&&(e=o,t=r)}return t},createMovieClip:function(e,t,r){for(e=e.createEmptyMovieClip(t,r),this.make(),t=0;t<this.modules.length;t++){r=1*t;for(var o=0;o<this.modules[t].length;o++){var a=1*o;this.modules[t][o]&&(e.beginFill(0,100),e.moveTo(a,r),e.lineTo(a+1,r),e.lineTo(a+1,r+1),e.lineTo(a,r+1),e.endFill())}}return e},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=0==e%2);for(e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=0==e%2)},setupPositionAdjustPattern:function(){for(var e=c.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var o=e[t],a=e[r];if(null==this.modules[o][a])for(var i=-2;2>=i;i++)for(var n=-2;2>=n;n++)this.modules[o+i][a+n]=-2==i||2==i||-2==n||2==n||0==i&&0==n}},setupTypeNumber:function(e){for(var t=c.getBCHTypeNumber(this.typeNumber),r=0;18>r;r++){var o=!e&&1==(t>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=o}for(r=0;18>r;r++)o=!e&&1==(t>>r&1),this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=o},setupTypeInfo:function(e,t){for(var r=c.getBCHTypeInfo(this.errorCorrectLevel<<3|t),o=0;15>o;o++){var a=!e&&1==(r>>o&1);6>o?this.modules[o][8]=a:8>o?this.modules[o+1][8]=a:this.modules[this.moduleCount-15+o][8]=a}for(o=0;15>o;o++)a=!e&&1==(r>>o&1),8>o?this.modules[8][this.moduleCount-o-1]=a:9>o?this.modules[8][15-o-1+1]=a:this.modules[8][15-o-1]=a;this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var r=-1,o=this.moduleCount-1,a=7,i=0,n=this.moduleCount-1;0<n;n-=2)for(6==n&&n--;;){for(var s=0;2>s;s++)if(null==this.modules[o][n-s]){var l=!1;i<e.length&&(l=1==(e[i]>>>a&1)),c.getMask(t,o,n-s)&&(l=!l),this.modules[o][n-s]=l,-1==--a&&(i++,a=7)}if(0>(o+=r)||this.moduleCount<=o){o-=r,r=-r;break}}}},a.PAD0=236,a.PAD1=17,a.createData=function(e,t,r){t=n.getRSBlocks(e,t);for(var o=new s,i=0;i<r.length;i++){var l=r[i];o.put(l.mode,4),o.put(l.getLength(),c.getLengthInBits(l.mode,e)),l.write(o)}for(i=e=0;i<t.length;i++)e+=t[i].dataCount;if(o.getLengthInBits()>8*e)throw Error("code length overflow. ("+o.getLengthInBits()+">"+8*e+")");for(o.getLengthInBits()+4<=8*e&&o.put(0,4);0!=o.getLengthInBits()%8;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*e||(o.put(a.PAD0,8),o.getLengthInBits()>=8*e));)o.put(a.PAD1,8);return a.createBytes(o,t)},a.createBytes=function(e,t){for(var r=0,o=0,a=0,n=Array(t.length),s=Array(t.length),l=0;l<t.length;l++){var u=t[l].dataCount,d=t[l].totalCount-u;o=Math.max(o,u),a=Math.max(a,d),n[l]=Array(u);for(var h=0;h<n[l].length;h++)n[l][h]=255&e.buffer[h+r];for(r+=u,h=c.getErrorCorrectPolynomial(d),u=new i(n[l],h.getLength()-1).mod(h),s[l]=Array(h.getLength()-1),h=0;h<s[l].length;h++)d=h+u.getLength()-s[l].length,s[l][h]=0<=d?u.get(d):0}for(h=l=0;h<t.length;h++)l+=t[h].totalCount;for(r=Array(l),h=u=0;h<o;h++)for(l=0;l<t.length;l++)h<n[l].length&&(r[u++]=n[l][h]);for(h=0;h<a;h++)for(l=0;l<t.length;l++)h<s[l].length&&(r[u++]=s[l][h]);return r},t=4;for(var c={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;0<=c.getBCHDigit(t)-c.getBCHDigit(c.G15);)t^=c.G15<<c.getBCHDigit(t)-c.getBCHDigit(c.G15);return(e<<10|t)^c.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;0<=c.getBCHDigit(t)-c.getBCHDigit(c.G18);)t^=c.G18<<c.getBCHDigit(t)-c.getBCHDigit(c.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return c.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case 0:return 0==(t+r)%2;case 1:return 0==t%2;case 2:return 0==r%3;case 3:return 0==(t+r)%3;case 4:return 0==(Math.floor(t/2)+Math.floor(r/3))%2;case 5:return 0==t*r%2+t*r%3;case 6:return 0==(t*r%2+t*r%3)%2;case 7:return 0==(t*r%3+(t+r)%2)%2;default:throw Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new i([1],0),r=0;r<e;r++)t=t.multiply(new i([1,l.gexp(r)],0));return t},getLengthInBits:function(e,r){if(1<=r&&10>r)switch(e){case 1:return 10;case 2:return 9;case t:case 8:return 8;default:throw Error("mode:"+e)}else if(27>r)switch(e){case 1:return 12;case 2:return 11;case t:return 16;case 8:return 10;default:throw Error("mode:"+e)}else{if(!(41>r))throw Error("type:"+r);switch(e){case 1:return 14;case 2:return 13;case t:return 16;case 8:return 12;default:throw Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,o=0;o<t;o++)for(var a=0;a<t;a++){for(var i=0,n=e.isDark(o,a),s=-1;1>=s;s++)if(!(0>o+s||t<=o+s))for(var c=-1;1>=c;c++)0>a+c||t<=a+c||0==s&&0==c||n==e.isDark(o+s,a+c)&&i++;5<i&&(r+=3+i-5)}for(o=0;o<t-1;o++)for(a=0;a<t-1;a++)i=0,e.isDark(o,a)&&i++,e.isDark(o+1,a)&&i++,e.isDark(o,a+1)&&i++,e.isDark(o+1,a+1)&&i++,(0==i||4==i)&&(r+=3);for(o=0;o<t;o++)for(a=0;a<t-6;a++)e.isDark(o,a)&&!e.isDark(o,a+1)&&e.isDark(o,a+2)&&e.isDark(o,a+3)&&e.isDark(o,a+4)&&!e.isDark(o,a+5)&&e.isDark(o,a+6)&&(r+=40);for(a=0;a<t;a++)for(o=0;o<t-6;o++)e.isDark(o,a)&&!e.isDark(o+1,a)&&e.isDark(o+2,a)&&e.isDark(o+3,a)&&e.isDark(o+4,a)&&!e.isDark(o+5,a)&&e.isDark(o+6,a)&&(r+=40);for(a=i=0;a<t;a++)for(o=0;o<t;o++)e.isDark(o,a)&&i++;return r+10*(e=Math.abs(100*i/t/t-50)/5)}},l={glog:function(e){if(1>e)throw Error("glog("+e+")");return l.LOG_TABLE[e]},gexp:function(e){for(;0>e;)e+=255;for(;256<=e;)e-=255;return l.EXP_TABLE[e]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},u=0;8>u;u++)l.EXP_TABLE[u]=1<<u;for(u=8;256>u;u++)l.EXP_TABLE[u]=l.EXP_TABLE[u-4]^l.EXP_TABLE[u-5]^l.EXP_TABLE[u-6]^l.EXP_TABLE[u-8];for(u=0;255>u;u++)l.LOG_TABLE[l.EXP_TABLE[u]]=u;return i.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var o=0;o<e.getLength();o++)t[r+o]^=l.gexp(l.glog(this.get(r))+l.glog(e.get(o)));return new i(t,0)},mod:function(e){if(0>this.getLength()-e.getLength())return this;for(var t=l.glog(this.get(0))-l.glog(e.get(0)),r=Array(this.getLength()),o=0;o<this.getLength();o++)r[o]=this.get(o);for(o=0;o<e.getLength();o++)r[o]^=l.gexp(l.glog(e.get(o))+t);return new i(r,0).mod(e)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(e,t){var r=n.getRsBlockTable(e,t);if(null==r)throw Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var o=r.length/3,a=[],i=0;i<o;i++)for(var s=r[3*i+0],c=r[3*i+1],l=r[3*i+2],u=0;u<s;u++)a.push(new n(c,l));return a},n.getRsBlockTable=function(e,t){switch(t){case 1:return n.RS_BLOCK_TABLE[4*(e-1)+0];case 0:return n.RS_BLOCK_TABLE[4*(e-1)+1];case 3:return n.RS_BLOCK_TABLE[4*(e-1)+2];case 2:return n.RS_BLOCK_TABLE[4*(e-1)+3]}},s.prototype={get:function(e){return 1==(this.buffer[Math.floor(e/8)]>>>7-e%8&1)},put:function(e,t){for(var r=0;r<t;r++)this.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},"string"==typeof e&&(e={text:e}),e=o.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},e),this.each((function(){var t;if("canvas"==e.render){(t=new a(e.typeNumber,e.correctLevel)).addData(e.text),t.make();var r=document.createElement("canvas");r.width=e.width,r.height=e.height;for(var i=r.getContext("2d"),n=e.width/t.getModuleCount(),s=e.height/t.getModuleCount(),c=0;c<t.getModuleCount();c++)for(var l=0;l<t.getModuleCount();l++){i.fillStyle=t.isDark(c,l)?e.foreground:e.background;var u=Math.ceil((l+1)*n)-Math.floor(l*n),d=Math.ceil((c+1)*n)-Math.floor(c*n);i.fillRect(Math.round(l*n),Math.round(c*s),u,d)}}else for((t=new a(e.typeNumber,e.correctLevel)).addData(e.text),t.make(),r=o("<table></table>").css("width",e.width+"px").css("height",e.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",e.background),i=e.width/t.getModuleCount(),n=e.height/t.getModuleCount(),s=0;s<t.getModuleCount();s++)for(c=o("<tr></tr>").css("height",n+"px").appendTo(r),l=0;l<t.getModuleCount();l++)o("<td></td>").css("width",i+"px").css("background-color",t.isDark(s,l)?e.foreground:e.background).appendTo(c);t=r,jQuery(t).appendTo(this)}))}},{}],2:[function(e,t,r){"use strict";e("../../js/jquery.qrcode.min"),function(e){var t={},r=null,o=null,a=null;e(document).ready((function(){e(document).on("input change",".j-member-form .is-input",(function(t){(navigator.userAgent.indexOf("Chrome")>-1&&void 0!==t.originalEvent.data||-1==navigator.userAgent.indexOf("Chrome"))&&(e(this).closest(".form-group,.member-account-item").removeClass("error"),e(".j-errmsg").slideUp(80))})).on("click",".j-errmsg .close",(function(){e(this).closest(".j-errmsg").slideUp(80)})).on("focus",".j-member-form .is-input",(function(){e(this).closest(".form-group,.member-account-item").addClass("active")})).on("blur",".j-member-form .is-input",(function(){e(this).closest(".form-group,.member-account-item").removeClass("active")})).on("click",".j-member-form .j-send-sms-code",(function(){var t=e(this);if(t.hasClass("disabled")||t.hasClass("loading"))return!1;var r=t.closest("form"),o=t.data("target"),a=!1,i=e("input[name="+o+"]");if(("email"==i.data("rule")?/\S+@\S+\.\S+/:/^1[3|4|5|6|7|8|9][0-9]{9}$/).test(e.trim(i.val()))||r.hasClass("j-no-phone-form")?u(r)&&(a=!0,h(void 0!==_wpcom_js.errors?_wpcom_js.errors.captcha_verify:"",r)):(a=!0,i.closest(".member-account-item").addClass("error"),h(void 0!==_wpcom_js.errors?_wpcom_js.errors[i.data("rule")]:"",r)),!a){var n=t.text();t.text("\u53d1\u9001\u4e2d...").loading(1);var s=r.find(".j-NC").length?r.find(".j-NC").attr("id"):null;e.ajax({url:_wpcom_js.ajaxurl,type:"POST",dataType:"json",data:r.serialize()+"&action=wpcom_send_sms_code",success:function(e){if(t.text(n).loading(0),1===e.result){var o=60;t.addClass("disabled").text(o+"s \u540e\u91cd\u8bd5");var a=setInterval((function(){o--,t.text(o+"s \u540e\u91cd\u8bd5"),o<1&&(clearInterval(a),t.removeClass("disabled").text(n))}),1e3)}else-2===e.result?(d(s),h(void 0!==_wpcom_js.errors?_wpcom_js.errors.captcha_fail:"",r)):e.error&&(d(s),h(e.error,r))},error:function(){d(s),t.text(n).loading(0),h(void 0!==_wpcom_js.errors?_wpcom_js.errors.req_error:"",r)}})}})).on("click",".member-form-social .social-wechat2 a,.member-account-form a.j-social-bind.wechat2",(function(t){if(!/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)){t.preventDefault(),e(this).tooltip("hide");var r=m();f(_wpcom_js.wechat_follow?"0":e(this).attr("href")+"&uuid="+r,r,_wpcom_js.wechat_follow?1:0),_wpcom_js.wechat_follow&&e.ajax({url:_wpcom_js.ajaxurl,type:"POST",dataType:"json",data:{action:"wpcom_wechat2_qrcode",uuid:r},success:function(t){"0"===t.result||0===t.result?f(t.url,r,1):(e("#j-wechat-login-code").find(".wechat-qrcode-loading").remove(),e("#j-wechat-login-text").text("\u4e8c\u7ef4\u7801\u83b7\u53d6\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5").css("color","red"),clearInterval(w))}})}})).on("click",".member-form-social .social-weapp a,.member-account-form a.j-social-bind.weapp",(function(t){t.preventDefault(),e(this).tooltip("hide");var r=m();f(0,r,2),e.ajax({url:_wpcom_js.ajaxurl,type:"POST",dataType:"json",data:{action:"wpcom_weapp_qrcode",uuid:r},success:function(t){"0"===t.result||0===t.result?(f(t.qrcode,r,2),t.url&&(window.location.href=t.url)):(e("#j-wechat-login-code").find(".wechat-qrcode-loading").remove(),e("#j-wechat-login-text").text("\u4e8c\u7ef4\u7801\u83b7\u53d6\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5").css("color","red"),clearInterval(w))}})})).on("click",".member-form-social .social-wechat a,.member-account-form a.j-social-bind.wechat",(function(t){t.preventDefault(),e(this).tooltip("hide");var r=e(this).attr("href")+"&timestarp="+Date.parse(new Date);if(e("#wechat-iframe-modal").length)e("#wechat-iframe-modal").find(".wechat-login-iframe").attr("src",r);else{var o='<div class="modal fade in" id="wechat-iframe-modal" data-backdrop="static">\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <div class="modal-header" style="padding: 10px;">\n                <div class="close" data-dismiss="modal" aria-label="Close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></div>\n            </div>\n            <div class="modal-body wechat-iframe-body">\n                <iframe class="wechat-login-iframe" src="'+r+'"></iframe>\n            </div>\n        </div>\n    </div>\n</div>';e("body").append(o),e("#wechat-iframe-modal").on("hide.bs.modal",(function(){e("#wechat-iframe-modal").find(".wechat-login-iframe").attr("src","about:blank")}))}e("#wechat-iframe-modal").modal("show")})).on("submit",".j-member-form",(function(t){t.preventDefault();var r=e(this),o=r.find("button[type=submit]");o.loading(1),r.find(".form-group .is-input").attr("autocomplete","off");var a=!1,i=r.find(".form-group .require, .member-account-item .require");if(i.length&&i.each((function(){var t=e(this);""==e.trim(t.val())&&(t.closest(".form-group, .member-account-item").addClass("error"),a=!0)})),a||r.find(".form-group, .member-account-item").find(".is-input").each((function(){var t=e(this),o=t.data("rule"),i=t.val();if(o){var n=o.split(" ");e.each(n,(function(e,o){var n=o.split(":"),s=n[0],c=void 0!==n[1]?n[1]:"",l="";switch(s){case"email":(l=/\S+@\S+\.\S+/).test(i)||(a=!0,h(void 0!==_wpcom_js.errors?_wpcom_js.errors.email:"",r));break;case"password":c&&r.find(".form-group input[name="+c+"]").val()!=i?(a=!0,h(void 0!==_wpcom_js.errors?_wpcom_js.errors.passcheck:"",r)):""==c&&(i.length<6||i.length>32)&&(a=!0,h(void 0!==_wpcom_js.errors?_wpcom_js.errors.password:"",r));break;case"phone":(l=/^1[3-9]{1}\d{9}$/).test(i)||(a=!0,h(void 0!==_wpcom_js.errors?_wpcom_js.errors.phone:"",r));break;case"terms":t.is(":checked")||(a=!0,h(void 0!==_wpcom_js.errors?_wpcom_js.errors.terms:"",r));break;case"sms_code":l=/^[0-9]{6}$/,6===i.length&&l.test(i)||(a=!0,h(void 0!==_wpcom_js.errors?_wpcom_js.errors.sms_code:"",r))}if(a)return t.closest(".form-group,.member-account-item").addClass("error"),!1;t.closest(".form-group,.member-account-item").removeClass("error")}))}if(a)return!1})),a)o.loading(0);else{var n=r.find(".j-NC").length?r.find(".j-NC").attr("id"):null;if(u(r))h(void 0!==_wpcom_js.errors?_wpcom_js.errors.captcha_verify:"",r),o.loading(0);else{var s=e(this).attr("id");s=s.replace(/-form/i,""),e.ajax({url:_wpcom_js.ajaxurl,type:"POST",dataType:"json",data:r.serialize()+"&action=wpcom_"+s,success:function(e){if(void 0!==e.result&&"1"==e.result){if(location.search.indexOf("interim-login=1")>-1)window.parent.jQuery("#wp-auth-check-wrap").addClass("hidden"),window.parent.jQuery("body").removeClass("modal-open"),window.parent.jQuery(window).off("beforeunload.wp-auth-check");else{var t=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}("redirect_to");void 0!==e.redirect_to?window.location.href=e.redirect_to:t?window.location.href=t:window.location.reload()}o.loading(0)}else void 0!==e.error?(h(e.error,r),o.loading(0),d(n)):(o.loading(0),d(n))},error:function(){o.loading(0),d(n),h(void 0!==_wpcom_js.errors?_wpcom_js.errors.req_error:"",r)}})}}})).on("click",".j-login-switcher",(function(){var t=e(this),r=t.data("type"),o="qr"===(r=r||"qr")?"pc":"qr";t.data("type",o).find(".wpcom-icon").html('<svg aria-hidden="true"><use xlink:href="#wi-login-'+o+'"></use></svg>'),t.closest(".member-form-wrap").removeClass("member-form-login-"+o).addClass("member-form-login-"+r),p(r)})).on("init_captcha",n),n()}));var i=0;function n(){var t;if(e(".member-form-login.member-form-login-qr").length&&p("qr"),/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)||e(".j-login-switcher").show(),void 0!==_wpcom_js.noCaptcha&&e(".j-NC").length)t="cn"!=_wpcom_js.noCaptcha.language?"//aeis.alicdn.com/sd/ncpc/nc.js?t=2015052012":"//g.alicdn.com/sd/ncpc/nc.js?t=2015052012",i?s():e.getScript(t,s);else if(void 0!==_wpcom_js.TCaptcha&&e(".j-TCaptcha").length){e(".j-TCaptcha").addClass("ready"),i?c():e.getScript("https://ssl.captcha.qq.com/TCaptcha.js",c)}else if(void 0!==_wpcom_js.hCaptcha&&e(".h-captcha").length){i?setTimeout((function(){l(0)}),100):e.getScript("https://js.hcaptcha.com/1/api.js?render=explicit&onload=captcha_onload")}else if(void 0!==_wpcom_js.reCAPTCHA&&e(".g-recaptcha").length){i?setTimeout((function(){l(1)}),100):e.getScript("https://www.google.com/recaptcha/api.js?render=explicit&onload=captcha_onload")}}function s(){i=1;var r=[_wpcom_js.noCaptcha.appkey,(new Date).getTime(),Math.random()].join(":"),o={appkey:_wpcom_js.noCaptcha.appkey,scene:void 0!==_wpcom_js.noCaptcha.scene?_wpcom_js.noCaptcha.scene:"nc_login",token:r,language:_wpcom_js.noCaptcha.language,customWidth:"auto",callback:function(t){e(".j-Ncsessionid").val(t.csessionid),e(".j-Nsig").val(t.sig),e(".j-Ntoken").val(r),e(".j-Nscene").val(void 0!==_wpcom_js.noCaptcha.scene?_wpcom_js.noCaptcha.scene:"nc_login"),e(".j-errmsg").slideUp(80)}};e(".j-NC").each((function(r,a){o.renderTo=e(a).attr("id"),t[o.renderTo]=new noCaptcha(o),t[o.renderTo].reset=function(){t[o.renderTo].reload(),e(".j-Ncsessionid").val("")}}))}function c(){i=1,(r=new TencentCaptcha(_wpcom_js.TCaptcha.appid,(function(t){0===t.ret&&(e(".j-Tticket").val(t.ticket),e(".j-Trandstr").val(t.randstr),e(".j-TCaptcha").addClass("success").find("span").text(_wpcom_js.captcha_verified)),e(".j-errmsg").slideUp(80)}))).reset=function(){e(".j-Tticket").val(""),e(".j-Trandstr").val(""),e(".j-TCaptcha").removeClass("success").find("span").text(_wpcom_js.captcha_label)},e(document).off("click.TCaptcha").on("click.TCaptcha",".j-TCaptcha",(function(){if(e(this).hasClass("success"))return!1;r.show()}))}function l(t){i=1;var r=t?".g-recaptcha":".h-captcha",n=t?grecaptcha:hcaptcha;e(".captcha-button").addClass("ready"),e(r).each((function(){var r=e(this),o=r.data("widgetID");if(o||0===o||"0"===o)return!0;var a={sitekey:t?_wpcom_js.reCAPTCHA.sitekey:_wpcom_js.hCaptcha.sitekey,size:"invisible"};t&&(a.callback=captcha_callback,a["error-callback"]=captcha_err_callback,a["expired-callback"]=captcha_expired_callback);var i=n.render(this,a);r.data("widgetID",i)}));var s=function(){e(".captcha-button").each((function(){var t=e(this),o=t.find(r).data("widgetID");(o||0===o||"0"===o)&&n&&n.reset(o),t.removeClass("success"),t.removeClass("loading"),t.find("span").text(_wpcom_js.captcha_label)}))};t?(a={}).reset=s:(o={}).reset=s,e(document).off("click.captcha").on("click.captcha",".captcha-button",(function(){var o=e(this);if(o.hasClass("success")||o.hasClass("loading"))return!1;o.addClass("loading");var a=o.find(r).data("widgetID");(a||0===a||"0"===a)&&(t?(n.execute(a),e("iframe").each((function(){var t=e(this),r=t.attr("src");if(r&&/www\.google\.com\/recaptcha\/api2\/bframe/i.test(r)){var o=t.parent().parent();o.data("flag")||(o.data("flag","1"),new MutationObserver((function(){0==o.get(0).style.opacity&&""===grecaptcha.getResponse()&&d()})).observe(o.get(0),{attributes:!0,attributeFilter:["style"]}))}}))):n.execute(a,{async:!0}).then((function(t){t.response&&(o.removeClass("loading"),o.addClass("success"),o.find("span").text(_wpcom_js.captcha_verified)),e(".j-errmsg").slideUp(80)})).catch((function(e){"challenge-closed"!==e&&wpcom_alert(e),d()})))}))}function u(e){return!(!e.find(".j-Ncsessionid")||""!=e.find(".j-Ncsessionid").val())||(!(!e.find(".j-Tticket")||""!=e.find(".j-Tticket").val())||(!(!e.find(".j-Tticket")||""!=e.find(".j-Tticket").val())||(!(!e.find(".h-captcha")||""!=e.find("[name=h-captcha-response]").val())||!(!e.find(".g-recaptcha")||""!=e.find("[name=g-recaptcha-response]").val()))))}function d(e){var i=e&&t&&t[e]?t[e]:null;i?i.reset():r?r.reset():o?o.reset():a&&a.reset()}function h(t,r){t='<i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-warning"></use></svg></i>'+t+'<div class="close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></div>',r?r.parent().find(".j-errmsg").html(t).slideDown(80):e(".j-errmsg").html(t).slideDown(80)}function m(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}))}function f(t,r,o){if(e("#wechat-qrcode-modal").length)e("#j-wechat-login-text").html("\u8bf7\u4f7f\u7528"+(1===o?"<b>\u5fae\u4fe1\u626b\u7801\u5e76\u5173\u6ce8</b>":"\u5fae\u4fe1\u626b\u63cf\u4e8c\u7ef4\u7801")+"\u767b\u5f55").attr("style",""),g(e("#j-wechat-login-code"),t,o);else{var a='<div class="modal fade in" id="wechat-qrcode-modal" data-backdrop="static">\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></button>\n                <h4 class="modal-title">\u5fae\u4fe1\u767b\u5f55</h4>\n            </div>\n            <div class="modal-body wechat-qrcode-body">\n                <p id="j-wechat-login-code"></p>\n                <p id="j-wechat-login-text">\u8bf7\u4f7f\u7528'+(1===o?"<b>\u5fae\u4fe1\u626b\u7801\u5e76\u5173\u6ce8</b>":"\u5fae\u4fe1\u626b\u63cf\u4e8c\u7ef4\u7801")+"\u767b\u5f55</p>\n            </div>\n        </div>\n    </div>\n</div>";e("body").append(a),g(e("#j-wechat-login-code"),t,o),e("#wechat-qrcode-modal").on("hide.bs.modal",(function(){clearInterval(w)}))}e("#wechat-qrcode-modal").modal("show"),v(r,o,e("#j-wechat-login-text"))}function g(e,t,r){/^data:image/i.test(t)?e.html('<img src="'+t+'">'):2===r&&0==t?e.html('<img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTUxMiAyMDYuNzY1Yy0xNjguMjggMC0zMDUuMjM1IDEzNi45NTQtMzA1LjIzNSAzMDUuMjM1UzM0My43MTkgODE3LjIzNSA1MTIgODE3LjIzNSA4MTcuMjM1IDY4MC4yODEgODE3LjIzNSA1MTIgNjgwLjI4MSAyMDYuNzY1IDUxMiAyMDYuNzY1em0wIDU3MC4yNjRjLTE0Ni4xIDAtMjY1LjAyOS0xMTguOTA5LTI2NS4wMjktMjY1LjAyOVMzNjUuODggMjQ2Ljk3MSA1MTIgMjQ2Ljk3MSA3NzcuMDI5IDM2NS44OCA3NzcuMDI5IDUxMiA2NTguMTIgNzc3LjAyOSA1MTIgNzc3LjAyOXoiIGZpbGw9IiM5OTkiLz48cGF0aCBkPSJNNjYzLjc0MiAzNzEuMjE2YTc5LjcyIDc5LjcyIDAgMCAwLTExMi4xNjcgMzYuMTc0TDQzNy4yNyA1OTYuOTc1bC0xLjI2MyAyLjM4M2EzOS44MiAzOS44MiAwIDAgMS0yMy42ODggMjEuNzc0IDM5LjQ1MyAzOS40NTMgMCAwIDEtNTAuMjQ4LTQ4LjcyYzUuNjQyLTE4LjI5IDIyLjQ4Ni0yMS4wNjEgNTkuNjk5LTIzLjA1N2wyLjc5LS4xNjNhMjAuMTAzIDIwLjEwMyAwIDAgMC0yLjEzOS00MC4xNDVsLTIuNzA5LjE2M2MtMzYuMzM2IDEuOTE0LTgxLjU1MyA0LjM3OS05Ni4wMzUgNTEuNDI5YTc5Ljc4MiA3OS43ODIgMCAwIDAgMzYuNTYgOTIuMjA2IDgwLjI5IDgwLjI5IDAgMCAwIDY0Ljg1MyA2LjUxOCA3OS43MiA3OS43MiAwIDAgMCA0Ny4yOTQtNDIuNjFMNTg2LjY5IDQyNy4wMDRsMS4yNjItMi4zODNhMzkuODIgMzkuODIgMCAwIDEgMjMuNjg4LTIxLjc3MyAzOS40NTMgMzkuNDUzIDAgMCAxIDUwLjI0OCA0OC43MmMtNS42NDIgMTguNDMzLTIyLjY0OSAyMS4xNDItNjAuMTY3IDIzLjEzOGwtMi4yMi4wODJjLTExLjEyLjU1LTE5LjYzNSAxMC4wMi0xOS4wODUgMjEuMTQyczEwLjAyMSAxOS43MTYgMjEuMTQyIDE5LjA4NGwyLjIyLS4wODFjMzYuNTYtMS45MTUgODIuMDQzLTQuMjE2IDk2LjU4NS01MS40MyAxMC43MzQtMzUuMjk3LTQuNjAzLTc0LjA3OC0zNi42NDItOTIuMjg3eiIgZmlsbD0iIzk5OSIvPjwvc3ZnPg==">'):e.html("").qrcode({text:t}),"0"==t&&e.append('<div class="wechat-qrcode-loading"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-loader"></use></svg></i></div>')}function p(t){if(/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent))return e(".member-form-wrap.member-form-login").removeClass("member-form-login-qr").addClass("member-form-login-pc"),!1;var r=e(".member-form-qr");if("qr"===t){r.closest(".member-form-inner").find(".member-social-list").height()<20&&r.closest(".member-form-inner").find(".member-form-social").hide();var o=r.data("type");if("wechat"===o){var a=e(".member-social-list .social-item.social-"+o+" a").attr("href")+"&from=scan&timestarp="+Date.parse(new Date);r.html('<iframe class="member-form-qr-iframe" src="'+a+'"></iframe>')}else if("weapp"===o){var i=m();g(r.find(".member-form-qr-img"),0,2),r.find(".member-form-qr-text").html("\u8bf7\u4f7f\u7528\u5fae\u4fe1\u626b\u63cf\u4e8c\u7ef4\u7801\u767b\u5f55").attr("style",""),e.ajax({url:_wpcom_js.ajaxurl,type:"POST",dataType:"json",data:{action:"wpcom_weapp_qrcode",uuid:i},success:function(e){!e.qrcode||"0"!==e.result&&0!==e.result?(r.find(".wechat-qrcode-loading").remove(),r.find(".member-form-qr-text").text("\u4e8c\u7ef4\u7801\u83b7\u53d6\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5").css("color","red"),clearInterval(w)):(g(r.find(".member-form-qr-img"),e.qrcode,2),v(i,2,r.find(".member-form-qr-text")))}})}else if("wechat2"===o){var n=m(),s=_wpcom_js&&_wpcom_js.wechat_follow,c=s?"0":e(".member-social-list .social-item.social-"+o+" a").attr("href")+"&uuid="+n;g(r.find(".member-form-qr-img"),c,s?1:0),r.find(".member-form-qr-text").html("\u8bf7\u4f7f\u7528"+(s?"<b>\u5fae\u4fe1\u626b\u7801\u5e76\u5173\u6ce8</b>":"\u5fae\u4fe1\u626b\u63cf\u4e8c\u7ef4\u7801")+"\u767b\u5f55").attr("style",""),s?e.ajax({url:_wpcom_js.ajaxurl,type:"POST",dataType:"json",data:{action:"wpcom_wechat2_qrcode",uuid:n},success:function(e){"0"===e.result||0===e.result?(g(r.find(".member-form-qr-img"),e.url,1),v(n,1,r.find(".member-form-qr-text"))):(r.find(".wechat-qrcode-loading").remove(),r.find(".member-form-qr-text").text("\u4e8c\u7ef4\u7801\u83b7\u53d6\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5").css("color","red"),clearInterval(w))}}):v(n,0,r.find(".member-form-qr-text"))}}else r.closest(".member-form-inner").find(".member-form-social").show(),clearInterval(w)}window.captcha_onload=function(){i=1,l(void 0!==_wpcom_js.reCAPTCHA?1:0)},window.captcha_callback=function(t){t&&e('[name="g-recaptcha-response"]').each((function(){var r=e(this);if(r.val()===t)return r.closest(".captcha-button").removeClass("loading").addClass("success").find("span").text(_wpcom_js.captcha_verified),!1})),e(".j-errmsg").slideUp(80)},window.captcha_err_callback=function(){wpcom_alert("The reCAPTCHA encounters an error (usually network connectivity)"),d()},window.captcha_expired_callback=function(){wpcom_alert("The reCAPTCHA response expires and you needs to re-verify"),d()};var w=null;function v(t,r,o){clearInterval(w),w=setInterval((function(){e.ajax({url:_wpcom_js.ajaxurl,type:"POST",dataType:"json",data:{action:"wpcom_wechat2_login_check",uuid:t,type:r||0},success:function(e){"0"==e.result?(clearInterval(w),window.location.href=e.redirect_to):"2"==e.result&&(clearInterval(w),o.text("\u6388\u6743\u9519\u8bef\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5\uff01").css("color","red"))}})}),2e3)}window.is_load_login=!0}(jQuery)},{"../../js/jquery.qrcode.min":1}]},{},[2]);