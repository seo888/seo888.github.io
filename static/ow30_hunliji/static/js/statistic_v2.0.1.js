!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.statistic=t()}(this,function(){var e=function(){},t="//logs.hunliji.com/v2/api/app/tracker/batch.json",a="//log7.hunliji.com/v2/api/app/tracker/batch.json",n=function(n){void 0===n&&(n={});var o=n.headers;void 0===o&&(o={});var r=n.app_name;void 0===r&&(r="web");var s=n.page_name;void 0===s&&(s="");var i=n.event_type;void 0===i&&(i="element_hit");var d=n.element_tag,c=n.element_parent_tag;void 0===c&&(c="");var p=n.user_id;void 0===p&&(p="");var v=n.data_id;void 0===v&&(v="");var u=n.data_type;void 0===u&&(u="");var l=n.ext;void 0===l&&(l="");var m=n.onSuccess;void 0===m&&(m=e);var _=n.onError;void 0===_&&(_=e);var f=n.onComplete;void 0===f&&(f=e);var h=n.url;void 0===h&&(h="");var g=n.isAsync;void 0===g&&(g=!0);var y=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&-1===t.indexOf(n)&&(a[n]=e[n]);return a}(n,["headers","app_name","page_name","event_type","element_tag","element_parent_tag","user_id","data_id","data_type","ext","onSuccess","onError","onComplete","url","isAsync"]),S=Object.assign({},{page_name:s,event_type:i,element_tag:d,element_parent_tag:c,element_data:{data_id:v,data_type:u},user_id:p},y);S.element_data.ext=l||function(e){if(localStorage.getItem("STATISTIC_RANS"))return localStorage.getItem("STATISTIC_RANS");e=e||32;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length,n="",o=0;o<e;o++)n+=t.charAt(Math.floor(Math.random()*a));return localStorage.setItem("STATISTIC_RANS",n),n}(32),function(e){var n=e.app_name,o=e.onSuccess,r=e.onError,s=e.onComplete,i=e.url,d=e.headers,c=e.isAsync,p='{"events":['+JSON.stringify(e.params)+"]}";!function(e){var t=e.method;void 0===t&&(t="get");var a=e.url,n=e.headers;void 0===n&&(n={});var o=e.data;void 0===o&&(o=null);var r=e.onSuccess,s=e.onError,i=e.onComplete,d=e.isAsync,c=new XMLHttpRequest;c.open(t,a,d),Object.keys(n).forEach(function(e){c.setRequestHeader(e,n[e])}),c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&(i&&i(c.status),200===c.status?r&&r(c.responseText):s&&s(c.responseText,c.statusText))},c.send(o)}({method:"post",url:i||(/(m|www|admin|h5).hunliji.com/i.test(window.location.hostname)?t:a),headers:Object.assign({},{appName:n},d),data:p,onSuccess:o,onError:r,onComplete:s,isAsync:c})}({app_name:r,params:S,onSuccess:m,onError:_,onComplete:f,url:h,headers:o,isAsync:g})};return n.PROD_URL=t,n.PRE_URL=a,n});
