var defaultPoster="//www.youth.cn/images/youth_vidcover_c.png";function loadAlPlayer(a){if($("#videoAl-style").length==0){loadcsslink("//g.alicdn.com/de/prismplayer/2.8.8/skins/default/aliplayer-min.css");$("head").append('<style type="text/css" id="videoAl-style">.prism-cc-btn,.prism-setting-btn,.prism-error-operation .prism-button-orange,.prism-detect-info{display:none !important;}.prism-marker-text{padding:0 !important;margin:5px;}</style>');$.ajax({dataType:"script",scriptCharset:"utf-8",url:"//g.alicdn.com/de/prismplayer/2.8.8/aliplayer-min.js",success:function(){$.ajax({dataType:"script",scriptCharset:"utf-8",url:"//g.alicdn.com/de/prismplayer/2.8.8/json/json.min.js",success:function(){a()}})}})}else{a()}}function lteIE(a){var b=navigator.userAgent.toLowerCase();var c=b.indexOf("msie")>-1;var d;if(c){d=b.match(/msie ([\d.]+)/)[1];if(d<=a){return true}}return false}function showAL(){$(".youth-videoal").each(function(){var d=this;$(d).hide();var a=d.id+"_player";$(d).after('<div class="prism-player" id="'+a+'"></div>');var b={id:a,width:"100%",height:$("#"+a).parent().width()/16*9+"px",autoplay:$(d).attr("islive")=="true",isLive:$(d).attr("islive")=="true",useFlashPrism:lteIE(8),playsinline:false,preload:true,showBarTime:"10000",source:$(d).children("source").attr("src"),cover:$(d).attr("poster")||defaultPoster,};ext=$(d).children("source").attr("src").match(/\.([0-9a-z]+)(?:[\?#]|$)/i);ext=ext?ext[1]:"mp4";if(/m3u8/i.test(ext)&&lteIE(10)){b.skinLayout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}]}var c=new Aliplayer(b,function(e){})})}function loadVIDEO(a){if($("#videoJs-style").length==0){loadcsslink("//m.youth.cn/images/youth-videojs.css");$("head").append('<style type="text/css" id="videoJs-style">@font-face {font-family: VideoJS;src: url("//t.m.youth.cn/static/css/VideoJS_5.11.8.eot");}.video-js .vjs-time-control{display:block;}.video-js .vjs-remaining-time{display: none;}.vjs-paused.vjs-has-started .vjs-big-play-button {display: block;}</style>');$.ajax({dataType:"script",scriptCharset:"utf-8",url:"//m.youth.cn/images/youth-videojs-ie8.js",success:function(){}});$.ajax({dataType:"script",scriptCharset:"utf-8",url:"//m.youth.cn/images/youth-videojs.min.js",success:function(){$.ajax({dataType:"script",scriptCharset:"utf-8",url:"//m.youth.cn/images/youth-videojs-zh-CN.js",success:function(){$.ajax({dataType:"script",scriptCharset:"utf-8",url:"//m.youth.cn/images/youth-videojs-contrib-hls.min.js",success:function(){a()}})}})}})}else{a()}}function loadcsslink(c){var a=document.getElementsByTagName("head")[0];var b=document.createElement("link");b.href=c;b.rel="stylesheet";a.appendChild(b)}function showVJ(){$(".youth-videojs").each(function(){if($(this).find("source").length==0){var a=($(this).attr("id").replace("youth_video_","youth_video_src_"));var b=$("#"+a).first();if(b.length>0){b.remove();$(this).append(b)}}console.log($(this).attr("poster"));if(!$(this).attr("poster")){$(this).attr("poster",defaultPoster)}videojs(this.id,{"aspectRatio":"640:360","playbackRates":[1,1.5,2],"fluid":true,language:"zh-CN",controlBar:{children:[{name:"playToggle"},{name:"progressControl"},{name:"durationDisplay"},{name:"fullscreenToggle"},],}})})}$(document).ready(function(){if($(".youth-videojs").length>0){$(".youth-videojs").css("min-height",$(".youth-videojs").first().width()/16*9+"px");loadVIDEO(showVJ)}if($(".youth-videoal").length>0){loadAlPlayer(showAL)}});