var Tab=function(t){var e=function(t){this.conf=this._extends({bonds:[],selected:"tab_selected",auto:!1,startOn:0,trigger:"mouseover",touchDir:"h",customSelect:null,onRender:function(){},onBefore:function(){},onAfter:function(){}},t),this._initDoms(),this._initStates(),this._initEvents(),this._launch()};return e.prototype={constructor:e,_id:function(t){return document.getElementById(t)},_class:function(t,e,s){var n,a,o,c=[];if(null==e&&(e=document.body),null==s&&(s="*"),e.getElementsByClassName)return e.getElementsByClassName(t);if(e.querySelectorAll)return e.querySelectorAll("."+t);for(a=(n=e.getElementsByTagName(s)).length,o=new RegExp("(^|\\s)"+t+"(\\s|$)"),i=0,j=0;i<a;i++)o.test(n[i].className)&&(c[j]=n[i],j++);return c},_extends:function(t,e){for(property in e)t[property]=e[property];return t},_addEvent:function(t,e,s){t.addEventListener?t.addEventListener(e,s,!1):t.attachEvent("on"+e,s)},_hasClass:function(t,e){return new RegExp("(^| )"+e+"( |$)").test(t.className)},_removeClass:function(t,e){var s=new RegExp("(^| )"+e+"( |$)");t.className=e?t.className.replace(s," ").replace(/^\s+|\s+$/g,""):""},_addClass:function(t,e){this._hasClass(t,e)||(t.className+=" "+e)},_initDoms:function(){for(var t=this.conf,e=t.bonds.length,s=[],n=[],a=0;a<e;a++){var o=t.bonds[a];if(o.length<2)throw new Error("\u53c2\u6570\u957f\u5ea6\u4e0d\u5339\u914d");s.push("string"==typeof o[0]?this._id(o[0]):o[0]),n.push("string"==typeof o[1]?this._id(o[1]):o[1])}this.doms={tabs:s,conts:n}},_initStates:function(){var t,e,s=this.conf;t=this.doms.tabs.length,e="ontouchstart"in window&&s.touchDir,this.states={curIdx:0,total:t,auto:s.auto,order:null,enable:!0,touchDir:e}},_initEvents:function(){for(var a,o,i,c,r=this,t=this.conf,e=this.doms,l=this.states,u=!1,s=0;s<l.total;s++)e.tabs[s].getAttribute("data-tabed")||(this._addEvent(e.tabs[s],t.trigger,function(e){return function(t){l.enable&&r.select(e)}}(s)),l.touchDir&&(a="v"==l.touchDir?"pageY":"pageX",o="v"==l.touchDir?"pageX":"pageY",this._addEvent(e.conts[s],"touchstart",n),this._addEvent(e.conts[s],"touchmove",h),this._addEvent(e.conts[s],"touchend",d)),e.tabs[s].setAttribute("data-tabed",s));function n(t){1===t.touches.length&&(!0,r._autoPlay&&clearInterval(r._autoPlay),startPos=t.touches[0][a],i=t.touches[0][o])}function h(t){var e,s,n;1!==t.touches.length||u||(e=t.touches[0][a]-startPos,c||(s=t.touches[0][o]-i,Math.abs(e)>10*Math.abs(s)&&(c=!0)),c&&t.preventDefault(),50<Math.abs(e)&&(n=0<e?l.curIdx-1<0?l.total-1:l.curIdx-1:l.curIdx+1==l.total?0:l.curIdx+1,r.select(n),u=!0))}function d(t){startPos=i=null,u=c=!1,l.auto&&r.autoPlay(l.auto)}},_launch:function(){var t=this.conf;this.doms,this.states;isNaN(t.startOn)||this.select(t.startOn),t.onRender&&t.onRender.call(this),t.auto&&this.autoPlay(t.auto)},add:function(t,e){this.conf;var s=this.doms,n=this.states;"string"==typeof t&&(t=this._id(t)),"string"==typeof e&&(e=this._id(e)),s.tabs.push(t),s.conts.push(e),n.total++,this._initEvents()},order:function(t){},prev:function(){this.conf,this.doms;var t=this.states;0==t.curIdx?this.select(t.total-1):this.select(t.curIdx-1)},next:function(){this.conf,this.doms;var t=this.states;t.curIdx==t.total-1?this.select(0):this.select(t.curIdx+1)},select:function(e,s){var n=this,a=this.conf,o=this.doms,i=this.states;if(e!=i.curIdx&&i.enable){if(e<0||e>i.total-1)throw new Error("\u6240\u5207\u6362\u7684\u9009\u9879\u5361\u4e0d\u5b58\u5728");this._selectTimeout&&clearTimeout(this._selectTimeout),this._selectTimeout=setTimeout(function(){if(a.onBefore&&a.onBefore.call(n,e),n._autoPlay&&clearInterval(n._autoPlay),a.customSelect&&"function"==typeof a.customSelect){for(var t=0;t<i.total;t++)e==t?n._addClass(o.tabs[e],a.selected):n._removeClass(o.tabs[t],a.selected);a.customSelect.call(n,e)}else for(t=0;t<i.total;t++)e==t?(n._addClass(o.tabs[e],a.selected),o.conts[e].style.display=""):(n._removeClass(o.tabs[t],a.selected),o.conts[t].style.display="none");i.curIdx=e,i.auto&&n.autoPlay(i.auto),a.onAfter&&a.onAfter.call(n,e),s&&s.call(n)},50)}},autoPlay:function(t){var e=this,s=(this.conf,this.doms,this.states),n=!!t&&(isNaN(t)?5e3:1e3*t);this._autoPlay&&clearInterval(this._autoPlay),n&&(this._autoPlay=setInterval(function(){s.curIdx==s.total-1?e.select(0):e.select(s.curIdx+1)},n)),s.auto=t},enable:function(t){this.states.enable=!!t}},e}();