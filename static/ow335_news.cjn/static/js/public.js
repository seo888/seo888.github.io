(function(e){function t(t){for(var a,r,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},o={public:0},i=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("a155")},1:function(e,t){},"380a":function(e,t,n){"use strict";n("ace0")},"39c7":function(e,t,n){},"5b20":function(e,t,n){},"61af":function(e,t,n){"use strict";n("f2bf")},8287:function(e,t,n){"use strict";n("9078")},"8bbf":function(e,t){e.exports=Vue},9078:function(e,t,n){},a155:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("8bbf"),o=n.n(a),i=(n("b0c0"),n("b20f"),n("08a9")),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cjn-image-preview"},[e.imageViewerVisible?n("el-image-viewer",{attrs:{"on-close":e.closeImageViewer,"url-list":e.imageList,"initial-index":e.initialIndex}}):e._e()],1)},s=[],c=(n("a630"),n("3ca3"),n("d3b7"),n("159b"),{name:"cjn-image-viewer",props:{imageContainer:{required:!0,type:String}},data:function(){return{imageList:[],imageViewerVisible:!1,initialIndex:0}},watch:{viewerVisible:function(e){this.visible=e}},created:function(){var e=this;this.$imageContainer=document.querySelector(this.imageContainer),this.$images=Array.from(this.$imageContainer.querySelectorAll("img")),this.$images.forEach((function(t){e.imageList.push(t.src),t.addEventListener("click",(function(){e.initialIndex=e.$images.indexOf(t),e.openImageViewer()}))}))},methods:{preventDefault:function(e){e.preventDefault()},openImageViewer:function(){this.imageViewerVisible=!0,document.body.style.overflow="hidden",document.addEventListener("touchmove",this.preventDefault,!1)},closeImageViewer:function(){this.imageViewerVisible=!1,document.body.style.overflow="auto",document.addEventListener("touchmove",this.preventDefault,!1)}}}),l=c,u=n("2877"),d=Object(u["a"])(l,r,s,!1,null,null,null),p=d.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],staticClass:"cjtt-follow-button",class:e.isFollowedClassname,attrs:{"element-loading-background":"rgba(255, 255, 255, 0.9)","element-loading-customClass":"cjtt-follow-button__loading"}},[n("span",{on:{click:e.switchFollow}},[e._v(e._s(e.followText))])])},m=[],f=n("1da1"),g=(n("96cf"),n("d4ec")),v=n("bee2"),b=n("262e"),w=n("2caf"),y=(n("e9c4"),n("cebe")),x=n.n(y),C=n("4328"),k=n.n(C),_=n("42454"),j=n.n(_),F=(n("99af"),n("b64b"),n("ac1f"),n("1276"),function(){function e(){Object(g["a"])(this,e)}return Object(v["a"])(e,null,[{key:"setItem",value:function(e,t,n){"string"!==typeof t&&(t=encodeURIComponent(JSON.stringify(t)));var a="".concat(e,"=").concat(t);n&&Object.keys(n).forEach((function(e){a+=";".concat(e,"=").concat(n[e])})),document.cookie=a}},{key:"getItem",value:function(e){var t,n=e+"=",a=document.cookie.split("; ");return a.forEach((function(e){if(0===e.indexOf(n)){var a=e.substring(n.length);try{t=JSON.parse(decodeURIComponent(a))}catch(o){t=a}}})),t}}]),e}()),O=F,I=x.a.create({timeout:3e4,withCredentials:!0,headers:{"Content-Type":"application/json; charset=utf-8"}});I.interceptors.request.use((function(e){var t=O.getItem("Authorization");return e.headers["Authorization"]=null==t||"null"==t?"":t,e.headers["deviceType"]="5",e}),(function(e){return Promise.reject(e)})),I.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),I.adornUrl=function(e){return window.CJTT_SITE_CONFIG.baseUrl+e},I.adornUrlVote=function(e){return window.CJTT_SITE_CONFIG.baseUrlVote+e},I.uploadUrl=function(e){return window.CJTT_SITE_CONFIG.uploadUrl+e},I.adornParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={t:(new Date).getTime()};return t?j()(n,e):e},I.adornData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json",a={t:(new Date).getTime()};return e=t?j()(a,e):e,"json"===n?JSON.stringify(e):k.a.stringify(e)},I.adornData1=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k.a.stringify(e)};var $=I,T=(n("d9e2"),function(){function e(){Object(g["a"])(this,e)}return Object(v["a"])(e,[{key:"emitShowLoginDialog",value:function(){e.getDefault().$emit("show-login-dialog")}},{key:"onShowLoginDialog",value:function(t){e.getDefault().$on("show-login-dialog",t)}}],[{key:"getDefault",value:function(){return e.instance||(e.instance=new o.a),e.instance}},{key:"getBus",value:function(){return e.bus||(e.bus=new e),e.bus}}]),e}());T.instance=null,T.bus=null;var S=T,U=function(){function e(){Object(g["a"])(this,e)}return Object(v["a"])(e,[{key:"responseData",value:function(e){if(200===e.data.code||0===e.data.code)return e.data;throw 401===e.data.code&&S.getBus().emitShowLoginDialog(),new Error(e.data&&e.data.msg?e.data.msg:e)}}]),e}(),N=U,V=function(e){Object(b["a"])(n,e);var t=Object(w["a"])(n);function n(){return Object(g["a"])(this,n),t.apply(this,arguments)}return Object(v["a"])(n,[{key:"followUser",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,a=t.type,o=void 0===a?1:a,e.prev=1,e.next=4,$({url:$.adornUrl("/v1/concern/concernOrCancel"),method:"POST",data:$.adornData({id:n,type:o,t:Date.now(),concernOrCancel:1},!1)});case 4:return i=e.sent,e.abrupt("return",this.responseData(i));case 8:throw e.prev=8,e.t0=e["catch"](1),e.t0;case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unfollowUser",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,a=t.type,o=void 0===a?1:a,e.prev=1,e.next=4,$({url:$.adornUrl("/v1/concern/concernOrCancel"),method:"POST",data:$.adornData({id:n,type:o,t:Date.now(),concernOrCancel:0},!1)});case 4:return i=e.sent,e.abrupt("return",this.responseData(i));case 8:throw e.prev=8,e.t0=e["catch"](1),e.t0;case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"getService",value:function(){return n.instance||(n.instance=new n),n.instance}}]),n}(N);V.instance=null;var D=V,E={name:"cjtt-follow-button",props:{isFollowed:{required:!1,type:Boolean,default:!1},userId:{required:!0}},data:function(){return{loading:!1,followed:!1}},computed:{followText:function(){return this.followed?"已关注":"+关注"},isFollowedClassname:function(){return this.followed?"cjtt-follow-button--followed":null}},watch:{isFollowed:function(e){this.followed=e}},created:function(){this.loading=!1,this.followed=this.isFollowed},mounted:function(){},methods:{switchFollow:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,n=D.getService(),t.prev=2,t.next=5,n[e.followed?"unfollowUser":"followUser"].call(n,{id:e.userId});case 5:e.followed=!e.followed,e.loading=!1,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.error(t.t0);case 12:e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()}}},L=E,P=(n("380a"),Object(u["a"])(L,h,m,!1,null,null,null)),A=P.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cjn-login",staticStyle:{width:"100%",height:"100%"}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.processing,expression:"processing"}],staticClass:"login-main"},[n("div",{staticClass:"login-tab"},[n("div",{staticClass:"login-tab-item",class:{active:"first"==e.activeName},on:{click:function(t){return e.handleClick("first")}}},[n("span",[e._v("验证码登录/注册")]),"first"===e.activeName?n("span",{staticClass:"login-tab-item__active-decoration"}):e._e()]),n("div",{staticClass:"login-tab-item",class:{active:"second"==e.activeName},staticStyle:{"margin-left":"18px"},on:{click:function(t){return e.handleClick("second")}}},[n("span",[e._v("账号密码登录")]),"second"===e.activeName?n("span",{staticClass:"login-tab-item__active-decoration"}):e._e()])]),"first"==e.activeName?n("el-form",{key:"first",ref:"phoneForm",attrs:{model:e.phoneForm,rules:e.phoneRule,"status-icon":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.phoneFormSubmit.apply(null,arguments)}}},[n("el-form-item",{attrs:{prop:"phone"}},[n("el-input",{attrs:{placeholder:"请输入您的手机号"},model:{value:e.phoneForm.phone,callback:function(t){e.$set(e.phoneForm,"phone",t)},expression:"phoneForm.phone"}})],1),n("el-form-item",{staticClass:"code-box",attrs:{prop:"code"}},[n("el-input",{staticClass:"code-input",attrs:{placeholder:"请输入验证码"},model:{value:e.phoneForm.code,callback:function(t){e.$set(e.phoneForm,"code",t)},expression:"phoneForm.code"}},[n("el-button",{staticClass:"login-btn-yzm",attrs:{slot:"suffix"},on:{click:e.showGraphic},slot:"suffix"},[e._v(e._s(e.tipName))])],1)],1),n("el-form-item",[n("el-button",{staticClass:"login-btn-submit is-rround el-button--theme",attrs:{type:"primary"},on:{click:e.phoneFormSubmit}},[e._v("登录/注册")])],1),n("div",{staticClass:"login-xy-box"},[e._v(" 登录/注册即同意 "),n("span",{staticClass:"login-xy",on:{click:function(t){return e.getAgreement(1)}}},[e._v("《用户协议》")]),e._v(" 和 "),n("span",{staticClass:"login-xy",on:{click:function(t){return e.getAgreement(2)}}},[e._v("《隐私政策》")])])],1):e._e(),n("el-form",{directives:[{name:"show",rawName:"v-show",value:"second"==e.activeName,expression:"activeName == 'second'"}],key:"second",ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"status-icon":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmit.apply(null,arguments)}}},[n("el-form-item",{attrs:{prop:"userName"}},[n("el-input",{attrs:{placeholder:"请输入您的账号"},model:{value:e.dataForm.userName,callback:function(t){e.$set(e.dataForm,"userName",t)},expression:"dataForm.userName"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.dataForm.password,callback:function(t){e.$set(e.dataForm,"password",t)},expression:"dataForm.password"}})],1),n("el-form-item",{staticClass:"cjn-login__form-item-captcha",attrs:{prop:"captcha"}},[n("span",{staticClass:"iconfont icon-icon_login_1"}),n("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.dataForm.captcha,callback:function(t){e.$set(e.dataForm,"captcha",t)},expression:"dataForm.captcha"}}),n("img",{attrs:{src:e.captchaPath,alt:""},on:{click:function(t){return e.getCaptcha()}}})],1),n("el-form-item",[n("el-button",{staticClass:"login-btn-submit is-rround el-button--theme",attrs:{type:"primary"},on:{click:e.dataFormSubmit}},[e._v("登录")])],1),n("div",{staticClass:"login-xy-box"},[e._v(" 登录即同意 "),n("span",{staticClass:"login-xy",on:{click:function(t){return e.getAgreement(1)}}},[e._v("《用户协议》")]),e._v(" 和 "),n("span",{staticClass:"login-xy",on:{click:function(t){return e.getAgreement(2)}}},[e._v("《隐私政策》")])])],1)],1),n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"900px","custom-class":"login-dialog","append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{staticClass:"login-dialog-content",domProps:{innerHTML:e._s(e.dialogContent)}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"el-button--theme",attrs:{round:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")])],1)]),n("el-dialog",{attrs:{title:"图形验证码",visible:e.dialogVisible1,width:"350px","custom-class":"login-dialog1","close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible1=t}}},[n("el-form",{ref:"phoneForm",attrs:{model:e.phoneForm1}},[n("el-form-item",{staticClass:"code-box",attrs:{prop:"code"}},[n("span",{staticClass:"iconfont icon-icon_login_1"}),n("el-input",{staticClass:"code-input",attrs:{placeholder:"请输入验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getLoginCodeByCheck.apply(null,arguments)}},model:{value:e.phoneForm1.code,callback:function(t){e.$set(e.phoneForm1,"code",t)},expression:"phoneForm1.code"}}),n("img",{attrs:{src:e.captchaPath,alt:"验证码"},on:{click:e.getCaptcha}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"el-button--theme-secondary",attrs:{round:""},on:{click:function(t){e.dialogVisible1=!1}}},[e._v("取消")]),n("el-button",{staticClass:"el-button--theme",attrs:{round:""},on:{click:e.getLoginCodeByCheck}},[e._v("确定")])],1)],1)],1)},B=[];n("0eb6"),n("b7ef"),n("8bd4"),n("5319"),n("25f0"),n("466d"),n("81b2"),n("c19f"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7");function q(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){return("x"===e?16*Math.random()|0:8).toString(16)}))}n("00b4");function J(e){return/^1[0-9]{10}$/.test(e)}var G=function(){function e(){Object(g["a"])(this,e)}return Object(v["a"])(e,[{key:"saveItem",value:function(e,t){var n=new Date;n.setDate(n.getDate()+7),O.setItem(e,t,{domain:window.CJTT_SITE_CONFIG.cookieDomain,path:"/",expires:n.toUTCString()})}},{key:"loginUsingPhoneNum",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.phone,a=t.code,o=t.registerSource,i=void 0===o?4:o,e.prev=1,e.next=4,$({url:$.adornUrl("/app/loginByCodeForPc"),method:"POST",data:$.adornData({phone:n,code:a,registerSource:i},!1)});case 4:if(r=e.sent,!r.data||0!==r.data.code){e.next=12;break}return this.saveItem("Authorization",r.data.data.Authorization),e.next=9,this.retrieveUserInfo();case 9:return e.abrupt("return",e.sent);case 12:throw new Error(r.msg);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e["catch"](1),e.t0;case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loginUsingAccount",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.username,a=t.password,o=t.uuid,i=t.captcha,e.prev=1,e.next=4,$({url:$.adornUrl("/app/loginByAccount"),method:"POST",data:$.adornData({username:n,password:a,uuid:o,captcha:i},!1)});case 4:if(r=e.sent,!r.data||0!==r.data.code){e.next=12;break}return this.saveItem("Authorization",r.data.data.Authorization),e.next=9,this.retrieveUserInfo();case 9:return e.abrupt("return",e.sent);case 12:throw new Error(r.msg);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e["catch"](1),e.t0;case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUserInfo",value:function(){return O.getItem("userMsg")}},{key:"retrieveUserInfo",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{retrieveOnly:!1},O.getItem("Authorization")){e.next=3;break}throw new Error("用户尚未登陆");case 3:return e.prev=3,e.next=6,$({url:$.adornUrl("/v1/settle/getSettleInfo"),params:$.adornParams()});case 6:if(n=e.sent,!n.data||0!==n.data.code){e.next=12;break}return t.retrieveOnly||this.saveItem("userMsg",n.data.data),e.abrupt("return",n.data.data);case 12:throw new Error(n.msg);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e["catch"](3),e.t0;case 18:case"end":return e.stop()}}),e,this,[[3,15]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"logout",value:function(){var e=new Date;e.setFullYear(1970),O.setItem("Authorization","",{domain:window.CJTT_SITE_CONFIG.cookieDomain,path:"/",expires:e.toUTCString()}),O.setItem("userMsg","",{domain:window.CJTT_SITE_CONFIG.cookieDomain,path:"/",expires:e.toUTCString()})}}],[{key:"getService",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();G.instance=null;var z=G,H={name:"cjtt-login",data:function(){var e=function(e,t,n){if(!t)return n(new Error("手机号不能为空"));J(t)?n():n(new Error("手机号格式不正确"))};return{activeName:"first",tipName:"获取验证码",currentTime:60,phoneForm:{phone:"",name2:""},phoneRule:{phone:[{validator:e,trigger:"blur"}],name2:[{required:!0,message:"验证码不能为空",trigger:"blur"}]},phoneChecked:!0,dataForm:{userName:"",password:"",uuid:"",captcha:""},dataRule:{userName:[{required:!0,message:"帐号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],captcha:[{required:!0,message:"验证码不能为空",trigger:"blur"}]},dataChecked:!0,captchaPath:"",dialogTitle:"用户协议",dialogVisible:!1,dialogContent:"",dialogVisible1:!1,phoneForm1:{code:""},loginUser:{phone:"",auth:"",settleName:"",userName:"",logo:""},processing:!1}},created:function(){var e=this;this.getCaptcha(),S.getDefault().$on("user-ready",(function(t){e.$emit("logined",t)}))},methods:{handleClick:function(e){this.activeName=e,"first"==this.activeName?this.phoneForm={phone:"",code:""}:this.dataForm={userName:"",password:"",uuid:this.dataForm.uuid,captcha:""}},showGraphic:function(){if(!this.phoneForm.phone)return this.$message({message:"手机号不能为空",type:"error"}),!1;this.dialogVisible1=!0,this.phoneForm1={code:""},this.getCaptcha()},getLoginCodeByCheck:function(){var e=this;this.$http({url:this.$http.adornUrl("/app/getLoginCodeByCheck"),method:"post",params:this.$http.adornParams({phone:this.phoneForm.phone,uuid:this.dataForm.uuid,captcha:this.phoneForm1.code})}).then((function(t){var n=t.data;n&&0===n.code?(e.getPhoneNum(),e.dialogVisible1=!1):e.$message({message:n.msg,type:"error"}),e.getCaptcha()})).catch((function(){e.getCaptcha()}))},getPhoneNum:function(){if("获取验证码"!=this.tipName)return!1;if(!this.phoneForm.phone)return this.$message({message:"手机号不能为空",type:"error"}),!1;if(!J(this.phoneForm.phone))return this.$message({message:"手机号格式不正确",type:"error"}),!1;var e=this,t=e.currentTime,n=setInterval((function(){t--,t>0?e.tipName=t+"秒":(clearInterval(n),e.tipName="获取验证码")}),1e3)},phoneFormSubmit:function(){var e=this;return 0==this.phoneChecked?(this.$message({message:"请先勾选同意《用户协议》 和 《隐私政策》",type:"warning"}),!1):""==this.phoneForm.code?(this.$message({message:"请输入验证码!",type:"error"}),!1):void this.$refs["phoneForm"].validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=13;break}return e.processing=!0,t.prev=2,t.next=5,z.getService().loginUsingPhoneNum({phone:e.phoneForm.phone,code:e.phoneForm.code,registerSource:4});case 5:a=t.sent,S.getDefault().$emit("user-login",a),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),e.$message({message:t.t0.message?t.t0.message:"发生错误，请刷新后重试",type:"error"});case 12:e.processing=!1;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}())},encode:function(e){var t=encodeURI(e),n=btoa(t);return n},dataFormSubmit:function(){var e=this;if(0==this.dataChecked)return this.$message({message:"请先勾选同意《用户协议》 和 《隐私政策》",type:"warning"}),!1;this.$refs["dataForm"].validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=14;break}return e.processing=!0,t.prev=2,t.next=5,z.getService().loginUsingAccount({username:e.dataForm.userName,password:e.encode(e.dataForm.password),uuid:e.dataForm.uuid,captcha:e.dataForm.captcha});case 5:a=t.sent,S.getDefault().$emit("user-login",a),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),e.$message({message:t.t0.message?t.t0.message:"发生错误，请刷新后重试。",type:"error"});case 12:e.processing=!1,e.getCaptcha();case 14:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}())},getCaptcha:function(){this.dataForm.uuid=q(),this.captchaPath=this.$http.adornUrl("/app/captcha.jpg?uuid=".concat(this.dataForm.uuid))},getAgreement:function(e){var t=this;1==e?this.dialogTitle="用户协议":2==e&&(this.dialogTitle="隐私政策"),this.$http({url:this.$http.adornUrl("/v1/agreement/getAgreementInfo/")+e,params:this.$http.adornParams()}).then((function(e){var n=e.data;n&&0===n.code?(t.dialogVisible=!0,t.dialogContent=n.data.content):t.$message({message:n.msg,type:"error"})}))}}},M=H,Y=(n("8287"),n("c2ae"),Object(u["a"])(M,R,B,!1,null,"2cabf9c7",null)),K=Y.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{"custom-class":"cjn-login-dialog",visible:e.dialogVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("cjtt-login",{on:{logined:e.loginedHandle}})],1)},W=[],X={name:"cjtt-login-dialog",props:{visible:{require:!1,type:Boolean,default:!1}},data:function(){return{dialogVisible:!1}},watch:{visible:function(e){this.dialogVisible=e},dialogVisible:function(e){this.$emit("update:visible",e)}},methods:{loginedHandle:function(e){this.$emit("user-login",e)}}},Z=X,ee=(n("aade"),Object(u["a"])(Z,Q,W,!1,null,null,null)),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cjtt-user-head"},[n("div",{staticClass:"cjtt-user-head__wrapper",on:{mouseenter:function(t){e.showActions=!1},mouseleave:function(t){e.showActions=!1}}},[n("div",{staticClass:"cjtt-user-head__container"},[n("div",{staticClass:"cjtt-user-head__logo",style:{"background-image":"url("+e.headImage+")"},on:{click:e.handleUserHeadClick}}),n("div",{staticClass:"cjtt-user-head__text",on:{click:e.handleUserTextClick}},[e._v("  "+e._s(e.userLoginText)+" ")])]),e.isLogin?n("div",{staticClass:"cjtt-user-head__actions-container"},[n("div",{staticClass:"cjtt-user-head__actions-wrapper",class:{"cjtt-user-head__actions-wrapper--show":e.showActions}},[n("div",{staticClass:"cjtt-user-head__actions"},[n("div",{staticClass:"cjtt-user-head__action-item",on:{click:e.emitUserLogout}},[e._v("退出")])])])]):e._e()]),n("cjtt-login-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}})],1)},ae=[],oe={name:"cjtt-user-head",data:function(){return{headImage:"http://img.cjn.cn/xq/cjnpc_2021/sucai/tt-toux2.png",defaultHeadImage:"http://oss.jp.cjn.cn/images/20220112/164197192601221ef2154-7c0e-4257-ab30-c1f04e45d602.png",dialogVisible:!1,showActions:!1}},created:function(){var e=this;S.getDefault().$on("user-login",(function(t){e.handleUserLogin(t)})),S.getBus().onShowLoginDialog((function(){e.dialogVisible=!0}))},computed:{userInfo:function(){return this.$root.userInfo},userLoginText:function(){return this.userInfo?"退出":"登录"},isLogin:function(){return!!this.userInfo}},watch:{userInfo:function(e){e&&(this.headImage=e.logoUrl||this.defaultHeadImage)}},methods:{handleUserHeadClick:function(){this.isLogin?this.redirectToUserHome():this.dialogVisible=!0},handleUserTextClick:function(){this.isLogin?this.confirmLogout():this.dialogVisible=!0},sliderDownActions:function(){this.isLogin&&(this.showActions=!0)},emitUserLogout:function(){S.getDefault().$emit("user-logout")},handleUserLogin:function(e){this.headImage=e.logoUrl||this.defaultHeadImage,this.dialogVisible=!1,this.redirectToCjtt()},redirectToCjtt:function(){window.open("http://cjtt.cjn.cn/#/cjtt?id=1","_self")},reloadPage:function(){window.location.reload()},confirmLogout:function(){this.$confirm("确定进行[退出]操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"el-button--theme",cancelButtonClass:"el-button--theme-secondary",type:"warning",roundButton:!0}).then((function(){S.getDefault().$emit("user-logout")})).catch((function(){}))}}},ie=oe,re=(n("61af"),Object(u["a"])(ie,ne,ae,!1,null,null,null)),se=re.exports,ce={install:function(e,t){window.CJTT_SITE_CONFIG={baseUrl:"http://api.jp.cjn.cn",socketUrl:"www.cnjiupai.com/wss",uploadUrl:"http://f.jp.cjn.cn/",m3u8Url:"http://h5.jp.cjn.cn/player",baseUrlVote:"http://voteapi.cnjiupai.com/jp-vote",h5Url:"http://h5.jp.cjn.cn",previewUrl:"https://cjn.jiupaicn.com",domain:"./",version:"202201311959",cdnUrl:"./202201311959",cookieDomain:".cjn.cn"},console.log(window.CJTT_SITE_CONFIG),e.prototype.$http=$,e.prototype.$siteStorage=O,e.prototype.$cjttEventBus=S.getDefault();var n=e.prototype.$userService=z.getService();S.getDefault().$on("user-logout",(function(){n.logout(),window.location.reload()})),e.component("el-image-viewer",i["a"]),e.component(p.name,p),e.component(A.name,A),e.component(K.name,K),e.component(te.name,te),e.component(se.name,se)}},le=function(){new Vue({el:"#cjtt-login-app",data:function(){return{userInfo:null}},created:function(){var e=this;this.$cjttEventBus.$on("user-login",(function(t){e.userInfo=t})),this.$userService.retrieveUserInfo({retrieveOnly:!0}).then((function(t){e.userInfo=t})).catch((function(e){console.error(e)}))}})},ue=function(){if(document.querySelector(".arc-main")){var e=document.createElement("div"),t=document.createElement("cjn-image-viewer");t.setAttribute("image-container",".art-main"),e.appendChild(t),document.body.appendChild(e),new Vue({el:e})}};o.a.use(ce),le(),ue()},aade:function(e,t,n){"use strict";n("39c7")},ace0:function(e,t,n){},b20f:function(e,t,n){},c2ae:function(e,t,n){"use strict";n("5b20")},cebe:function(e,t){e.exports=axios},f2bf:function(e,t,n){}});