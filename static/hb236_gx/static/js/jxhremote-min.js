window.xhnc_commentOption=window.xhnc_commentOption||{},window.xhnc_commentOption.language=window.xhnc_commentOption.language||"zh",window.xhnc_commentOption.host=window.xhnc_commentOption.host||"http://tmisc.home.news.cn/nc2",window.xhnc_commentOption.style=window.xhnc_commentOption.style||"default",function(a){var b,c,d,e;window.console=window.console||{log:function(){}},b=function(){this.settings={begin:function(){},success:function(){},error:function(){},scripts:[],styles:[],custom:{},ready:!1},this.ajax={url:"",method:"GET",type:"text",cache:!1,async:!0,params:{},success:function(){},error:function(){}},this.httpRequest=!1,this.scripts={len:0,list:[],loaded:0,done:!1},this.styles={len:0,list:[],loaded:0},this.oid="JFO_REMOTE_"+Math.floor(1e5*Math.random())+"_"+(new Date).getTime(),this.div=null,this.params={},this.query={},this.src=""},c="undefined"!=typeof document.all,b.prototype={init:function(){this.div=document.getElementById(this.oid),("undefined"==typeof this.div||null===this.div)&&document.write("<div id="+this.oid+"></div>"),this.div=document.getElementById(this.oid),this._readParams()},_lock:function(){var a=document.getElementsByTagName("script");script=a[a.length-1],this.src=script.src},_readParams:function(){this.params=this.doQuery(this.src),this.query=this.doQuery(window.location.search)},doQuery:function(a){var b,c,d;if(!a)return{};for(b=/(?:\?|&)(.*?)=(.*?)(?=&|$)/g,d={};null!=(c=b.exec(a));)d[c[1]]=decodeURIComponent(c[2]);return d},overwrite:function(a,b){if("object"!=typeof a||"object"!=typeof b)return a;for(var c in b)"undefined"!=typeof a[c]&&typeof b[c]==typeof a[c]?"object"!=typeof a[c]||a[c]instanceof Array?a[c]=b[c]:this.overwrite(a[c],b[c]):a[c]=b[c];return a},oneStep:function(a){var b=this;this.overwrite(this.settings,a),this.settings.begin(this),this.loadStyle(function(){b.loadScript(function(){b.settings.success(b)},b.settings.scripts)},this.settings.styles)},existScript:function(a){var c,b=this.scripts.list;for(c=0;c<b.length;c++)if(b[c]==a)return!0;return!1},existStyle:function(a){var c,b=this.styles.list;for(c=0;c<b.length;c++)if(b[c]==a)return!0;return!1},installLoadEvent:function(a,b,d){var e=this;c?a.attachEvent("onreadystatechange",function(){("loaded"==a.readyState||"complete"==a.readyState)&&(b.loaded++,b.loaded>=b.len&&!b.done&&d(e),a.detachEvent("onreadystatechange",arguments.callee))}):a.addEventListener("load",function(){b.loaded++,b.loaded>=b.len&&!b.done&&(b.done=!0,d(e)),a.removeEventListener("load",arguments.call,!1)},!1)},loadScript:function(a,b){var c,d,e,f;if(b.length<=0)return this.scripts.done=!0,a(this),void 0;for(this.scripts.len=b.length,c=0;c<b.length;c++)if(!this.existScript(b[c])){if(d=b[c],e=document.createElement("script"),e.type="text/javascript","string"==typeof d)e.src=encodeURI(d);else{if("object"!=typeof d||"undefined"==typeof d.url){e=null,this.scripts.len--;continue}if(("undefined"!=typeof d.conflict||null!==d.conflict)&&(f=d.force,"undefined"!=typeof window[d.conflict]&&(this.scripts.len--,!f))){try{console.log('The page exist object conflict script about "'+d.conflict+'"')}catch(g){}continue}e.src=encodeURI(d.url)}this.div.appendChild(e),this.scripts.list.push(e),this.installLoadEvent(e,this.scripts,a)}return this.scripts.len<=0?(this.scripts.done=!0,a(this),void 0):void 0},loadStyle:function(a,b){var c,d;if(b.length<=0)return a(this),void 0;for(this.styles.len=b.length,c=0;c<b.length;c++)this.existStyle(b[c])||(d=document.createElement("link"),d.type="text/css",d.rel="stylesheet",d.href=b[c],this.div.appendChild(d),this.styles.list.push(d),this.installLoadEvent(d,this.styles,a))}},d=new b,d._lock(),d.init(),a.ready?(e=function(a,b){return function(){a.oneStep(b)}}(d,a),window.attachEvent?window.attachEvent("onload",e):window.addEventListener("load",e,!1)):d.oneStep(a)}({success:function(a){var c,d,e,f,g,b=a.params.callback;b=b&&window[b]&&"function"==typeof window[b]?window[b]:function(){},c=0,d=5,e=null,f=window.xhnc_commentOption.host,g=function(){return null!=e&&(window.clearTimeout(e),e=null),c>=d?(b(101),void 0):(c++,KISSY&&KISSY.config?(KISSY.config({debug:!1,base:f+"/js/build",packages:[{name:"xh",path:f+"/js"}]}),KISSY.use("xh/comment/1.0/cremote",function(c,d){b(100),d.init({baseId:a.div.id},{remote:a,parent:a.div,callback:b})}),void 0):(e=window.setTimeout(g,500),void 0))},g()},scripts:[{url:window.xhnc_commentOption.host+"/js/language/"+window.xhnc_commentOption.language+".js",conflict:"xhcommLanguage",force:!0},{url:window.xhnc_commentOption.host+"/js/build/kissy-min.js",conflict:"KISSY",force:!0}],styles:[window.xhnc_commentOption.host+"/css/news.comment.detail.build.css",window.xhnc_commentOption.host+"/css/news.comment.style."+window.xhnc_commentOption.style+".css"]});