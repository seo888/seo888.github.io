var _avalon$define,_avalon$define2;function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}$(function(){function o(){return document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop}window.__lk="",$("#sysKeys").val()&&(window.__lk=JSON.parse($("#sysKeys").val()),$("#sysKeys").remove()),$("#userLoginOut").click(function(){loginOut()}),$("#gotop").click(function(){return $("body,html").animate({scrollTop:0},800),!1}),$("#footerTop").click(function(){return $("body,html").animate({scrollTop:0},800),!1}),$(".list-type-btn > div").each(function(e,t){$(t).click(function(e){$(t).hasClass("active")||($(t).siblings("div").removeClass("active"),$(t).addClass("active"),$(t).hasClass("type-list")&&($(t).children(".btn-bg").attr("src","https://res.chenshipin.com/saas/90009/image/202201/61d3e352432b2.png"),$(".type-card").children(".btn-bg").attr("src","https://res.chenshipin.com/saas/90009/image/202201/61d3e35385768.png")),$(t).hasClass("type-card")&&($(t).children(".btn-bg").attr("src","https://res.chenshipin.com/saas/90009/image/202201/61d3e3557a021.png"),$(".type-list").children(".btn-bg").attr("src","https://res.chenshipin.com/saas/90009/image/202201/61d3e350d361d.png")),$(".post-list").toggleClass("list"),$(".post-list").hasClass("list")?($(".post-list .card-box").hide(),$(".post-list .list-box").show()):($(".post-list .card-box").show(),$(".post-list .list-box").hide()))})});var s=0,t=$(".Exhibition_item").length;function n(e){$(".Exhibition_num").css({transform:"translate3d(0px, "+e+",0px)","transition-duration":"300ms"})}0<t-5?($(".icon_RImg").click(function(){var e=125*-(s+=1)+"px";return s==t-5?($(".icon_RImg").css("top","640px"),$(".icon_LImg").css("top","0px"),$(".ProductExhibition").mouseover(function(){$(this).find(".icon_RImg").css("top","640px"),$(this).find(".icon_LImg").css("top","0px")}),$(".ProductExhibition").mouseout(function(){$(this).find(".icon_RImg").css("top","640px"),$(this).find(".icon_LImg").css("top","0px")}),n(e)):s!=t-5?($(".icon_RImg").css("top","594px"),$(".icon_LImg").css("top","0"),$(".ProductExhibition").mouseover(function(){$(this).find(".icon_RImg").css("top","594px"),$(this).find(".icon_LImg").css("top","0px")}),$(".ProductExhibition").mouseout(function(){$(this).find(".icon_RImg").css("top","640px"),$(this).find(".icon_LImg").css("top","-50px")}),n(e)):void 0}),$(".icon_LImg").click(function(){var e=125*- --s+"px";if(0==s)return $(".icon_LImg").css("top","-50px"),$(".icon_RImg").css("top","594px"),$(".ProductExhibition").mouseover(function(){$(this).find(".icon_LImg").css("top","-50px"),$(".icon_RImg").css("top","594px")}),$(".ProductExhibition").mouseout(function(){$(this).find(".icon_LImg").css("top","-50px"),$(".icon_RImg").css("top","594px")}),n(e);0!=s&&($(".icon_RImg").css("top","594px"),$(".icon_LImg").css("top","-50px"),$(".ProductExhibition").mouseover(function(){$(this).find(".icon_RImg").css("top","594px"),$(this).find(".icon_LImg").css("top","0px")}),$(".ProductExhibition").mouseout(function(){$(this).find(".icon_RImg").css("top","640px"),$(this).find(".icon_LImg").css("top","-50px")}),n(e))})):(console.log("false"),$(".ProductExhibition").hover(function(){$(".icon_RImg").css("top","640px")})),$.adsItv=null,clearInterval($.adsItv),$.adsItv=setInterval(function(){2<=s?s=0:s+=1,$(".Exhibition_item").removeClass("czt_active"),$(".Exhibition_item").eq(s).addClass("czt_active");var e=360*-s+"px",t=120*s+"px";$(".ProductExhibition_box").css("transform","translate3d(0px,"+e+",0px)"),$(".Exhibition_items").css("transform","translateY("+t+")")},5e3),$(window).scroll(function(e){150<o()?($(".header-box").addClass("scroll"),$("#gotop").css("opacity",1),$("#top-header").css("height","70px"),$("#header").css("height","70px")):($(".header-box").removeClass("scroll"),$("#gotop").css("opacity",0),$("#header").css("height","100px"),$("#top-header").css("overflow","inherit"),$("#top-header").css("height","100px"));var t=$(document).height(),s=$(this).height();o()+s>=t-300&&loadModel.loadFlag&&"/"==window.location.pathname&&loadModel.testClick()})});var msgTime=800;function checkIfMobile(){return!!navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}function getAjaxData(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"get",o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:function(){};layer.load(2,{shade:[.001,"rgb(255,255,255)"]});var a={url:e,type:s.toLocaleUpperCase(),success:function(e){layer.closeAll("loading"),500===e.status?(layer.msg(e.message,{icon:2,shade:[.001,"#000"],zIndex:999999999,time:msgTime}),n&&n()):401===e.status?layer.confirm(e.message,{title:getSysValueByKey("sys_layer_confirm_title"),btn:getSysValueByKey("sys_layer_confirm_btn_yes"),yes:function(e){layer.close(e)}}):t&&t(e)},error:function(e){layer.closeAll("loading")}};"post"==s?a=Object.assign({},a,{data:o}):(e.indexOf("?"),a.url=e),$.ajax(a)}function getSysValueByKey(e){return window.__lk?window.__lk[e]:""}function loginOut(){layer.confirm(getSysValueByKey("sys_layer_confirm_logOut"),{title:getSysValueByKey("sys_layer_confirm_title"),btn:getSysValueByKey("sys_layer_confirm_btn_yes"),yes:function(e){layer.close(e),getAjaxData("/api/user/logOut",function(e){200==e.status&&layer.msg(e.message,{icon:1,time:msgTime},function(){window.location="/"})})}})}function renderParams(e){var t,s="";for(t in e)s+="&"+t+"="+e[t];return s.substring(1,s.length)}function getQueryString(e){e=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(e);return null!=e?unescape(e[2]):null}layer.config({extend:"blue/layer.css",skin:"layui-layer-blue"});var _oldValuesOfPersonInfoVM={},personInfoVm=avalon.define({$id:"personInfo",message:"",showErr:!1,industry:"",introduction:"",profession:"1",experience:"1",comments:"",gender:"0",userName:"",userId:"",selected:"1",follow_num:0,total_despiseNum:0,total_likeNum:0,total_reward_num:0,approveCreatorIndentify:function(){layer.alert(getSysValueByKey("label_system_waitfor_update"))},industryArr:[],professionArr:[],experienceArr:[],validate:{onError:function(e){e.forEach(function(e){console.log(e.getMessage())})},onValidateAll:function(e){e.length?(console.log("有表单没有通过",e),layer.msg(e[0].message,{icon:2,shade:[.001,"#000"],time:msgTime})):(console.log("全部通过"),e={},personInfoVm.userName&&(e.userName=personInfoVm.userName),personInfoVm.introduction&&(e.introduction=personInfoVm.introduction),personInfoVm.gender&&(e.gender=personInfoVm.gender),personInfoVm.profession&&(e.profession=personInfoVm.profession),personInfoVm.industry&&(e.industry=personInfoVm.industry),personInfoVm.experience&&(e.experience=personInfoVm.experience),personInfoVm.label_introduction&&(e.label_introduction=personInfoVm.label_introduction),personInfoVm.comments&&(e.comments=personInfoVm.comments),$(".form_datetime").data("datetimepicker").getDate()&&(e.birth=$(".form_datetime").data("datetimepicker").getDate()),getAjaxData("/api/user/updateInfo",function(e){200==e.status&&(layer.msg(e.message,{icon:1,time:msgTime}),personInfoVm.getUserInfo(personInfoVm.userId))},"post",e))}},getUserInfo:function(e){getAjaxData("/api/user/getUserInfoById?id="+e,function(e){var t=e.data,s=t.id,o=t.industry,n=t.profession,a=t.experience,i=t.comments,r=t.gender,m=t.userName,l=t.birth,d=t.introduction,c=t.follow_num,g=t.total_despiseNum,e=t.total_likeNum,t=t.total_reward_num;personInfoVm.introduction=d||"",personInfoVm.industry=o||"",personInfoVm.profession=n||"",personInfoVm.experience=a||"",personInfoVm.comments=i||"",personInfoVm.gender=r,personInfoVm.userName=m,personInfoVm.userId=s,personInfoVm.follow_num=c,personInfoVm.total_despiseNum=g,personInfoVm.total_likeNum=e,personInfoVm.total_reward_num=t,l&&$(".form_datetime").datetimepicker("update",l)})}}),confirmEmailVm=avalon.define({$id:"confirmEmail",email:"",message:"",showErr:!1,validate:{onError:function(e){e.forEach(function(e){console.log(e.getMessage())})},onValidateAll:function(e){e.length?(console.log("有表单没有通过",e),confirmEmailVm.showErr=!0,confirmEmailVm.message=e[0].message):(console.log("全部通过"),getAjaxData("/api/user/sentConfirmEmail",function(e){200==e.status?layer.msg(e.message,{icon:1,anim:1,time:msgTime},function(){window.location.href="/"}):(confirmEmailVm.showErr=!0,confirmEmailVm.message=e.message)},"post",{email:confirmEmailVm.email}))}}}),userTellLoginVm=avalon.define({$id:"userTellLogin",phoneNum:"",countryCode:"",message:"",showErr:!1,basetime:120,targetPanel:"1",reset:function(){userTellLoginVm.phoneNum=" ",userTellLoginVm.messageCode=" "},messageCode:"",lateResendTxt:" s",reSendBtnTxt:getSysValueByKey("label_system_resend"),sendMsgCode:function(){if(120!=userTellLoginVm.basetime)return!1;/^[0-9]*$/.test(userTellLoginVm.phoneNum)?($("#get-v-code").prop("disabled","disabled"),getAjaxData("/api/user/sendVerificationCode",function(e){var t=setInterval(function(){$("#get-v-code").html(--userTellLoginVm.basetime+userTellLoginVm.lateResendTxt)},1e3);setTimeout(function(){clearInterval(t),$("#get-v-code").removeAttr("disabled"),$("#get-v-code").html(getSysValueByKey("label_system_resend")),userTellLoginVm.basetime=120},1e3*userTellLoginVm.basetime)},"post",{phoneNum:userTellLoginVm.phoneNum,countryCode:userTellLoginVm.countryCode||"86",messageType:"1"})):layer.open({content:getSysValueByKey("sys_layer_validate_phoneNum"),skin:"msg",time:1,anim:!1})},validate:{onError:function(e){e.forEach(function(e){console.log(e.getMessage())})},onValidateAll:function(e){e.length?(console.log("有表单没有通过",e),layer.msg(e[0].message,{icon:2,shade:[.001,"#000"],time:msgTime})):(console.log("全部通过"),getAjaxData("/api/user/doLogin",function(e){200==e.status&&layer.msg(e.message,_defineProperty({icon:1,time:1},"time",msgTime),function(){window.location.href="/ "})},"post",{loginType:"1",phoneNum:userTellLoginVm.phoneNum,messageCode:userTellLoginVm.messageCode,countryCode:userTellLoginVm.countryCode||"86"}))}}}),userPwdLoginVm=avalon.define({$id:"userPwdLogin",password:"",countryCode:"",phoneNum:"",message:"",showErr:!1,reset:function(){userPwdLoginVm.phoneNum=" ",userPwdLoginVm.password=" "},validate:{onError:function(e){e.forEach(function(e){console.log(e.getMessage())})},onValidateAll:function(e){e.length?(console.log("有表单没有通过",e),layer.msg(e[0].message,{icon:2,shade:[.001,"#000"],time:msgTime})):(console.log("全部通过"),getAjaxData("/api/user/doLogin",function(e){200==e.status&&layer.msg(e.message,{icon:1,time:msgTime},function(){window.location.href="/ "})},"post",{loginType:"2",countryCode:userTellLoginVm.countryCode,phoneNum:userPwdLoginVm.phoneNum,password:userPwdLoginVm.password}))}}}),userEmailLoginVm=avalon.define({$id:"userEmailLogin",email:"",message:"",showErr:!1,targetPanel:"3",reset:function(){userEmailLoginVm.email=" ",userEmailLoginVm.messageCode=" "},password:"",validate:{onError:function(e){e.forEach(function(e){console.log(e.getMessage())})},onValidateAll:function(e){e.length?layer.msg(e[0].message,{icon:2,shade:[.001,"#000"],time:msgTime}):(console.log("全部通过"),getAjaxData("/api/user/doLogin",function(e){200==e.status&&layer.msg(e.message,_defineProperty({icon:1,time:1},"time",msgTime),function(){window.location.href="/ "})},"post",{loginType:"3",email:userEmailLoginVm.email,password:userEmailLoginVm.password}))}}});function getUserRelevantList(e,o,n){var t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},s="";t&&(s=renderParams(t)),getAjaxData("/api"+e+"?current="+n+"&"+s+"&time="+(new Date).getDate()+(new Date).getHours()+Math.ceil((new Date).getMinutes()/10),function(e){var t,s;200==e.status&&("myContents"==o?(myContentsVm.myContentList=e.data.docs,myContentsVm.contentTotalPage=e.data.pageInfo.totalPage):"myMessages"==o?(myContentsVm.myMessageList=e.data.docs,myContentsVm.messageTotalPage=e.data.pageInfo.totalPage):"myJoinTopics"==o?(myContentsVm.myJoinTopicsList=e.data.docs,myContentsVm.joinTopicsTotalPage=e.data.pageInfo.totalPage):"homeList"==o?(s=e.data.docs,setTimeout(function(){$(".Exhibition_item").each(function(e,t){$(t).mouseenter(function(){clearInterval($.adsItv),latenum=$(this).index()-1,$(".Exhibition_item").removeClass("czt_active"),$(this).addClass("czt_active");var e=360*-$(this).index()+"px",t=120*$(this).index()+"px";$(".ProductExhibition_box").css("transform","translate3d(0px,"+e+",0px)"),$(".Exhibition_items").css("transform","translateY("+t+")")}),$(t).mouseleave(function(){clearInterval($.adsItv),$.adsItv=setInterval(function(){2<=latenum?latenum=0:latenum+=1,$(".Exhibition_item").removeClass("czt_active"),$(".Exhibition_item").eq(latenum).addClass("czt_active");var e=360*-latenum+"px",t=120*latenum+"px";$(".ProductExhibition_box").css("transform","translate3d(0px,"+e+",0px)"),$(".Exhibition_items").css("transform","translateY("+t+")")},5e3)})})},1e3),getHotNews(),1===n&&(t=loadModel.recommends.map(function(e){return e.id}),s=s.filter(function(e){if(-1==t.toString().indexOf(e.id))return e})),s.forEach(function(e){var t,s=e.sImg.trim().split("http://f2.xxcb.cn");1<s.length?(t=s[1].split("/"),e.sImg="/static/themes/dorawhite/images/event/"+t[t.length-1]):e.sImg=s[0]}),loadModel.cmsNews=s):"contentCategory"==o?(loadModel.recommends=e.data.targetItem.recommends.filter(function(e){return"1"!=e.state}),e.data.adsList.docs.forEach(function(e){"recommend"===e.name&&(loadModel.ads=e.items||[]),"pmd"===e.name&&(headMenu.pmd=e.items||[])})):"ads"==o||"hotItemListData"==o&&(headMenu.hotNews=e.data.docs||[],console.log(headMenu.hotNews,"headMenu.hotNews")))})}function initIndex(){}function getHotNews(){getUserRelevantList("/content/getList","hotItemListData",1,{sortby:1,pageSize:10})}function initRec(){setTimeout(function(){var t=localStorage.getItem("active")?localStorage.getItem("active"):headMenu.active,s=null;headMenu.cmsNews.forEach(function(e){e.title===t&&(s=e.id)}),getUserRelevantList("/contentCategory/getOne","contentCategory",1,{id:s})},10)}var loadModel=avalon.define({$id:"load-more",current:1,pageNum:9,cmsNews:[],loadFlag:!0,recommends:[],ads:[],activeUrl:window.document.location.pathname.indexOf("detail"),testClick:function(e,t){loadModel.current=loadModel.current+1,loadModel.loadFlag=!1,getAjaxData("/api/content/getList?current="+loadModel.current+"&type="+headMenu.active,function(e){var t,s;200==e.status&&(e.data.docs.forEach(function(e){var t,s=e.sImg.trim().split("http://f2.xxcb.cn");1<s.length?(t=s[1].split("/"),e.sImg="/static/themes/dorawhite/images/event/"+t[t.length-1]):e.sImg=s[0]}),t=loadModel.cmsNews.map(function(e){return e.id}),resModel=[],docsModel=[],e.data.cmsNews.forEach(function(e){-1===t.toString().indexOf(e.id)&&resModel.push(e)}),e.data.docs.forEach(function(e){-1===t.toString().indexOf(e.id)&&docsModel.push(e)}),e=loadModel.cmsNews.concat(resModel,docsModel),s=loadModel.recommends.map(function(e){return e.id}),loadModel.cmsNews=e.filter(function(e){if(-1==s.toString().indexOf(e.id))return e}),loadModel.loadFlag=!0)})},formatTest:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:+new Date,t=new Date(-1!=e.indexOf("T")?e:e.replace(/-/g,"/")),s=t.getFullYear(),o=t.getMonth()+1,n=t.getDate(),a=t.getHours(),i=t.getMinutes(),r=(t.getSeconds(),new Date),e=0,i=(e=(new Date).getTime()-t.getTime())<=6e4?"刚刚":6e4<e&&e<=36e5?Math.round(e/6e4)+"分钟前":36e5<e&&e<=864e5?Math.round(e/36e5)+"小时前":864e5<e&&e<=1296e6?Math.round(e/864e5)+"天前":1296e6<e&&s==r.getFullYear()?a+":"+(i||"00"):s<2e3?"刚刚":s+"-"+o+"-"+n+" "+a+":"+i;return i||"刚刚"},formatTime:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:+new Date,t=new Date(-1!=e.indexOf("T")?e:e.replace(/-/g,"/")),s=(t.getFullYear(),t.getMonth()+1),e=t.getDate();t.getHours(),t.getMinutes(),t.getSeconds(),new Date,(new Date).getTime(),t.getTime();return s+"-"+e||""}}),headMenu=avalon.define({$id:"head-menu",pmd:[],hotNews:[],cmsNews:[{title:"首页",href:"/",class:9087,id:"2q8biSYgB",egtitle:"home"},{title:"国内",href:"/?type=国内",class:9088,id:"suBuiVsF4",egtitle:"gn"},{title:"经济",href:"/?type=经济",class:9089,id:"fR-sRf3ac",egtitle:"jj"},{title:"主编有态度",href:"/?type=主编有态度",class:9090,id:"gMBNfc2oNM",egtitle:"zbytd"},{title:"湖湘地理",href:"/?type=湖湘地理",class:9090,id:"-X7dF-sJM",egtitle:"hxdl"},{title:"数字报",href:"/?type=数字报",class:9092,dir:"http://epaper.xxcb.cn/",id:"qIuSB2NKL",egtitle:"szb"}],active:"首页",egKeys:{home:"首页",gn:"国内",jj:"经济",zbytd:"主编有态度",hxdl:"湖湘地理",szb:"数字报"},loc:window.location.pathname,itemClick:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"home",s=headMenu.egKeys[t];headMenu.active=s,loadModel.current=1,initRec(),localStorage.setItem("active",s),"数字报"!=s?"/"!==window.location.pathname?window.location.href="首页"==s?"/":"/#"+t:(location.hash=t,getUserRelevantList("/content/getList","homeList",1,{current:1,type:s})):window.open("http://epaper.xxcb.cn/","_blank")}}),myContentsVm=avalon.define({$id:"my-contents",myContentList:[],myMessageList:[],myJoinTopicsList:[],contentTotalPage:1,messageTotalPage:1,joinTopicsTotalPage:1,contentPageClick:function(e,t){getUserRelevantList("/content/getUserContents","myContents",t,{userId:$("#userId").val(),listState:"all"})},messagePageClick:function(e,t){getUserRelevantList("/systemNotify/getUserNotifys","myMessages",t,{userId:$("#userId").val()})},joinTopicPageClick:function(e,t){getUserRelevantList("/contentMessage/getMessages","myJoinTopics",t,{userId:$("#userId").val()})},showMessageDetails:function(e,t){e.preventDefault();e=e.target;$(e).toggleClass("fa-angle-down"),$(e).parent().next().toggleClass("show"),t.isRead||getAjaxData("/api/systemNotify/setNoticeRead?ids="+t.id,function(e){200==e.status&&getUserRelevantList("/systemNotify/getUserNotifys","myMessages",1)})},deleteNotify:function(t){layer.confirm(getSysValueByKey("sys_layer_confirm_delete"),{title:getSysValueByKey("sys_layer_confirm_title"),btn:getSysValueByKey("sys_layer_confirm_btn_yes"),yes:function(e){layer.close(e),getAjaxData("/api/systemNotify/delUserNotify?ids="+t,function(e){200==e.status&&layer.msg(getSysValueByKey("sys_layer_option_success"),{icon:1},function(){getUserRelevantList("/systemNotify/getUserNotifys","myMessages",1)})})}})}}),regVm=avalon.define({$id:"regAction",regType:"2",userName:"",phoneNum:"",email:"",password:"",countryCode:"",message:"",showErr:!1,basetime:120,targetPanel:"1",reset:function(){regVm.userName="",regVm.email="",regVm.phoneNum="",regVm.messageCode="",regVm.password=""},messageCode:"",lateResendTxt:" s",reSendBtnTxt:getSysValueByKey("label_system_resend"),mytask:"",clearSmsBtn:function(){regVm.task&&(clearInterval(regVm.mytask),$("#vCodeBtn").removeAttr("disabled"),$("#vCodeBtn").html(getSysValueByKey("label_system_resend")),regVm.basetime=120),regVm.reset()},sendMsgCode:function(){if(120!=regVm.basetime)return!1;if("1"==regVm.regType){if(!/^[0-9]*$/.test(regVm.phoneNum))return layer.open({content:getSysValueByKey("sys_layer_validate_phoneNum"),skin:"msg"}),!1}else if("2"==regVm.regType&&!/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(regVm.email))return layer.open({content:getSysValueByKey("sys_layer_validate_email"),skin:"msg"}),!1;if(!regVm.password)return layer.open({content:getSysValueByKey("sys_layer_validate_password"),skin:"msg"}),!1;$(".vCodeBtn").prop("disabled","disabled");var e={messageType:"0",sendType:regVm.regType};"1"==regVm.regType?(e.phoneNum=regVm.phoneNum,e.countryCode=regVm.countryCode||"86"):"2"==regVm.regType&&(e.email=regVm.email),getAjaxData("/api/user/sendVerificationCode",function(e){layer.msg("已发送验证码",{icon:1,time:msgTime}),regVm.mytask=setInterval(function(){$(".vCodeBtn").html(--regVm.basetime+regVm.lateResendTxt)},1e3),setTimeout(function(){clearInterval(regVm.mytask),$(".vCodeBtn").removeAttr("disabled"),$(".vCodeBtn").html(getSysValueByKey("label_system_resend")),regVm.basetime=120},1e3*regVm.basetime)},"post",e)},validate:{onError:function(e){e.forEach(function(e){console.log(e.getMessage())})},onValidateAll:function(e){e.length?(console.log("有表单没有通过",e),layer.msg(e[0].message,{icon:2,shade:[.001,"#000"],time:msgTime})):(console.log("全部通过"),e={regType:regVm.regType,password:regVm.password,messageCode:regVm.messageCode},"1"==regVm.regType?(e.phoneNum=regVm.phoneNum,e.countryCode=regVm.countryCode||"86"):"2"==regVm.regType&&(e.email=regVm.email,e.userName=regVm.userName),getAjaxData("/api/user/doReg",function(e){200==e.status&&layer.msg(e.message,{icon:1,time:msgTime},function(){window.location.href="/users/login"})},"post",e,function(){regVm.clearSmsBtn()}))}}}),getBackPsdVm=avalon.define({$id:"getBackPsd",password:"",confirmPassword:"",message:"",showErr:!1,validate:{onError:function(e){e.forEach(function(e){console.log(e.getMessage())})},onValidateAll:function(e){e.length?(console.log("有表单没有通过",e),getBackPsdVm.showErr=!0,getBackPsdVm.message=e[0].message):(console.log("全部通过"),getAjaxData("/api/user/updateNewPsd",function(e){200==e.status&&layer.msg(e.message,{icon:1},function(){window.location.href="/users/login"})},"post",{tokenId:$("#tokenId").val(),confirmPassword:getBackPsdVm.confirmPassword,password:getBackPsdVm.password}))}}}),reSetPsdVm=avalon.define((_defineProperty(_avalon$define={$id:"reSetPsd",password:"",confirmPassword:"",phoneNum:"",countryCode:"",messageCode:"",message:"",showErr:!1,basetime:120,targetPanel:"1",reset:function(){reSetPsdVm.phoneNum=" ",reSetPsdVm.messageCode=" "}},"messageCode",""),_defineProperty(_avalon$define,"lateResendTxt"," s"),_defineProperty(_avalon$define,"reSendBtnTxt",getSysValueByKey("label_system_resend")),_defineProperty(_avalon$define,"sendMsgCode",function(){return 120==reSetPsdVm.basetime&&void(/^[0-9]*$/.test(reSetPsdVm.phoneNum)?($("#get-v-code").prop("disabled","disabled"),getAjaxData("/api/user/sendVerificationCode",function(){var e=setInterval(function(){$("#get-v-code").html(--reSetPsdVm.basetime+reSetPsdVm.lateResendTxt)},1e3);setTimeout(function(){clearInterval(e),$("#get-v-code").removeAttr("disabled"),$("#get-v-code").html(getSysValueByKey("label_system_resend")),reSetPsdVm.basetime=120},1e3*reSetPsdVm.basetime)},"post",{phoneNum:reSetPsdVm.phoneNum,countryCode:reSetPsdVm.countryCode||"86",messageType:"3"})):layer.msg(getSysValueByKey("sys_layer_validate_phoneNum"),{icon:1,time:msgTime}))}),_defineProperty(_avalon$define,"validate",{onError:function(e){e.forEach(function(e){console.log(e.getMessage())})},onValidateAll:function(e){e.length?(console.log("有表单没有通过",e),reSetPsdVm.showErr=!0,reSetPsdVm.message=e[0].message):(console.log("全部通过"),getAjaxData("/api/user/resetPassword",function(e){200==e.status&&layer.msg(e.message,{icon:1,time:msgTime},function(){window.location.href="/ "})},"post",{password:reSetPsdVm.password,confirmPassword:reSetPsdVm.confirmPassword,phoneNum:reSetPsdVm.phoneNum,messageCode:reSetPsdVm.messageCode,countryCode:reSetPsdVm.countryCode||"86"}))}}),_avalon$define)),reSetPsdByEmailVm=avalon.define((_defineProperty(_avalon$define2={$id:"reSetPsdByEmail",password:"",confirmPassword:"",email:"",messageCode:"",message:"",showErr:!1,basetime:120,targetPanel:"1",reset:function(){reSetPsdByEmailVm.email=" "}},"messageCode",""),_defineProperty(_avalon$define2,"lateResendTxt"," s"),_defineProperty(_avalon$define2,"reSendBtnTxt",getSysValueByKey("label_system_resend")),_defineProperty(_avalon$define2,"sendMsgCode",function(){return 120==reSetPsdByEmailVm.basetime&&(/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(reSetPsdByEmailVm.email)?($("#get-v-code").prop("disabled","disabled"),void getAjaxData("/api/user/sendVerificationCode",function(){var e=setInterval(function(){$("#get-v-code").html(--reSetPsdByEmailVm.basetime+reSetPsdByEmailVm.lateResendTxt)},1e3);setTimeout(function(){clearInterval(e),$("#get-v-code").removeAttr("disabled"),$("#get-v-code").html(getSysValueByKey("label_system_resend")),reSetPsdByEmailVm.basetime=120},1e3*reSetPsdByEmailVm.basetime)},"post",{email:reSetPsdByEmailVm.email,sendType:"2",messageType:"3"})):(layer.msg(getSysValueByKey("sys_layer_validate_email"),{icon:1,time:msgTime}),!1))}),_defineProperty(_avalon$define2,"validate",{onError:function(e){e.forEach(function(e){console.log(e.getMessage())})},onValidateAll:function(e){e.length?(console.log("有表单没有通过",e),reSetPsdByEmailVm.showErr=!0,reSetPsdByEmailVm.message=e[0].message):(console.log("全部通过"),getAjaxData("/api/user/resetPassword",function(e){200==e.status&&layer.msg(e.message,{icon:1,time:msgTime},function(){window.location.href="/ "})},"post",{password:reSetPsdByEmailVm.password,confirmPassword:reSetPsdByEmailVm.confirmPassword,email:reSetPsdByEmailVm.email,messageCode:reSetPsdByEmailVm.messageCode,type:"2"}))}}),_avalon$define2)),setPsdVm=avalon.define({$id:"setPsd",password:"",confirmPassword:"",message:"",showErr:!1,validate:{onError:function(e){e.forEach(function(e){console.log(e.getMessage())})},onValidateAll:function(e){e.length?(console.log("有表单没有通过",e),setPsdVm.showErr=!0,setPsdVm.message=e[0].message):(console.log("全部通过"),getAjaxData("/api/user/updateInfo",function(e){200==e.status&&layer.msg(e.message,{icon:1,time:msgTime})},"post",{confirmPassword:setPsdVm.confirmPassword,password:setPsdVm.password}))}}}),userInfoVm=avalon.define({$id:"user-info",userName:"",name:"",email:"",comments:"",phoneNum:"",message:"",showErr:!1,validate:{onError:function(e){e.forEach(function(e){console.log(e.getMessage())})},onValidateAll:function(e){e.length?(console.log("有表单没有通过",e),userInfoVm.showErr=!0,userInfoVm.message=e[0].message):(console.log("全部通过"),getAjaxData("/api/user/updateInfo",function(e){200==e.status&&layer.msg(e.message,{icon:1})},"post",{userName:userInfoVm.userName,email:userInfoVm.email,name:userInfoVm.name,phoneNum:userInfoVm.phoneNum,comments:userInfoVm.comments}))}}}),userNavVm=avalon.define({$id:"user-nav",currentPath:window.location.pathname,menu_body_2_show:function(){return 0<userNavVm.currentPath.indexOf("personInfo")||0<userNavVm.currentPath.indexOf("setUserPsd")},menu_body_1_show:function(){return 0<userNavVm.currentPath.indexOf("userContents")||0<userNavVm.currentPath.indexOf("joinComments")||0<userNavVm.currentPath.indexOf("notify")||0<userNavVm.currentPath.indexOf("userAddContent")}});