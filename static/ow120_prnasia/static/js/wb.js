(function(){function G(c){var d=c||F.load(),f=d.access_token||"",g=d.expires_in||"";f!=""&&(a=1);p({url:e,onComplete:function(c){WB2.console.log(c);c=c||{};if(c.status==1&&c.access_token){F.save(c);WB2._config.access_token=c.access_token;WB2._config.uid=c.uid}if(c.error){b=!1;WB2.console.warn(c.error);c.error=="xd2.jsp has not Referer!"&&WB2.console.warn("您使用的appkey未和域名进行绑定，请绑定后使用。")}else{a=c.status;x()}},args:{source:WB2._config.appkey}})}function E(){return a==1}function D(b){b!=null&&(a=b)}function C(a){if(!!WB2.checkLogin()&&WB2._config.appkey!=null){F.del();D(-1);WB2._config.access_token=null;delete WB2._config.access_token;try{p({url:"https://api.weibo.com/2/account/end_session.json?source="+WB2._config.appkey,onComplete:function(b){a&&a(b.data)}})}catch(b){throw"JavaScript SDK: logout error"}}}function B(a){if(!!b){x(a,!0);WB2.checkLogin()||(window.postMessage&&!m.IE?y({appkey:WB2._config.appkey}):v({appkey:WB2._config.appkey,requestType:"login",callback:A}))}}function A(a){WB2.console.log(a);D(a.status);if(a.success==1){F.save(a);x()}else c.pop()}function z(a){if(/\api.weibo\.com$/.test(a.origin)){var b=a.data;b=unescape(b);b=o(b);if(b.error_code){b.success=-1;b.status=-1}else{b.success=1;b.status=1}A(b)}}function y(a){var b=i.core.util.URL(g),c=600,d=455;b.setParam("client_id",a.appkey);b.setParam("response_type","token");b.setParam("display","js");b.setParam("transport","html5");b.setParam("referer",encodeURI(document.location.href));f=window.open(b,"oauth_login_window","width="+c+",height="+d+",toolbar=no,menubar=no,resizable=no,status=no,left="+(screen.width-c)/2+",top="+(screen.height-d)/2);f&&f.focus();return}function x(a,b){var d,e;a!=null&&(b==!0?c.unshift(a):c.push(a));if(WB2.checkLogin()){for(d=0,e=c.length;d<e;d++)c[d].call();c=[]}}function w(){var a=document.getElementsByTagName("script"),b=a.length,c=0,d,e,f,g,h;if(b>0){d=a[c++];while(d){if(d.src.indexOf("api/js/wb.js")!=-1){e=d.src.split("?").pop();break}d=a[c++]}}e=e.toLowerCase();var i=o(e);f=i.appkey||"";g=i.secret||"";debug=i.debug||!1;h=i.version||1;return{appkey:f,secret:g,debug:debug,version:h}}function v(a){var b=a||{},c=function(){t(b);s.next()},d=function(a){h.bundle?a&&a():q({url:WB2._config.host+"/open/api/js/api/bundle.js?version="+WB2._config.cdn_version,onComplete:function(){h.bundle=1;a&&a()}})};s.add(d,{args:[c]})}function u(a){var b={requestType:"anywhere",callback:a};v(b)}function t(a){var b=WB2._config.version,c=WB2.anyWhere._instances,d=c[b];d?d.contentWindow._ready?d.contentWindow.request(a):WB2.addToCallbacks(d.contentWindow,a):WB2.delayCall(a)}var STK=function(){var a={},b=[];a.inc=function(a,b){return!0};a.register=function(c,d){var e=c.split("."),f=a,g=null;while(g=e.shift())if(e.length){f[g]===undefined&&(f[g]={});f=f[g]}else if(f[g]===undefined)try{f[g]=d(a)}catch(h){b.push(h)}};a.regShort=function(b,c){if(a[b]!==undefined)throw"["+b+"] : short : has been register";a[b]=c};a.IE=/msie/i.test(navigator.userAgent);a.E=function(a){return typeof a=="string"?document.getElementById(a):a};a.C=function(a){var b;a=a.toUpperCase();a=="TEXT"?b=document.createTextNode(""):a=="BUFFER"?b=document.createDocumentFragment():b=document.createElement(a);return b};a.log=function(a){b.push("["+(new Date).getTime()%1e5+"]: "+a)};a.getErrorLogInformationList=function(a){return b.splice(0,a||b.length)};return a}();$Import=STK.inc;
STK.register("core.str.trim",function(a){return function(a){if(typeof a!="string")throw"trim need a string as parameter";var b=a.length,c=0,d=/(\u3000|\s|\t|\u00A0)/;while(c<b){if(!d.test(a.charAt(c)))break;c+=1}while(b>c){if(!d.test(a.charAt(b-1)))break;b-=1}return a.slice(c,b)}});
STK.register("core.evt.addEvent",function(a){return function(b,c,d){var e=a.E(b);if(e==null)return!1;c=c||"click";if((typeof d).toLowerCase()=="function"){e.addEventListener?e.addEventListener(c,d,!1):e.attachEvent?e.attachEvent("on"+c,d):e["on"+c]=d;return!0}}});
STK.register("core.obj.parseParam",function(a){return function(a,b,c){var d,e={};b=b||{};for(d in a){e[d]=a[d];b[d]!=null&&(c?a.hasOwnProperty[d]&&(e[d]=b[d]):e[d]=b[d])}return e}});
STK.register("core.arr.isArray",function(a){return function(a){return Object.prototype.toString.call(a)==="[object Array]"}});
STK.register("core.json.queryToJson",function(a){return function(b,c){var d=a.core.str.trim(b).split("&"),e={},f=function(a){return c?decodeURIComponent(a):a};for(var g=0,h=d.length;g<h;g++)if(d[g]){var i=d[g].split("="),j=i[0],k=i[1];if(i.length<2){k=j;j="$nullName"}if(!e[j])e[j]=f(k);else{a.core.arr.isArray(e[j])!=!0&&(e[j]=[e[j]]);e[j].push(f(k))}}return e}});
STK.register("core.obj.isEmpty",function(a){return function(a,b){var c=!0;for(var d in a){if(b){c=!1;break}if(a.hasOwnProperty(d)){c=!1;break}}return c}});
STK.register("core.util.cookie",function(a){var b={set:function(b,c,d){var e=[],f,g,h=a.core.obj.parseParam({expire:null,path:"/",domain:null,secure:null,encode:!0},d);h.encode==!0&&(c=escape(c));e.push(b+"="+c);h.path!=null&&e.push("path="+h.path);h.domain!=null&&e.push("domain="+h.domain);h.secure!=null&&e.push(h.secure);if(h.expire!=null){f=new Date;g=f.getTime()+h.expire*36e5;f.setTime(g);e.push("expires="+f.toGMTString())}document.cookie=e.join(";")},get:function(a){a=a.replace(/([\.\[\]\$])/g,"\\$1");var b=new RegExp(a+"=([^;]*)?;","i"),c=document.cookie+";",d=c.match(b);return d?d[1]||"":""},remove:function(a,c){c=c||{};c.expire=-10;b.set(a,"",c)}};return b});
STK.register("core.str.parseURL",function(a){return function(a){var b=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,c=["url","scheme","slash","host","port","path","query","hash"],d=b.exec(a),e={};for(var f=0,g=c.length;f<g;f+=1)e[c[f]]=d[f]||"";return e}});
STK.register("core.json.jsonToQuery",function(a){var b=function(b,c){b=b==null?"":b;b=a.core.str.trim(b.toString());return c?encodeURIComponent(b):b};return function(a,c){var d=[];if(typeof a=="object")for(var e in a){if(e==="$nullName"){d=d.concat(a[e]);continue}if(a[e]instanceof Array)for(var f=0,g=a[e].length;f<g;f++)d.push(e+"="+b(a[e][f],c));else typeof a[e]!="function"&&d.push(e+"="+b(a[e],c))}return d.length?d.join("&"):""}});
STK.register("core.util.URL",function(a){return function(b,c){var d=a.core.obj.parseParam({isEncodeQuery:!1,isEncodeHash:!1},c||{}),e={},f=a.core.str.parseURL(b),g=a.core.json.queryToJson(f.query),h=a.core.json.queryToJson(f.hash);e.setParam=function(a,b){g[a]=b;return this};e.getParam=function(a){return g[a]};e.setParams=function(a){for(var b in a)e.setParam(b,a[b]);return this};e.setHash=function(a,b){h[a]=b;return this};e.getHash=function(a){return h[a]};e.valueOf=e.toString=function(){var b=[],c=a.core.json.jsonToQuery(g,d.isEncodeQuery),e=a.core.json.jsonToQuery(h,d.isEncodeQuery);if(f.scheme!=""){b.push(f.scheme+":");b.push(f.slash)}if(f.host!=""){b.push(f.host);if(f.port!=""){b.push(":");b.push(f.port)}}b.push("/");b.push(f.path);c!=""&&b.push("?"+c);e!=""&&b.push("#"+e);return b.join("")};return e}});
STK.register("core.util.browser",function(a){var b=navigator.userAgent.toLowerCase(),c=window.external||"",d,e,f,g,h,i=function(a){var b=0;return parseFloat(a.replace(/\./g,function(){return b++==1?"":"."}))};try{/windows|win32/i.test(b)?h="windows":/macintosh/i.test(b)?h="macintosh":/rhino/i.test(b)&&(h="rhino");if((e=b.match(/applewebkit\/([^\s]*)/))&&e[1]){d="webkit";g=i(e[1])}else if((e=b.match(/presto\/([\d.]*)/))&&e[1]){d="presto";g=i(e[1])}else if(e=b.match(/msie\s([^;]*)/)){d="trident";g=1;(e=b.match(/trident\/([\d.]*)/))&&e[1]&&(g=i(e[1]))}else if(/gecko/.test(b)){d="gecko";g=1;(e=b.match(/rv:([\d.]*)/))&&e[1]&&(g=i(e[1]))}/world/.test(b)?f="world":/360se/.test(b)?f="360":/maxthon/.test(b)||typeof c.max_version=="number"?f="maxthon":/tencenttraveler\s([\d.]*)/.test(b)?f="tt":/se\s([\d.]*)/.test(b)&&(f="sogou")}catch(j){}var k={OS:h,CORE:d,Version:g,EXTRA:f?f:!1,IE:/msie/.test(b),OPERA:/opera/.test(b),MOZ:/gecko/.test(b)&&!/(compatible|webkit)/.test(b),IE5:/msie 5 /.test(b),IE55:/msie 5.5/.test(b),IE6:/msie 6/.test(b),IE7:/msie 7/.test(b),IE8:/msie 8/.test(b),IE9:/msie 9/.test(b),SAFARI:!/chrome\/([\d.]*)/.test(b)&&/\/([\d.]*) safari/.test(b),CHROME:/chrome\/([\d.]*)/.test(b),IPAD:/\(ipad/i.test(b),IPHONE:/\(iphone/i.test(b),ITOUCH:/\(itouch/i.test(b),MOBILE:/mobile/i.test(b)};return k});
STK.register("core.dom.isNode",function(a){return function(a){return a!=undefined&&Boolean(a.nodeName)&&Boolean(a.nodeType)}});
STK.register("core.util.hideContainer",function(a){var b,c=function(){if(!b){b=a.C("div");b.style.cssText="position:absolute;top:-9999px;left:-9999px;";document.getElementsByTagName("head")[0].appendChild(b)}},d={appendChild:function(d){if(a.core.dom.isNode(d)){c();b.appendChild(d)}},removeChild:function(c){a.core.dom.isNode(c)&&b&&b.removeChild(c)}};return d});
window.WB2=window.WB2||{};WB2._config=WB2._config||{};WB2._config.host="https://js.t.sinajs.cn";WB2._config.cssHost="https://img.t.sinajs.cn";WB2._config.cdn_version="20220715.01";
window.WB2=window.WB2||{};WB2.Module={loginButton:{versions:{"1.0":{js:"loginButton{ver}.js?version=20140327",css:"/t3/style/css/common/card.css?version=20140327"},latest:{js:"loginButton.js?version=20140327",css:"/t4/appstyle/widget/css/loginButton/loginButton.css"}}},followButton:{versions:{"1.0":{js:"followButton{ver}.js",css:"/t3/style/css/common/card.css?version=20140327"},latest:{js:"followButton.js?version=20140327",css:"/t4/appstyle/widget/css/followButton/followButtonSdk.css"}}},publish:{versions:{"1.0":{js:"publish{ver}.js?version=20170720",css:"/t3/style/css/thirdpart/rlsbox.css?version=20140327"},1.1:{js:"publish{ver}.js?version=20170720",css:"/t35/appstyle/opent/css/widgets/js_weibo_send/js_weibo_send.css"},latest:{js:"publish.js?version=20170720",css:"/t4/appstyle/widget/css/weiboPublish/weiboPublish.css"}}},hoverCard:{versions:{"1.0":{js:"hoverCard{ver}.js?version=20141124",css:"/t3/style/css/common/card.css?version=20140327"},latest:{js:"hoverCard.js?version=20141124",css:"/t4/appstyle/widget/css/weiboCard/weiboCard.css"}}},recommend:{versions:{"1.0":{js:"recommend{ver}.js"},latest:{js:"recommend.js",css:"/t3/style/css/thirdpart/interested.css"}}},selector:{versions:{"1.0":{js:"selector{ver}.js?version=20140327",css:"/t3/style/css/thirdpart/csuser.css"},latest:{js:"selector.js?version=20140327",css:"/t4/appstyle/widget/css/selector/selector.css?version=20150714"}}},shareRecommend:{versions:{"1.0":{js:"shareRecommend{ver}.js?version=20140327"},latest:{js:"shareRecommend.js?version=20140327",css:"/t4/appstyle/widget/css/weiboFamous/weiboFamous.css"}}},like:{versions:{"1.0":{js:"like{ver}.js?version=20140327"},latest:{js:"like.js?version=20140327",css:"/t4/appstyle/widget/css/praiseButton/praiseButton.css?version=20140327"}}},iframeWidget:{versions:{latest:{js:"iframeWidget.js?version=20220715"}}},invite:{versions:{"1.0":{js:"invite{ver}.js?version=20140327"},latest:{js:"invite.js?version=20140327",css:"https://img.t.sinajs.cn/t4/appstyle/V5_invite/css/module/frame/layer_frame.css"}}},quote:{versions:{"1.0":{js:"quote{ver}.js?version=20140327"},latest:{js:"quote.js?version=20140327"}}}};
STK.register("core.func.getType",function(a){return function(a){var b;return((b=typeof a)=="object"?a==null&&"null"||Object.prototype.toString.call(a).slice(8,-1):b).toLowerCase()}});
STK.register("core.dom.ready",function(a){var b=[],c=!1,d=a.core.func.getType,e=a.core.util.browser,f=a.core.evt.addEvent,g=function(){if(!c&&document.readyState==="complete")return!0;return c},h=function(){if(c!=!0){c=!0;for(var a=0,e=b.length;a<e;a++)if(d(b[a])==="function")try{b[a].call()}catch(f){}b=[]}},i=function(){if(g())h();else{try{document.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,25);return}h()}},j=function(){g()?h():setTimeout(arguments.callee,25)},k=function(){f(document,"DOMContentLoaded",h)},l=function(){f(window,"load",h)};if(!g()){a.IE&&window===window.top&&i();k();j();l()}return function(a){g()?d(a)==="function"&&a.call():b.push(a)}});
STK.register("conf.api.wbml",function(a){window.WB2=window.WB2||{};var b=function(a,b){var c;c=parent.document.createElement("script");c.charset="UTF-8";var d=/msie/i.test(navigator.userAgent);d?c.onreadystatechange=function(){if(c.readyState.toLowerCase()=="complete"||c.readyState.toLowerCase()=="loaded"){b();c.onreadystatechange=null}}:c.onload=function(){b();c.onload=null};c.src=a;parent.document.getElementsByTagName("head")[0].appendChild(c);return c},c={widgetCache:{},loadCss:function(a){css=document.createElement("link");css.href=a;css.type="text/css";css.rel="stylesheet";document.getElementsByTagName("head")[0].appendChild(css);c.widgetCache[a]=1},getWidgetFile:function(a,b){var c=window.WB2._config.host+"/open/api",d=window.WB2._config.cssHost,e=WB2.Module,f=e[a];if(!f)throw"Module "+a+" can not be found!";f=e[a].versions[b];f||(f=e[a].versions.latest);var g=f.js.replace("{ver}",b),h=(f.css!=null?f.css:e[a].versions.latest.css)||"",i=c+"/js/widget/"+a+"/"+g,j=h!=""?/^http:\/\/|https:\/\/|\/\//.test(h)?h:d+h:"";return{js:i,css:j}},loadWidget:function(a,b){var d=a.module,e=a.version,f=a.loadcss,g=this.getWidgetFile(d,e),h=function(){b&&b(g);queue.next()};c._init(g.js,h);!f||g.css&&!this.widgetCache[g.css]&&this.loadCss(g.css)},_init:function(a,d){c.widgetCache[a]?d&&d():b(a,function(){c.widgetCache[a]=1;d&&d()})}},d=function(){var a={load:function(a,b){var d=a.module||"",e,f=!0;if(d=="")throw"no availiable module found.";if(typeof b=="string")e=b||"latest";else if(typeof b=="object"){e=b.version||"latest";f=b.loadcss}var g={module:d,version:e,loadcss:f};d=="connectButton"&&(d="loginButton");c.loadWidget(g,function(b){try{WB2.widget[d].call(window,a.params)}catch(c){STK.common.log.monitor({from:"jssdk",url:b.js,param:a.params,title:d,error:c.toString()});throw c.toString()}});return this}},b=WB2.Module;for(var d in b)if(d&&b[d]){d=="loginButton"&&(a.connectButton=function(b){return function(c,d){a.load({module:b,params:c},d)}}(d));a[d]=function(b){return function(c,d){a.load({module:b,params:c},d)}}(d)}return a}();return function(){var b=a.core.util.browser,c=[{tagName:"login-button",widgetName:"loginButton"},{tagName:"publish",widgetName:"publish"},{tagName:"share-recommend",widgetName:"shareRecommend"},{tagName:"like",widgetName:"like"},{tagName:"follow-button",widgetName:"iframeWidget"},{tagName:"share-button",widgetName:"iframeWidget"},{tagName:"list",widgetName:"iframeWidget"},{tagName:"show",widgetName:"iframeWidget"},{tagName:"topic",widgetName:"iframeWidget"},{tagName:"comments",widgetName:"iframeWidget"},{tagName:"livestream",widgetName:"iframeWidget"},{tagName:"bulkfollow",widgetName:"iframeWidget"},{tagName:"hotlist",widgetName:"iframeWidget"},{tagName:"invite",widgetName:"invite"},{tagName:"quote",widgetName:"quote"}],e=function(a,c){c=c||"wb";var d=navigator.userAgent.toLowerCase(),e=c+":"+a;if(b.IE){try{var f=document.namespaces;if(f&&f[c])return document.getElementsByTagName(a).length==0?document.getElementsByTagName(e):document.getElementsByTagName(a)}catch(g){}return document.getElementsByTagName(e)}return b.MOZ?document.getElementsByTagNameNS(document.body.namespaceURI,e):document.getElementsByTagName(e)},f=function(a,b){var c=a.attributes,d={};for(var e=c.length-1;e>=0;e--){var f=c[e];f.specified&&(d[c[e].name]=c[e].value)}d.dom=a;d.tagName=b;return d},g=function(){var a=[];for(var b=0,g=c.length;b<g;b++){var h=c[b],i=h.tagName,j=h.widgetName,k=e(i);for(var l=0,m=k.length;l<m;l++){k[l].innerHTML='<span style="background:url(https://timg.sjs.sinajs.cn/t4/appstyle/widget/images/library/base/loading1.gif) no-repeat;height:18px;padding:0 0 2px 20px;">Loading...</span>';a.push({tag:i,widget:j,params:f(k[l],i)})}}var g=a.length;if(g>0)if(/weibo|ucbrowser/i.test(navigator.userAgent))for(var b=0,g=a.length;b<g;b++){var n=a[b];(function(a){setTimeout(function(){d[a.widget](a.params)},b*50)})(n)}else WB2.anyWhere(function(b){for(var c=0,d=a.length;c<d;c++){var e=a[c];(function(a){setTimeout(function(){b.widget[a.widget](a.params)},c*50)})(e)}})};(function(){try{document.namespaces&&!document.namespaces.item.wb&&document.namespaces.add("wb")}catch(a){}})();WB2.initCustomTag=g;a.core.dom.ready(function(){g()})}});
STK.register("core.json.jsonToStr",function(a){function j(a,b){var c,d,g,k,l=e,m,n=b[a];n&&typeof n=="object"&&typeof n.toJSON=="function"&&(n=n.toJSON(a));typeof h=="function"&&(n=h.call(b,a,n));switch(typeof n){case"string":return i(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";e+=f;m=[];if(Object.prototype.toString.apply(n)==="[object Array]"){k=n.length;for(c=0;c<k;c+=1)m[c]=j(c,n)||"null";g=m.length===0?"[]":e?"[\n"+e+m.join(",\n"+e)+"\n"+l+"]":"["+m.join(",")+"]";e=l;return g}if(h&&typeof h=="object"){k=h.length;for(c=0;c<k;c+=1){d=h[c];if(typeof d=="string"){g=j(d,n);g&&m.push(i(d)+(e?": ":":")+g)}}}else for(d in n)if(Object.hasOwnProperty.call(n,d)){g=j(d,n);g&&m.push(i(d)+(e?": ":":")+g)}g=m.length===0?"{}":e?"{\n"+e+m.join(",\n"+e)+"\n"+l+"}":"{"+m.join(",")+"}";e=l;return g}}function i(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=g[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(a){return a<10?"0"+a:a}if(typeof Date.prototype.toJSON!="function"){Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()}}var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,f,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;return function(a,b,c){var d;e="";f="";if(typeof c=="number")for(d=0;d<c;d+=1)f+=" ";else typeof c=="string"&&(f=c);h=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return j("",{"":a});throw new Error("JSON.stringify")}});
STK.register("common.util.date",function(){var a=function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours()%12==0?12:a.getHours()%12,"H+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()},d={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));/(E+)/.test(b)&&(b=b.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+d[a.getDay()+""]));for(var e in c)(new RegExp("("+e+")")).test(b)&&(b=b.replace(RegExp.$1,RegExp.$1.length==1?c[e]:("00"+c[e]).substr((""+c[e]).length)));return b};return function(b,c){b=b||new Date;c=c||"yyyy-MM-dd hh:mm:ss";return a(b,c)}});
STK.register("conf.api.log",function($){var isConsoleEnable=typeof window.console=="object"&&(typeof window.console.log=="function"||typeof window.console.log=="object"),panelId="weibo_jssdk_console_panel",minHeight=30,maxHeight=90,Icon={info:"#0088CC",warn:"#D2D128",error:"#F50A0A"},cPanel={init:function(){var pos="position:fixed;";$.core.util.browser.IE6&&(pos="position:absolute;");var title=$.C("h5");title.innerHTML='Sina Weibo JSSDK Console Panel<a href="http://jssdk.sinaapp.com/help.php" target="_blank" style="position:absolute;right:0;margin-right:5px;color:#0088CC;font-size:12px;font-weight:normal;">Help?</a>';title.style.cssText="margin: 8px;font-size:13px;border-bottom:1px solid #ccc;";var logDiv=$.C("div");logDiv.id=panelId+"_logdiv";logDiv.style.cssText="background:#000; color:#FFF; margin:5px; border:1px solid #ccc; height:150px; max-height:150px; overflow-x:hidden; overflow-y: auto; word-break:nowrap; padding:5px 5px;border-radius:5px;";var textArea=$.C("textarea");textArea.value='WB2.console.log("test");';textArea.style.cssText="line-height:20px;font-size:12px;width:380px;height:30px;overflow-y:auto;margin:3px;padding:5px; border-radius:5px;border:1px solid #ccc;";textArea.onfocus=function(){textArea.select()};textArea.ondblclick=function(){parseInt(textArea.style.height)<maxHeight?textArea.style.height=maxHeight+"px":textArea.style.height=minHeight+"px"};var clear=$.C("input");clear.type="button";clear.value="Clear";clear.style.cssText="width:60px;height: 30px;border:1px solid #ccc; padding:2px 15px;border-radius:5px 0 0 5px;";clear.onclick=function(){logDiv.innerHTML=""};var run=$.C("input");run.type="button";run.value="Run";run.style.cssText="width:60px;height: 30px;border:1px solid #ccc; border-right:0;border-left:0; padding:2px 15px;";run.onclick=function(){var val=textArea.value;val&&eval(val)};var close=$.C("input");close.type="button";close.value="Close";close.style.cssText="width:60px;height: 30px;border:1px solid #ccc; padding:2px 15px;border-radius:0 5px 5px 0;";close.onclick=function(){cPanel.hide()};var bar=$.C("p");bar.appendChild(clear);bar.appendChild(run);bar.appendChild(close);bar.style.cssText="margin:5px 3px;";var panel=document.createElement("div");panel.id=panelId;panel.style.cssText=pos+"z-index:9999;left:0;top:0;width:400px;background:#eee;padding:5px;border-radius:5px;border:1px solid #bbb;";panel.appendChild(title);panel.appendChild(logDiv);panel.appendChild(textArea);panel.appendChild(bar);cPanel.output=logDiv;cPanel.close=close;cPanel.panel=panel;document.body.appendChild(panel)},show:function(){$.E(panelId)||cPanel.init();cPanel.output=cPanel.output||$.E(panelId+"_logdiv");cPanel.panel&&(cPanel.panel.style.display="block")},hide:function(){cPanel.panel&&(cPanel.panel.style.display="none")},setLog:function(a,b){if(typeof a=="string"){var c=new Date,d=$.common.util.date(new Date),e="";switch(b){case"info":e=Icon.info;break;case"warn":e=Icon.warn;break;case"error":e=Icon.error}e="color:"+e;var f='<p style="line-height:18px;margin:0;padding:0;"><span style="font-size:12px;color:#2EBC2C;">'+d+'</span><span style="font-size:12px;font-family: Verdana;padding-left:5px;'+e+'">'+a;cPanel.output.innerHTML!=""&&(f=f+"\r\n"+cPanel.output.innerHTML);cPanel.output.innerHTML=f+"</span></p>";cPanel.output.scrollTop=0}},log:function(a,b){cPanel.show();var c="";typeof a=="object"||Object.prototype.toString.call(a)==="[object Array]"?typeof a.parent=="object"?c=a.toString():c=$.core.json.jsonToStr(a,null,"\t"):typeof a=="undefined"?c="undefined":c=a.toString();cPanel.setLog(c,b)}},debugLevel=["log","info","warn","error","dir"];return function(){function a(){for(var a=0,b=debugLevel.length;a<b;a++){var c=debugLevel[a];WB2.console[c]=function(a){return function(b){if(WB2._config.debug)if(isConsoleEnable)window.console[a](b);else try{cPanel.log(b,a)}catch(c){cPanel.log(c.message,a)}}}(c)}}window.WB2=window.WB2||{};window.WB2.console=window.WB2.console||{};window.WB2.console.init=function(){WB2._config.debug=!0;isConsoleEnable=!1};a();var b={"USE_X-UA-Compatible":function(){if(!!$.core.util.browser.IE11){var a=!1,b,c=document.getElementsByTagName("meta");if(c&&c.length>0)for(var d=0,e=c.length;d<e;d++)if(c[d].getAttribute("http-equiv")=="X-UA-Compatible"){b=c[d];c[d].getAttribute("content").indexOf("IE7")!=-1&&(a=!0);break}var f={output:!0,reason:"Use X-UA-Compatible Model In Current Page. "};return f}}};$.core.dom.ready(function(){for(var a in b){var c=b[a]();c&&c.output&&WB2.console.warn(c.reason)}})}});
var a,b=!0,c=[],d=2,e="https://api.weibo.com/"+d+"/oauth2/query",f,g="https://api.weibo.com/"+d+"/oauth2/authorize",h={},i=STK,j=i.core.obj.parseParam,k=i.core.evt.addEvent,l=i.core.str.trim,m=i.core.util.browser,n=i.core.util.cookie,o=i.core.json.queryToJson,p=function(a){var b={url:"",charset:"UTF-8",timeout:3e4,args:{},onComplete:null,onTimeout:null,responseName:null,varkey:"callback"},c=-1;b=j(b,a);var d=b.responseName||"STK_"+Math.floor(Math.random()*1e3)+(new Date).getTime().toString();b.args[b.varkey]=d;var e=b.onComplete,f=b.onTimeout;window[d]=function(a){if(c!=2&&e!=null){c=1;e(a)}};b.onComplete=null;b.onTimeout=function(){if(c!=1&&f!=null){c=2;f()}};return q(b)},q=function(a){var b,c,d={url:"",charset:"UTF-8",timeout:3e4,args:{},onComplete:null,onTimeout:null,uniqueID:null};d=j(d,a);if(d.url=="")throw"url is null";b=document.createElement("script");b.charset="UTF-8";var e=/msie/i.test(navigator.userAgent);d.onComplete!=null&&(e?b.onreadystatechange=function(){if(b.readyState.toLowerCase()=="complete"||b.readyState.toLowerCase()=="loaded"){clearTimeout(c);d.onComplete();b.onreadystatechange=null}}:b.onload=function(){clearTimeout(c);d.onComplete();b.onload=null});var f=function(a){if(a){var b=[];for(var c in a)b.push(c+"="+encodeURIComponent(l(a[c])));return b.length?b.join("&"):""}},g=f(d.args);d.url.indexOf("?")==-1?g!=""&&(g="?"+g):g!=""&&(g="&"+g);b.src=d.url+g;document.getElementsByTagName("head")[0].appendChild(b);d.timeout>0&&d.onTimeout!=null&&(c=setTimeout(function(){d.onTimeout()},d.timeout));return b},r=function(){this.started=1;this.taskList=[];this.setStatue=function(a){this.started=a};this.start=function(){this.setStatue(0);var a,b,c,d,e=this.taskList.shift(),b=e[0],c=e[1],d=e[2];b.apply(d,c)};this.next=function(){this.setStatue(1);this.taskList.length>0&&this.start()};this.add=function(a,b){var c={args:[],pointer:window,top:!1};c=j(c,b);c.top?this.taskList.unshift([a,c.args,c.pointer]):this.taskList.push([a,c.args,c.pointer]);this.started&&this.start()}},s=new r,F={load:function(){if(!i.core.obj.isEmpty(WB2.oauthData))return WB2.oauthData;var a=n.get("weibojs_"+WB2._config.appkey);a=unescape(a);var b=o(a);return b},save:function(b){WB2.oauthData=b;var c="access_token="+(b.access_token||"")+"&refresh_token="+(b.refresh_token||"")+"&expires_in="+(b.expires_in||0)+"&uid="+(b.uid||"")+"&status="+(b.status||a||-1);n.set("weibojs_"+WB2._config.appkey,c,{path:"/",domain:document.domain})},del:function(){WB2.oauthData={};n.remove("weibojs_"+WB2._config.appkey,{path:"/",domain:document.domain})}},H=function(c){if(c.access_token){a=1;b=!0;var d={status:a,access_token:c.access_token};c.uid&&(d.uid=c.uid);F.save(d)}};window.WB2=window.WB2||{};WB2.widget={};var I=w();WB2._config=WB2._config||{};WB2._config.version=I.version;WB2._config.appkey=I.appkey;WB2._config.secret=I.secret;WB2._config.debug=I.debug;WB2.oauthData={};WB2.init=H;WB2.login=B;WB2.logout=C;WB2.checkLogin=E;WB2.anyWhere=u;WB2.anyWhere._instances={};WB2.Cookie=F;WB2.regIframeRequest=v;i.conf.api.log();i.conf.api.wbml();WB2._config.appkey&&G();window.postMessage&&!m.IE&&i.core.evt.addEvent(window,"message",z)})();
