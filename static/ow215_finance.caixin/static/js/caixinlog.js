!function(window){function setCookie(e,t,o){var i=new Date,n=setCookie.arguments,a=setCookie.arguments.length;o||(o=15768e3);var r=a>3?n[3]:"/",c=a>4?n[4]:domainName,s=a>5&&n[5];null!=o&&(i.setTime(uexp),document.cookie=e+"="+escape(t)+("setnull"==o?"":"; expires="+i.toGMTString())+(null==r?"":"; path="+r)+(null==c?"":"; domain="+domainName)+(1==s?"; secure=":""))}function delCookie(e){var t=new Date;t.setTime(t.getTime()-1);var o=getCookie(e);document.cookie=e+"="+o+"; expires="+t.toGMTString()}function getCookie(e){var t,o=new RegExp("(^| )"+e+"=([^;]*)(;|$)");if(t=document.cookie.match(o))return unescape(t[2])}function getCookieValue(){var e=getCookie("GUID");return null!=e?e:"noCookie"}function addFnToGlobal(name){"function"!=typeof window[name]&&(window[name]=eval(name))}function getUrlParm(e){var t="[\\?&]"+e+"=([^&#]*)",o=new RegExp(t),i=location.href,n=o.exec(i);return null==n?"":n[1]}function stringReplaceAll(e,t){return raRegExp=new RegExp(e,"g"),this.replace(raRegExp,t)}function GetQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(t);return null!=o?unescape(o[2]):null}function GetResident(){var e=location.pathname,t=location.search;if(e=e.substr(e.lastIndexOf("/")+1),t=GetQueryString("CX_FROM"),e=e.lastIndexOf("_")>=0?e.substr(0,e.lastIndexOf("_")):e.substr(0,e.lastIndexOf(".")),""==t||void 0==t||null==t){var o="";document.referrer.length>0&&(o=document.referrer);try{0==o.length&&opener.location.href.length>0&&(o=opener.location.href)}catch(e){}o.indexOf("360.cn")>-1?t="360.cn":o.indexOf("sh.qihoo.com")>-1&&(t="sh.qihoo.com")}""==getCookie("CX_FROM")||void 0==getCookie("CX_FROM")||null==getCookie("CX_FROM")?(setCookie("ENTITY_ID",e),setCookie("ENTITY_COUNT",0),setCookie("CX_FROM",t)):getCookie("ENTITY_ID")==e?setCookie("ENTITY_COUNT",parseInt(getCookie("ENTITY_COUNT"))+1):(setCookie("ENTITY_ID",e),setCookie("ENTITY_COUNT",0),setCookie("CX_FROM",t)),"noCookie"==getCookieValue()?(setCookie("GUID",GUID),setCookie("T_GUID",pageOpen.getTime()),setCookie("GID30",GUID),setCookie("lastTime",pageOpen.getTime()),setCookie("firstTime",pageOpen.getTime()),setCookie("point",pointime)):1*getCookie("firstTime")+2592e6<pageOpen.getTime()?(setCookie("GUID",GUID),setCookie("T_GUID",pageOpen.getTime()),setCookie("GID30",GUID),setCookie("lastTime",pageOpen.getTime()),setCookie("firstTime",pageOpen.getTime()),setCookie("point",pointime)):1*getCookie("lastTime")+18e5>pageOpen.getTime()?(setCookie("lastTime",pageOpen.getTime()),setCookie("firstTime",pageOpen.getTime()),setCookie("point",pointime)):(setCookie("GID30",GUID),setCookie("lastTime",pageOpen.getTime()),setCookie("firstTime",pageOpen.getTime()),setCookie("point",pointime)),void 0===getCookie("T_GUID")&&setCookie("T_GUID",pageOpen.getTime())}function jsonToUrl(e,t){var o,i;"object"==typeof e?(o=e,i="https://apollo.caixin.com/count.gif"):"string"==typeof e&&(o=t,i=e);var n=[];for(var a in o)n.push(a+"="+encodeURIComponent(void 0===o[a]?"":o[a]));return n=n.join("&"),""===i?n:/\?/.test(i)?i+"&"+n:i+"?"+n}function getEntity(e){if("undefined"!=typeof entity&&entity[e])return entity[e]}function GetResidentTime(){var e=new Date;GetResident();try{var t=top.location.href}catch(e){var t=location.href}t.indexOf("#")>0&&(t=t.substring(0,t.indexOf("#")));var o=location.href;o.indexOf("#")>0&&(o=o.substring(0,o.indexOf("#"))),title.indexOf("#")>0&&(title=title.substring(0,title.indexOf("#")));var i="中国";getCookie("FROM_CHINA")&&(i="true"===getCookie("FROM_CHINA")?"中国":"海外");var n={GUID:getCookieValue("GUID"),GID30:getCookie("GID30"),TGUID:getCookie("T_GUID"),ENTITY_FROM:getCookie("CX_FROM"),ENTITY_COUNT:getCookie("ENTITY_COUNT"),cur:o.match(/[^\?]+/g)[0],title:title.replaceAll("'"," "),urr:document.referrer,email:getCookie("SA_USER_UID"),keyWord:getKeyword(gethn(document.referrer)),st:0,daye:e.getTime()+""+Math.round(2147483647*Math.random()),pageurl:t,id:getEntity("id"),channel:getEntity("channel"),category:getEntity("category"),tags:getEntity("tags"),tagNames:getEntity("tagNames"),type:getEntity("type"),rootId:getEntity("rootId"),location:i,originReferrer:getCookie("originReferrer")};"caixinglobal.com"==domainName&&(n.email=getCookie("CAIXINGLB_LOGIN_USID")),document.location.href.indexOf("cx_from")>0&&(n.CX_FROM=getUrlParm("cx_from")),getCookie("contract_id")&&getCookie("batch_id")&&(n.contract_id=getCookie("contract_id"),n.batch_id=getCookie("batch_id")),"undefined"!=typeof entity&&void 0!==entity.attr?n.extNum2=entity.attr:"undefined"!=typeof attr&&(n.extNum2=attr);var a=jsonToUrl("https://apollo.caixin.com/count.gif",n);if("boolean"!=typeof vjp||1!=vjp){var r=document.createElement("img");r.src=a,r.style.display="none",document.body.appendChild(r)}window.statisticsAuthNewLogUrl=a}function LoadVoid(){}function getKeyword(e){var t=getHostName(e);for(var o in keyMap)if(t.indexOf(o)>-1)return referrerData[keyMap[o]]||"";return""}function gethn(e){if(!e||""==e)return"";var t=e.match(/\?([^#]*)/);return t&&t[1].match(/[^\?=&]+=*[^&\?#]*/g).forEach(function(e){var t=e.split("=");referrerData[t[0]]=t[1]}),e.match(/[^\?#]+/)[0]}function getHostName(e){var t=e.match(/:\/\/([^\/]+)/);return t?t[1]:""}function $ajax(e){if(e=e||{},e.url){e.type=e.type||"GET";var t=e.data,o=new XMLHttpRequest;e.corsCookies&&(o.withCredentials=!0),o.open(e.type,e.url,!0),t&&("string"==typeof t?o.setRequestHeader("Content-type","application/x-www-form-urlencoded"):t instanceof FormData||"object"==typeof t&&(o.setRequestHeader("Content-type","application/json"),t=JSON.stringify(t))),o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){var t=JSON.parse(o.responseText);e.success&&e.success(t)}else e.error&&e.error()},o.send(t)}}function addCookie(e,t,o,i){var n=domainName,a=new Date;o&&0!==o?a.setDate(a.getDate()+o):a.setTime(uexp),document.cookie=e+"="+t+"; path=/; domain="+n+"; EXPIRES="+a.toGMTString()}var uexp=(new Date).getTime()+2592e6,domainName="caixin.com";document.domain.indexOf("caixinglobal.com")>-1&&(domainName="caixinglobal.com"),addFnToGlobal("setCookie"),addFnToGlobal("delCookie"),addFnToGlobal("getCookie"),addFnToGlobal("getCookieValue");var referrerData={},pageOpen=new Date,GUID=Math.round(2147483647*Math.random()),title=document.title,poin=new Date(pageOpen.getFullYear(),pageOpen.getMonth(),pageOpen.getDate(),23,59,59),pointime=poin.getTime(),Para_,brower=new Array,keyMap={about:"terms",alltheweb:"q",altavista:"q",aol:"query",ask:"q",baidu:"wd",caixin:"keyword",cnn:"query",earthlink:"q",excite:"qkw",gigablast:"q",google:"q","google.com":"q",looksmart:"key",lycos:"query",mamma:"query",msn:"q",netscape:"query",search:"q","search.live.com":"q",soso:"w",teoma:"q",virgilio:"qs",voila:"kw",yahoo:"p"};String.prototype.replaceAll=stringReplaceAll,GetResidentTime(),$ajax({url:"https://file.caixin.com/api/getlocation",type:"GET",success:function(e){e&&addCookie("FROM_CHINA",!!e.china,1)}});var cx_bc_id=getCookie("cx_bc_id"),cx_uid=getCookie("SA_USER_UID")||getCookie("CAIXINGLB_LOGIN_USID");if(cx_bc_id!=cx_uid||!getCookie("contract_id")&&!getCookie("batch_id")){var url="https://gateway.caixin.com/api/app-api/enterprise/findEnterpriseByParm",type="GET",data;"caixinglobal.com"==domainName&&(url="https://u.caixinglobal.com/group/findEnterprise"),$ajax({url:url,type:"GET",data:void 0,corsCookies:!0,success:function(e){if(0==e.code){var t=[],o=[];e.data.forEach(function(e){t.push(e.contract_id),o.push(e.batch_id)}),addCookie("cx_bc_id",cx_uid,1),addCookie("contract_id",t.join(","),1),addCookie("batch_id",o.join(","),1)}}})}window.GetResidentTime=GetResidentTime;var sourceDomain=["baidu.com","google.com","so.com","sogou.com","sm.cn","facebook.com","twitter.com","linkedin.com","bing.com","caixin.com","mailchi.mp","flipboard.com"],referrer=document.referrer,domainReg=/^https?:\/\/.*\.(\w+\.\w+)\//,domainArr=referrer.match(/^https?:\/\/.*\.(\w+\.\w+)\//);if(getUrlParm("originReferrer"))return void addCookie("originReferrer",getUrlParm("originReferrer"),1);referrer&&domainArr&&domainArr[1]!==domainName?sourceDomain.indexOf(domainArr[1])>-1&&addCookie("originReferrer",domainArr[1].split(".")[0],1):""===referrer||referrer&&domainArr&&domainArr[1],addCookie("BIS_CODE","",-1)}(window);