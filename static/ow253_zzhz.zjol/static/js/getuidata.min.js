!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("core-js/modules/es6.object.assign"),require("core-js/modules/es6.regexp.replace"),require("core-js/modules/es6.regexp.to-string"),require("core-js/modules/es6.object.to-string"),require("core-js/modules/es7.object.get-own-property-descriptors"),require("core-js/modules/es6.symbol"),require("core-js/modules/web.dom.iterable"),require("core-js/modules/es6.array.iterator"),require("core-js/modules/es6.object.keys"),require("core-js/modules/es6.regexp.split"),require("core-js/modules/es6.function.name"),require("core-js/modules/es6.number.constructor"),require("core-js/modules/es6.regexp.match")):"function"==typeof define&&define.amd?define(["core-js/modules/es6.object.assign","core-js/modules/es6.regexp.replace","core-js/modules/es6.regexp.to-string","core-js/modules/es6.object.to-string","core-js/modules/es7.object.get-own-property-descriptors","core-js/modules/es6.symbol","core-js/modules/web.dom.iterable","core-js/modules/es6.array.iterator","core-js/modules/es6.object.keys","core-js/modules/es6.regexp.split","core-js/modules/es6.function.name","core-js/modules/es6.number.constructor","core-js/modules/es6.regexp.match"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).GetuiData=t()}(this,(function(){"use strict";var e=function(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}((function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t}));var t=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},n=Array.prototype,r=Object.prototype,i={},o=r.hasOwnProperty,a=n.forEach,s=Array.isArray,c=n.slice,u={each:function(e,t,n){if(null==e)return!1;if(a&&e.forEach===a)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,s=e.length;r<s;r++)if(r in e&&t.call(n,e[r],r,e)===i)return!1}else for(var c in e)if(o.call(e,c)&&t.call(n,e[c],c,e)===i)return!1},extend:function(e){return this.each(c.call(arguments,1),(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])})),e},formatJsonString:function(e){try{return JSON.stringify(e,null,"  ")}catch(t){return JSON.stringify(e)}},getReferrer:function(e){return"string"!=typeof(e=e||document.referrer)?"取值异常_referrer异常_"+String(e):(0===e.indexOf("https://www.baidu.com/")&&(e=e.split("?")[0]),"string"==typeof e?e:"")},indexOf:function(e,t){var n=e.indexOf;if(n)return n.call(e,t);for(var r=0;r<e.length;r++)if(t===e[r])return r;return-1},isArray:s||function(e){return"[object Array]"===toString.call(e)},isBoolean:function(e){return"[object Boolean]"==toString.call(e)},isDate:function(e){return"[object Date]"==toString.call(e)},isFunction:function(e){if(!e)return!1;try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},isNumber:function(e){return"[object Number]"==toString.call(e)&&/[\d.]+/.test(String(e))},isObject:function(e){return null!=e&&"[object Object]"==toString.call(e)},isString:function(e){return"[object String]"==toString.call(e)},isSupportCors:function(){return void 0!==window.XMLHttpRequest&&("withCredentials"in new XMLHttpRequest||"undefined"!=typeof XDomainRequest)},safeJSONParse:function(e){var t=null;try{t=JSON.parse(e)}catch(e){return!1}return t},utf8Encode:function(e){var t,n,r,i,o="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<r;i++){var a=e.charCodeAt(i),s=null;a<128?n++:s=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),null!==s&&(n>t&&(o+=e.substring(t,n)),o+=s,t=n=i+1)}return n>t&&(o+=e.substring(t,e.length)),o},strip_sa_properties:function(e){var t=this;return this.isObject(e)?(this.each(e,(function(n,r){if(t.isArray(n)){var i=[];t.each(n,(function(e){this.isString(e)?i.push(e):console.log("您的数据-",r,n,"的数组里的值必须是字符串,已经将其删除")})),0!==i.length?e[r]=i:(delete e[r],console.log("已经删除空的数组"))}t.isString(n)||t.isNumber(n)||t.isDate(n)||t.isBoolean(n)||t.isArray(n)||(console.log("您的数据-",r,n,"-格式不满足要求，我们已经将其删除"),delete e[r])})),e):e}},l="-1",d=window,p=d.external,f=d.navigator.userAgent||"",h=d.navigator.appVersion||"",b=d.navigator.vendor||"",g=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,m=/\bbb10\b.+?\bversion\/([\d.]+)/,v=/\bblackberry\b.+\bversion\/([\d.]+)/,w=/\bblackberry\d+\/([\d.]+)/;function y(e){return Object.prototype.toString.call(e)}var _=[["nokia",function(e){return-1!==e.indexOf("nokia ")?/\bnokia ([0-9]+)?/:/\bnokia([a-z0-9]+)?/}],["samsung",function(e){return-1!==e.indexOf("samsung")?/\bsamsung(?:[ -](?:sgh|gt|sm))?-([a-z0-9]+)/:/\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/}],["wp",function(e){return-1!==e.indexOf("windows phone ")||-1!==e.indexOf("xblwp")||-1!==e.indexOf("zunewp")||-1!==e.indexOf("windows ce")}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["mi",/\bmi[ -]?([a-z0-9 ]+(?= build|\)))/],["hongmi",/\bhm[ -]?([a-z0-9]+)/],["aliyun",/\baliyunos\b(?:[-](\d+))?/],["meizu",function(e){return e.indexOf("meizu")>=0?/\bmeizu[/ ]([a-z0-9]+)\b/:/\bm([0-9cx]{1,4})\b/}],["nexus",/\bnexus ([0-9s.]+)/],["huawei",function(e){var t=/\bmediapad (.+?)(?= build\/huaweimediapad\b)/;return-1!==e.indexOf("huawei-huawei")?/\bhuawei-huawei-([a-z0-9-]+)/:t.test(e)?t:/\bhuawei[ _-]?([a-z0-9]+)/}],["lenovo",function(e){return-1!==e.indexOf("lenovo-lenovo")?/\blenovo-lenovo[ -]([a-z0-9]+)/:/\blenovo[ -]?([a-z0-9]+)/}],["zte",function(e){return/\bzte-[tu]/.test(e)?/\bzte-[tu][ _-]?([a-su-z0-9+]+)/:/\bzte[ _-]?([a-su-z0-9+]+)/}],["vivo",/\bvivo(?: ([a-z0-9]+))?/],["htc",function(e){return/\bhtc[a-z0-9 _-]+(?= build\b)/.test(e)?/\bhtc[ _-]?([a-z0-9 ]+(?= build))/:/\bhtc[ _-]?([a-z0-9 ]+)/}],["oppo",/\boppo[_]([a-z0-9]+)/],["konka",/\bkonka[_-]([a-z0-9]+)/],["sonyericsson",/\bmt([a-z0-9]+)/],["coolpad",/\bcoolpad[_ ]?([a-z0-9]+)/],["lg",/\blg[-]([a-z0-9]+)/],["android",/\bandroid\b|\badr\b/],["blackberry",function(e){return e.indexOf("blackberry")>=0?/\bblackberry\s?(\d+)/:"bb10"}]],S=[["wp",function(e){return-1!==e.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==e.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==e.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["iPhone OS",function(e){return/\bcpu(?: iphone)? os /.test(e)?/\bcpu(?: iphone)? os ([0-9._]+)/:-1!==e.indexOf("iph os ")?/\biph os ([0-9_]+)/:/\bios\b/}],["yunos",/\baliyunos ([0-9.]+)/],["Android",function(e){return e.indexOf("android")>=0?/\bandroid[ /-]?([0-9.x]+)?/:e.indexOf("adr")>=0?e.indexOf("mqqbrowser")>=0?/\badr[ ]\(linux u ([0-9.]+)?/:/\badr(?:[ ]([0-9.]+))?/:"android"}],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbian(?:os)?\/([0-9.]+)/],["blackberry",function(e){var t=e.match(m)||e.match(v)||e.match(w);return t?{version:t[1]}:"blackberry"}]];function x(e){if(p)try{var t=p.twGetRunPath.toLowerCase(),n=p.twGetSecurityID(d),r=p.twGetVersion(n);if(t&&-1===t.indexOf(e))return!1;if(r)return{version:r}}catch(e){}}var O=[["edgehtml",/edge\/([0-9.]+)/],["trident",g],["blink",function(){return"chrome"in d&&"CSS"in d&&/\bapplewebkit[/]?([0-9.+]+)/}],["webkit",/\bapplewebkit[/]?([0-9.+]+)/],["gecko",function(e){var t;if(t=e.match(/\brv:([\d\w.]+).*\bgecko\/(\d+)/))return{version:t[1]+"."+t[2]}}],["presto",/\bpresto\/([0-9.]+)/],["androidwebkit",/\bandroidwebkit\/([0-9.]+)/],["coolpadwebkit",/\bcoolpadwebkit\/([0-9.]+)/],["u2",/\bu2\/([0-9.]+)/],["u3",/\bu3\/([0-9.]+)/]],j=[["edge",/edge\/([0-9.]+)/],["sogou",function(e){return e.indexOf("sogoumobilebrowser")>=0?/sogoumobilebrowser\/([0-9.]+)/:e.indexOf("sogoumse")>=0||/ se ([0-9.x]+)/}],["theworld",function(){var e=x("theworld");return void 0!==e?e:"theworld"}],["360",function(e){var t=x("360se");return void 0!==t?t:-1!==e.indexOf("360 aphone browser")?/\b360 aphone browser \(([^)]+)\)/:/\b360(?:se|ee|chrome|browser)\b/}],["maxthon",function(){try{if(p&&(p.mxVersion||p.max_version))return{version:p.mxVersion||p.max_version}}catch(e){}return/\b(?:maxthon|mxbrowser)(?:[ /]([0-9.]+))?/}],["micromessenger",/\bmicromessenger\/([\d.]+)/],["qq",/\bm?qqbrowser\/([0-9.]+)/],["green","greenbrowser"],["tt",/\btencenttraveler ([0-9.]+)/],["liebao",function(e){if(e.indexOf("liebaofast")>=0)return/\bliebaofast\/([0-9.]+)/;if(-1===e.indexOf("lbbrowser"))return!1;var t;try{p&&p.LiebaoGetVersion&&(t=p.LiebaoGetVersion())}catch(e){}return{version:t||l}}],["tao",/\btaobrowser\/([0-9.]+)/],["coolnovo",/\bcoolnovo\/([0-9.]+)/],["saayaa","saayaa"],["baidu",/\b(?:ba?idubrowser|baiduhd)[ /]([0-9.x]+)/],["ie",g],["mi",/\bmiuibrowser\/([0-9.]+)/],["opera",function(e){var t=/\bopera.+version\/([0-9.ab]+)/;return t.test(e)?t:/\bopr\/([0-9.]+)/}],["oupeng",/\boupeng\/([0-9.]+)/],["yandex",/yabrowser\/([0-9.]+)/],["ali-ap",function(e){return e.indexOf("aliapp")>0?/\baliapp\(ap\/([0-9.]+)\)/:/\balipayclient\/([0-9.]+)\b/}],["ali-ap-pd",/\baliapp\(ap-pd\/([0-9.]+)\)/],["ali-am",/\baliapp\(am\/([0-9.]+)\)/],["ali-tb",/\baliapp\(tb\/([0-9.]+)\)/],["ali-tb-pd",/\baliapp\(tb-pd\/([0-9.]+)\)/],["ali-tm",/\baliapp\(tm\/([0-9.]+)\)/],["ali-tm-pd",/\baliapp\(tm-pd\/([0-9.]+)\)/],["uc",function(e){return e.indexOf("ucbrowser/")>=0?/\bucbrowser\/([0-9.]+)/:e.indexOf("ubrowser/")>=0?/\bubrowser\/([0-9.]+)/:/\buc\/[0-9]/.test(e)?/\buc\/([0-9.]+)/:e.indexOf("ucweb")>=0?/\bucweb([0-9.]+)?/:/\b(?:ucbrowser|uc)\b/}],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["android",function(e){if(-1!==e.indexOf("android"))return/\bversion\/([0-9.]+(?: beta)?)/}],["blackberry",function(e){var t=e.match(m)||e.match(v)||e.match(w);return t?{version:t[1]}:"blackberry"}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["webview",/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/],["firefox",/\bfirefox\/([0-9.ab]+)/],["nokia",/\bnokiabrowser\/([0-9.]+)/]];function k(e,t,n){var r="[object Function]"===y(t)?t.call(null,n):t;if(!r)return null;var i={name:e,version:l,codename:""},o=y(r);if(!0===r)return i;if("[object String]"===o){if(-1!==n.indexOf(r))return i}else{if(function(e){return"[object Object]"===y(e)}(r))return Object.prototype.hasOwnProperty.call(r,"version")&&(i.version=r.version),i;if(r.exec){var a=r.exec(n);if(a)return a.length>=2&&a[1]?i.version=a[1].replace(/_/g,"."):i.version=l,i}}}var P={name:"na",version:l};function I(e,t,n,r){var i=P;!function(e,t){for(var n=0,r=e.length;n<r&&!1!==t.call(e,e[n],n);n++);}(t,(function(t){var n=k(t[0],t[1],e);if(n)return i=n,!1})),n.call(r,i.name,i.version)}var D=function(e){e=(e||"").toLowerCase();var t={};I(e,_,(function(e,n){var r=parseFloat(n);t.device={name:e,version:r,fullVersion:n},t.device[e]=r}),t),I(e,S,(function(e,n){var r=parseFloat(n);t.os={name:e,version:r,fullVersion:n},t.os[e]=r}),t);var n=function(e){if(!g.test(e))return null;var t,n,r,i,o;if(-1!==e.indexOf("trident/")&&(t=/\btrident\/([0-9.]+)/.exec(e))&&t.length>=2){r=t[1];var a=t[1].split(".");a[0]=parseInt(a[0],10)+4,o=a.join(".")}i=(t=g.exec(e))[1];var s=t[1].split(".");return void 0===o&&(o=i),s[0]=parseInt(s[0],10)-4,n=s.join("."),void 0===r&&(r=n),{browserVersion:o,browserMode:i,engineVersion:r,engineMode:n,compatible:r!==n}}(e);return I(e,O,(function(e,r){var i=r;n&&(r=n.engineVersion||n.engineMode,i=n.engineMode);var o=parseFloat(r);t.engine={name:e,version:o,fullVersion:r,mode:parseFloat(i),fullMode:i,compatible:!!n&&n.compatible},t.engine[e]=o}),t),I(e,j,(function(e,r){var i=r;n&&("ie"===e&&(r=n.browserVersion),i=n.browserMode);var o=parseFloat(r);t.browser={name:e,version:o,fullVersion:r,mode:parseFloat(i),fullMode:i,compatible:!!n&&n.compatible},t.browser[e]=o}),t),t}(f+" "+h+" "+b),q={};q.para_default={preset_properties:{$url:window.location.href,$url_path:window.location.pathname,$title:document.title,$referrer:document.referrer,$screen_height:Number(screen.height)||0,$screen_width:Number(screen.width)||0,$is_new_user:"0",$os:D.os.name,$model:D.device.name,$os_version:String(D.os.version),$browser:D.browser.name,$browser_version:String(D.browser.version)}},q.para={page_enter_or_out_Flag:"",lib:{lib:"js",lib_method:"code",lib_version:"1.0.0"},batch_send:!1,datasend_timeout:3e3,send_type:"image",show_log:!1,server_url:"http://192.168.26.73:8089/iop-ps/sdk/data.gif",is_track_single_page:!0,is_pageview_trigger_batch:!0},q.store={_newsArticleInfo:{},_state:{distinct_id:"",session_id:""},getDistinctId:function(){return this._state.distinct_id},getSessionId:function(){return this._state.session_id}};var C={ajax:function(t){function n(e){if(!e)return"";try{return JSON.parse(e)}catch(e){return{}}}t.timeout=t.timeout||2e4,t.credentials=void 0===t.credentials||t.credentials;var r=this.xhr(t.cors);if(!r)return!1;t.type||(t.type=t.data?"POST":"GET"),t=this.extend({success:function(){},error:function(){}},t);try{"object"===e(r)&&"timeout"in r?r.timeout=t.timeout:setTimeout((function(){r.abort()}),t.timeout+500)}catch(e){try{setTimeout((function(){r.abort()}),t.timeout+500)}catch(e){q.log(e)}}r.onreadystatechange=function(){try{4==r.readyState&&(r.status>=200&&r.status<300||304==r.status?t.success(n(r.responseText)):t.error(n(r.responseText),r.status),r.onreadystatechange=null,r.onload=null)}catch(e){r.onreadystatechange=null,r.onload=null}},r.open(t.type,t.url,!0);try{if(t.credentials&&(r.withCredentials=!0),this.isObject(t.header))for(var i in t.header)r.setRequestHeader(i,t.header[i]);t.data&&(t.cors||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),"application/json"===t.contentType?r.setRequestHeader("Content-type","application/json; charset=UTF-8"):r.setRequestHeader("Content-type","application/x-www-form-urlencoded"))}catch(e){q.log(e)}r.send(t.data||null)},autoExeQueue:function(){return{items:[],enqueue:function(e){this.items.push(e),this.start()},dequeue:function(){return this.items.shift()},getCurrentItem:function(){return this.items[0]},isRun:!1,start:function(){this.items.length>0&&!this.isRun&&(this.isRun=!0,this.getCurrentItem().start())},close:function(){this.dequeue(),this.isRun=!1,this.start()}}},base64Encode:function(e){if("function"==typeof btoa)return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})));var t,n,r,i,o,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,c=0,u="",l=[];if(!(e=String(e)))return e;e=this.utf8Encode(e);do{t=(o=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>18&63,n=o>>12&63,r=o>>6&63,i=63&o,l[c++]=a.charAt(t)+a.charAt(n)+a.charAt(r)+a.charAt(i)}while(s<e.length);switch(u=l.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u},getUUID:function(){var e=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},t=String(screen.height*screen.width);t=t&&/\d{5,}/.test(t)?t.toString(16):String(31242*Math.random()).replace(".","").slice(0,8);var n=e().slice(-4)+"-"+Math.random().toString(16).replace(".","").substr(0,6)+"-"+function(){var e,t,n=navigator.userAgent,r=[],i=0;function o(e,t){var n,i=0;for(n=0;n<t.length;n++)i|=r[n]<<8*n;return e^i}for(e=0;e<n.length;e++)t=n.charCodeAt(e),r.unshift(255&t),r.length>=4&&(i=o(i,r),r=[]);return r.length>0&&(i=o(i,r)),i.toString(16)}()+"-"+t.slice(-6)+"-"+e().slice(0,4);return n||(String(Math.random())+String(Math.random())+String(Math.random())).slice(2,15)},xhr:function(e){if(e)return void 0!==window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?new XMLHttpRequest:"undefined"!=typeof XDomainRequest?new window.XDomainRequest:null;if(void 0!==window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){q.log(e)}}}},E={};function $(e){return e&&(e.preventDefault=$.preventDefault,e.stopPropagation=$.stopPropagation,e._getPath=$._getPath),e}$._getPath=function(){var e=this;return this.path||this.composedPath&&this.composedPath()||function(){try{var t=e.target,n=[t];if(null===t||null===t.parentElement)return[];for(;null!==t.parentElement;)t=t.parentElement,n.unshift(t);return n}catch(e){return[]}}()},$.preventDefault=function(){this.returnValue=!1},$.stopPropagation=function(){this.cancelBubble=!0},E.addEvent=function(){var e=function(e,n,r){if(e&&e.addEventListener)e.addEventListener(n,(function(e){e._getPath=$._getPath,r.call(this,e)}));else{var i="on"+n,o=e[i];e[i]=t(e,r,o)}};function t(e,t,n){return function(r){if(r=r||$(window.event)){r.target=r.srcElement;var i,o,a=!0;return"function"==typeof n&&(i=n(r)),o=t.call(e,r),!1!==i&&!1!==o||(a=!1),a}}}e.apply(null,arguments)};var z={EventListener:E},A={sessionStorage:{isSupport:function(){var e=!0,t="GD_TRACKING_SUPPORT",n="testIsSupportStorage";try{sessionStorage&&sessionStorage.setItem?(sessionStorage.setItem(t,n),sessionStorage.removeItem(t,n),e=!0):e=!1}catch(t){e=!1}return e}},localStorage:{get:function(e){return window.localStorage.getItem(e)},parse:function(e){var t;try{t=JSON.parse(this.get(e))||null}catch(e){q.log(e)}return t},set:function(e,t){window.localStorage.setItem(e,t)},remove:function(e){window.localStorage.removeItem(e)},isSupport:function(){var e=!0;try{var t="GD_TRACKING_SUPPORT",n="testIsSupportStorage";this.set(t,n),this.get(t)!==n&&(e=!1),this.remove(t)}catch(t){e=!1}return e}}};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?R(Object(r),!0).forEach((function(n){t(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M=T(T(T(T({},u),C),z),A);var N=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),e},V="GD_TRACKING_JS_SDK-",J=function(){function e(){N(this,e),this.sendingData=0}return L(e,[{key:"add",value:function(e){M.isObject(e)&&(this.writeStore(e),"$PageView"===e.event&&q.para.is_pageview_trigger_batch&&this.sendStrategy())}},{key:"remove",value:function(e){this.sendingData>0&&--this.sendingData,M.isArray(e)&&e.length>0&&M.each(e,(function(e){M.localStorage.remove(e)}))}},{key:"send",value:function(e){var t=this,n=M.isArray(q.para.server_url)?q.para.server_url[0]:q.para.server_url;M.ajax({url:n,type:"POST",data:"list="+encodeURIComponent(M.base64Encode(JSON.stringify(e.vals))),credentials:!1,timeout:q.para.batch_send.datasend_timeout,cors:!0,success:function(n){n&&0===n.errno?t.remove(e.keys):t.sendingData>0&&--t.sendingData},error:function(){t.sendingData>0&&--t.sendingData}})}},{key:"sendPrepare",value:function(e){var t=e.vals,n=q.para.batch_send.one_send_max_length,r=t.length;if(r>0)if(r<=n)this.send({keys:e.keys,vals:t});else for(var i=0;i*n<r;i++)this.send({keys:e.keys.splice(0,n),vals:t.splice(0,n)})}},{key:"sendStrategy",value:function(){var e=this.readStore();e.keys.length>0&&0===this.sendingData&&(this.sendingData=Math.ceil(e.vals.length/q.para.batch_send.one_send_max_length),this.sendPrepare(e))}},{key:"batchInterval",value:function(){var e=this;setInterval((function(){e.sendStrategy()}),q.para.batch_send.send_interval)}},{key:"readStore",value:function(){for(var e=[],t=[],n=null,r=localStorage.length,i=0;i<r;i++){var o=localStorage.key(i);0===o.indexOf(V)&&((n=localStorage.getItem(o))?(n=M.safeJSONParse(n))&&M.isObject(n)?(e.push(o),t.push(n)):(localStorage.removeItem(o),q.log("localStorage-数据parse异常"+n)):(localStorage.removeItem(o),q.log("localStorage-数据取值异常"+n)))}return{keys:e,vals:t}}},{key:"writeStore",value:function(e){var t=String(Math.random()).slice(2,5)+String(Math.random()).slice(2,5)+String((new Date).getTime()).slice(3);localStorage.setItem(V+t,JSON.stringify(e))}}]),e}(),U={getSendUrl:function(e){var t=q.para.server_url,n=M.base64Encode(e);return-1!==t.indexOf("?")?t+"&data="+encodeURIComponent(n):t+"?data="+encodeURIComponent(n)},getSendData:function(e){var t=M.base64Encode(e);return"data="+encodeURIComponent(t)},getInstance:function(e){var t=new(this[this.getSendType()])(e),n=t.start;return t.start=function(){n.apply(this,arguments)},t.end=function(){this.callback&&this.callback();this.lastClear&&this.lastClear()},t.isEnd=function(){this.received||(this.received=!0,this.end(),this.close())},t},getSendType:function(){var e="image";return"beacon"===(e=q.para.send_type)&&"function"!=typeof navigator.sendBeacon&&(e="image"),"ajax"===e&&!1===M.isSupportCors()&&(e="image"),e},image:function(e){this.callback=e.callback,this.img=document.createElement("img"),this.img.width=1,this.img.height=1,q.para.img_use_crossorigin&&(this.img.crossOrigin="anonymous"),this.data=e.data,this.server_url=U.getSendUrl(e.data)}};U.image.prototype.start=function(){var e=this;this.img.onload=function(){this.onload=null,this.onerror=null,this.onabort=null,e.isEnd()},this.img.onerror=function(){this.onload=null,this.onerror=null,this.onabort=null,e.isEnd()},this.img.onabort=function(){this.onload=null,this.onerror=null,this.onabort=null,e.isEnd()},this.img.src=this.server_url},U.image.prototype.lastClear=function(){this.img.src=""},U.ajax=function(e){this.callback=e.callback,this.server_url=q.para.server_url,this.data=U.getSendData(e.data)},U.ajax.prototype.start=function(){var e=this;M.ajax({url:this.server_url,type:"POST",data:this.data,credentials:!1,timeout:q.para.datasend_timeout,cors:!0,success:function(){e.isEnd()},error:function(){e.isEnd()}})},U.beacon=function(e){this.callback=e.callback,this.server_url=q.para.server_url,this.data=U.getSendData(e.data)},U.beacon.prototype.start=function(){var t=this;"object"===("undefined"==typeof navigator?"undefined":e(navigator))&&"function"==typeof navigator.sendBeacon&&navigator.sendBeacon(this.server_url,this.data),setTimeout((function(){t.isEnd()}),40)};var X={};X.queue=M.autoExeQueue(),X.getSendCall=function(e,t){if(q.para.batch_send&&localStorage.length<200)return q.log(e),q.batchSend.add(e),!1;this.sendCall(e,t),q.log(e)},X.sendCall=function(e,t){this.pushSend({data:JSON.stringify(e),callback:t})},X.pushSend=function(e){var t=U.getInstance(e),n=this;t.close=function(){n.queue.close()},this.queue.enqueue(t)};var H={};H.send=function(e,t){var n={appId:q.para.appId,distinct_id:q.store.getDistinctId(),session_id:q.store.getSessionId(),lib:q.para.lib,properties:{},time:1*new Date};M.extend(n,e),M.extend(n.properties,q.para.preset_properties),X.getSendCall(n,t)},H.checkOption={regChecks:{regName:/^((?!^distinct_id$|^original_id$|^time$|^properties$|^id$|^first_id$|^second_id$|^users$|^events$|^eventId$|^user_id$|^date$|^datetime$)[a-zA-Z_$][a-zA-Z\d_$]{0,99})$/i},checkPropertiesKey:function(e){var t=this,n=!0;return M.each(e,(function(e,r){t.regChecks.regName.test(r)||(n=!1)})),n},check:function(e,t){return this[e](t)},properties:function(e){return!e||(M.isObject(e)?!!this.checkPropertiesKey(e)||(console.log("properties里的key必须是由字符串数字_组成，且不能是系统保留字"),!1):(console.log("properties可以没有，但有的话必须是对象"),!1))},eventId:function(e){return!(!M.isString(e)||!this.regChecks.regName.test(e))||(console.log("请检查参数格式,eventId要是一个合法的变量名，由大小写字母、数字、下划线和$组成，并且首字符不能是数字。"),!1)},distinct_id:function(e){return!(!M.isString(e)||!/^.{1,255}$/.test(e))||(console.log("distinct_id必须是不能为空，且小于255位的字符串"),!1)}},H.check=function(e){for(var t in e)if(!this.checkOption.check(t,e[t]))return!1;return!0};var F={addHashEvent:function(e){var t="pushState"in window.history?"popstate":"hashchange";M.EventListener.addEvent(window,t,e)},addSinglePageEvent:function(e){var t=location.href,n=window.history.pushState,r=window.history.replaceState;window.history.pushState=function(){n.apply(window.history,arguments),e(t,JSON.parse(JSON.stringify(q._para))),t=location.href},window.history.replaceState=function(){r.apply(window.history,arguments),e(t,JSON.parse(JSON.stringify(q._para))),t=location.href};var i=n?"popstate":"hashchange";M.EventListener.addEvent(window,i,(function(){e(t,JSON.parse(JSON.stringify(q._para))),t=location.href}))},addUnloadEvent:function(e){M.EventListener.addEvent(window,"unload",(function(){e()}))}},B={trackSinglePage:function(e){e&&F.addSinglePageEvent((function(e,t){var n=(new Date).getTime(),r=n-q._time;e!==location.href&&(q.track("$PageStay",M.extend(t,{$page_stay_time:r})),q.para.preset_properties=M.extend(q.para.preset_properties,{$url:location.href,$url_path:location.pathname,$title:document.title,$referrer:e}),q.track("$PageView",q.para.preset_properties),q._time=n,q._para=q.para.preset_properties)}))},trackClosePage:function(){F.addUnloadEvent((function(){var e=(new Date).getTime()-q._time,t=M.extend(q._para,{$page_stay_time:e});q.track("$PageStay",t)}))}};return q.batchSend=new J,q.track=function(e,t,n,r){H.check({eventId:e,properties:t})&&H.send({type:"track",eventId:e,eventName:r,properties:t},n)},q.init=function(e){if(this.initVariable(),!1!==this.initParams(e)){this.initBatchSend(),this.initDistincId(),this.initSession(),this.detectMode();var t=this.para.preset_properties;this._para=t}},q.detectMode=function(){setTimeout((function(){q._q&&M.isArray(q._q)&&q._q.length>0&&M.each(q._q,(function(e){q[e[0]].apply(q,Array.prototype.slice.call(e[1]))}))}),1e3)},q.initVariable=function(){q._time=q._time||(new Date).getTime()},q.initParams=function(t){if(!(t=t||q.customPara||{}).appId)return"object"===("undefined"==typeof console?"undefined":e(console))&&console.log&&console.log("请上传appId，否则无法进行埋点上报，上传后刷新页面重试～"),!1;q.para=M.extend({},q.para,t),q.para.preset_properties=M.extend({},q.para_default.preset_properties,t.preset_properties)},q.initBatchSend=function(){q.para.batch_send=!1},q.initDistincId=function(){var e=M.localStorage.isSupport()&&localStorage.getItem("getuidata_jssdk_distinct_id");if(q.para.distinct_id)return q.store._state.distinct_id=q.para.distinct_id,void(e!==q.para.distinct_id&&(q.para.preset_properties.$is_new_user="1",M.localStorage.isSupport()&&localStorage.setItem("getuidata_jssdk_distinct_id",q.store.getDistinctId())));e?q.store._state.distinct_id=e:(q.store._state.distinct_id=M.getUUID(),q.para.preset_properties.$is_new_user="1",M.localStorage.isSupport()&&localStorage.setItem("getuidata_jssdk_distinct_id",q.store.getDistinctId()))},q.initSession=function(){var e=M.sessionStorage.isSupport()&&sessionStorage.getItem("getuidata_jssdk_session_id");e?this.store._state.session_id=e:(this.store._state.session_id=M.getUUID().slice(0,18)+"-"+(new Date).getTime().toString(16).slice(-8)+"-"+String(Math.random()).replace(".","").slice(0,4),M.sessionStorage.isSupport()&&sessionStorage.setItem("getuidata_jssdk_session_id",q.store.getSessionId()))},q.log=function(){if(q.para.show_log&&(arguments[0]=M.formatJsonString(arguments[0]),"object"===("undefined"==typeof console?"undefined":e(console))&&console.log))try{return console.log.apply(console,arguments)}catch(e){console.log(arguments[0])}},q.registerPage=function(){},q.setProfile=function(){},q.autoTrack=function(){B.trackSinglePage(q.para.is_track_single_page),B.trackClosePage(),this.para.batch_send?this.batchSend.batchInterval():q.track("$PageView",q.para.preset_properties)},q.setPreConfig=function(e){q.customPara=e.customPara,q._q=e._q},"string"==typeof window.GetuiData?(q.setPreConfig(window[window.GetuiData]),window[window.GetuiData]=q,window.GetuiData=q,q.init()):void 0===window.GetuiData?window.GetuiData=q:Object.assign(q,window.GetuiData),q}));
