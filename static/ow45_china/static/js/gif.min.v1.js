$(function(){$('img[is_gif]').each(function(i){var _this=$(this),_imgurl=_this.attr('src'),_mtop=parseInt(_this.css('marginTop')),_mbottom=parseInt(_this.css('marginBottom')),_ptop=parseInt(_this.css('paddingTop')),_pbottom=parseInt(_this.css('paddingBottom')),_cdiv=$('<span class="imgisgif"></span>'),_parent=_this.parent();if(i==0)_parent.append('<style>.imgisgif{display:inline-block;position:relative;cursor:pointer;text-indent:0;}.imgisgif img{vertical-align:top;padding:0 !important;margin:0 !important;}.imgisgif:after{content:"GIF";position:absolute;bottom:0;right:0;width:40px;height:20px;border-radius:2px;text-align:center;background-color:#00a2ff;color:#fff;font:14px/20px arial;font-weight:bold;text-indent:0;}</style>');_cdiv.css('marginTop',_mtop+_ptop);_cdiv.css('marginBottom',_mbottom+_pbottom);_cdiv.on('click',function(){var _that=$(this);_that.removeClass('imgisgif');_that.off('click');_imgurl=_imgurl.replace(/.(jpg|png)/g,'.gif');var _loading=$('<div class="loading"><svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path opacity="0.2" fill="#000" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"></path><path fill="#000" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0C22.32,8.481,24.301,9.057,26.013,10.047z" transform="rotate(336.051 20 20)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 20 20" to="360 20 20" dur="0.5s" repeatCount="indefinite"></animateTransform></path></svg><style>.loading svg{position:absolute;left:50%;top:50%;margin-left:-20px;margin-top:-20px;}</style></div>');_loading.css({'position':'relative','height':_this.outerHeight(true)});var _newimg=new Image();_newimg.src=_imgurl;_this.hide();_this.after(_loading);_newimg.onload = function(){_loading.remove();_this.attr('src',_imgurl);_this.removeAttr('is_gif style');_this.show()}});_this.wrap(_cdiv)})});