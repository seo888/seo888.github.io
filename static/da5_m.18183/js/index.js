(function(a){a.fn.scrollLoading=function(b){var c={attr:"data-url",container:a(window),callback:a.noop};var d=a.extend({},c,b||{});d.cache=[];a(this).each(function(){var h=this.nodeName.toLowerCase(),g=a(this).attr(d.attr);var i={obj:a(this),tag:h,url:g};d.cache.push(i)});var f=function(g){if(a.isFunction(d.callback)){d.callback.call(g.get(0))}};var e=function(){var g=d.container.height();if(d.container.get(0)===window){contop=a(window).scrollTop()}else{contop=d.container.offset().top}a.each(d.cache,function(m,n){var p=n.obj,j=n.tag,k=n.url,l,h;if(p){l=p.offset().top-contop,h=l+p.height();if(l>=0&&l<g||h>0&&h<=g){if(k){if(j==="img"){f(p.attr("src",k))}else{p.load(k,{},function(){f(p)})}}else{f(p)}n.obj=null}}})};e();d.container.bind("scroll",e)}})(jQuery);(function($){$.fn.gTab=function(setting,callBack){var defaults={};setting=$.extend({},defaults,setting);return this.each(function(){var $this=$(this);var $objHdLi=$this.find(".hd li");var $objBdChi=$this.find(".bd").children();var hand=0;$objHdLi.eq(hand).addClass("on").siblings().removeClass("on");$objBdChi.eq(hand).show().siblings().hide();$objHdLi.each(function(i,e){$(e).on("click",function(){$(this).addClass("on").siblings().removeClass("on");$objBdChi.eq(i).show().siblings().hide();callBack(i)})})})};$.fn.articleLoadMore=function(setting){var defaults={};setting=$.extend({},defaults,setting);return this.each(function(){var $this=$(this);var wdh=$(window).height();var arh=$this.height();if(wdh<arh){if($(".m-article .u-downwgo-more a.f-down-201808").length==0){$(".u-downwgo-more .f-btn").click(function(){$this.height("auto");$(this).css("opacity","0")})}else{$(".u-downwgo-more").click(function(){$this.height("auto");$(".u-downwgo-more").hide()})}}else{$(".u-downwgo-more").hide()}})}})(jQuery);$(function(){$(".m-tab").gTab();var swiper1=new Swiper(".nav-swp",{slidesPerView:"auto",freeMode:true,freeModeMomentum:false});function getArticleWgo(doFlag){$.ajax({type:"GET",url:"https://api-mcms.18183.com/web/wango-hot-new_"+cwappId+".json",success:function(data){data=jQuery.parseJSON(data);var result="";var arrLen=data.list.length;if(arrLen>0){for(var i=0;i<arrLen;i++){if(data.list[i].attachs&&data.list[i].attachs.length>2){var im1=data.list[i].attachs[0].originalUrl.split("@")[0];var im2=data.list[i].attachs[1].originalUrl.split("@")[0];var im3=data.list[i].attachs[2].originalUrl.split("@")[0];result+='<li class="u-item1">'+'                    <a href="https://yuedu.18183.com/yd-down/1d5bab03bfdb0915f0f407931ae4c9aaeyJhcHBfc2x1ZyI6IjkwMTAiLCJhcHBfc2VjcmV0IjoiWkhVQU5fUVUiLCJhcHBfY2hhbm5lbCI6InpxIiwibmFtZSI6IiIsInR5cGUiOjAsImV4dCI6IiJ9">'+'                        <span class="tt">'+data.list[i].name+"</span>"+'                        <span class="pic-list">'+'                            <img src="//js.18183.com/public/img/pixel.gif" class="listScrollLoading" data-url="'+im1+'@s_2,w_230,h_172" alt="">'+'                            <img src="//js.18183.com/public/img/pixel.gif" class="listScrollLoading" data-url="'+im2+'@s_2,w_230,h_172" alt="">'+'                            <img src="//js.18183.com/public/img/pixel.gif" class="listScrollLoading" data-url="'+im3+'@s_2,w_230,h_172" alt="">'+"                        </span>"+'                        <span class="r-ft">'+'                            <i class="btn">打开玩GO APP</i>'+"                        </span>"+"                    </a>"+"                </li>"}else{result+='<li class="u-item2">'+'                    <a href="https://yuedu.18183.com/yd-down/1d5bab03bfdb0915f0f407931ae4c9aaeyJhcHBfc2x1ZyI6IjkwMTAiLCJhcHBfc2VjcmV0IjoiWkhVQU5fUVUiLCJhcHBfY2hhbm5lbCI6InpxIiwibmFtZSI6IiIsInR5cGUiOjAsImV4dCI6IiJ9">'+'                        <span class="con">'+'                            <span class="tt">'+data.list[i].name+"</span>"+'                            <span class="r-ft">'+'                                <i class="btn">打开玩GO APP</i>'+"                            </span>"+"                        </span>"+'                        <img src="//js.18183.com/public/img/pixel.gif" class="listScrollLoading" data-url="'+(data.list[i].attachs.length>0?data.list[i].attachs[0].originalUrl:"")+'@s_2,w_230,h_172" alt="'+data.list[i].name+'">'+"                    </a>"+"                </li>"}}$(".f-wgoapp-rac").append(result);$(".listScrollLoading").scrollLoading()}else{if(doFlag){cwappId=0;getArticleWgo(!doFlag)}}}})}if($(".f-wgoapp-rac").length>0){getArticleWgo(true)}if($(".f-hot-content").length>0){var articlePageId=0;$(".f-hot-content").dropload({scrollArea:window,distance:150,loadDownFn:function(me){var result="";$.ajax({type:"GET",url:"https://api-mcms.18183.com/web/list_"+columnTypeId+"_1_"+articlePageId+".json",async:false,success:function(data){data=jQuery.parseJSON(data);if(!$("#mWgoBn").hasClass("fixed")){$("#mWgoBn").addClass("fixed").css({display:"border-box",position:"fixed",left:0,bottom:0,width:"100%",background:"#fff",zIndex:19})}console.log(data);var arrLen=data.list.length;articlePageId=data.page.s;if(arrLen>0){for(var i=0;i<arrLen;i++){if(i%3===0){console.log("=========");console.log(i);result+='<div data-engineer="68_672"></div>'}var icon="";switch(data.list[i].icon_id){case 1:icon='<i class="ic ic2"></i>';break;case 2:icon='<i class="ic ic1"></i>';break;default:break}if(data.list[i].archive_type!="3"){if(data.list[i].images&&data.list[i].images.length>2){var im1=data.list[i].images[0].split("@")[0];var im2=data.list[i].images[1].split("@")[0];var im3=data.list[i].images[2].split("@")[0];result+='<li class="u-item1">'+'                    <a href="'+data.list[i].url+'">'+'                        <span class="tt">'+data.list[i].title+"</span>"+'                        <span class="pic-list">'+'                            <img src="//js.18183.com/public/img/pixel.gif" class="listScrollLoading" data-url="'+im1+'@!m_list" alt="">'+'                            <img src="//js.18183.com/public/img/pixel.gif" class="listScrollLoading" data-url="'+im2+'@!m_list" alt="">'+'                            <img src="//js.18183.com/public/img/pixel.gif" class="listScrollLoading" data-url="'+im3+'@!m_list" alt="">'+"                        </span>"+'                        <span class="r-ft">'+"                            "+icon+""+'                            <i class="txt">'+data.list[i].pubdate+"</i>"+'                            <i class="txt">'+data.list[i].type_name+"</i>"+"                        </span>"+"                    </a>"+"                </li>"}else{result+='<li class="u-item2">'+'                    <a href="'+data.list[i].url+'">'+'                        <span class="con">'+'                            <span class="tt">'+data.list[i].title+"</span>"+'                            <span class="r-ft">'+"                                "+icon+""+'                                <i class="txt">'+data.list[i].pubdate+"</i>"+'                                <i class="txt">'+data.list[i].type_name+"</i>"+"                            </span>"+"                        </span>"+'                        <img src="//js.18183.com/public/img/pixel.gif" class="listScrollLoading" data-url="'+(data.list[i].litpic?data.list[i].litpic.split("@")[0]+"@!m_list":"//js.18183.com/wap/levelc/2018/images/webp.jpg")+'" alt="'+data.list[i].title+'">'+"                    </a>"+"                </li>"}}else{result+='<li class="u-item3">'+'                    <a href="'+data.list[i].url+'">'+'                        <span class="tt">'+data.list[i].title+"</span>"+'                        <span class="video">'+'                            <img src="//js.18183.com/public/img/pixel.gif" class="listScrollLoading" data-url="'+data.list[i].litpic.split("@")[0]+'@!m_top_slide" alt="'+data.list[i].title+'">'+'                            <i class="ic"></i>'+'                            <i class="time">'+data.list[i].video_time+"</i>"+"                        </span>"+"                    </a>"+"                </li>"}}}else{me.lock();me.noData();$("#mWgoBn").removeClass("fixed").css({position:"",left:"",top:"",width:"",background:""})}setTimeout(function(){$(".f-hot-content .m-list-box").append(result);$(".listScrollLoading").scrollLoading();me.resetload();allowLoad=2},500)},error:function(xhr,type){console.log("Ajax error!");me.lock();me.noData();me.resetload();allowLoad=2}})}})}$("#uBackTop").on("click",function(){$("html,body").animate({scrollTop:0},300)});if($(".m-article").length>0&&$(".m-article .u-downwgo-more a.f-down-201808").length==0){(function(){var $fixBtn=$(".m-article .u-downwgo-more a.f-down"),$moreBtn=$(".m-article .u-downwgo-more a.f-btn"),winHeight=$(window).height();function getPageScroll(){return document.documentElement.scrollTop||document.body.scrollTop}function getMoreToTop(){return $moreBtn.offset().top}$(window).scroll(function(){if(getMoreToTop()>getPageScroll()+winHeight){$fixBtn.addClass("f-down-fixed")}else{$fixBtn.removeClass("f-down-fixed")}})})()}$(".u-s-btn .f-btn, #uSBox .hide-box").click(function(){$("#uSBox").toggleClass("on");$(this).toggleClass("on")});$("#serch-text-1").bind("search",function(){$("#uSBoxSubmit").trigger("click")});if($(".g-wap-index").length>0){var indexPageId=0;var indexRecPageId=0;var indexListBar=0;var swiper4=new Swiper(".m-slider",{loop:true,autoplay:3e3,autoplayDisableOnInteraction:false});var rollPolingBn=function(){var rxNum1=0;var rxNum2=0;var rxAdd1=setInterval(function(){rxNum1++;if(typeof $(".rac-yeomen1>div").attr("data-engineer")=="undefined"&&$(".rac-yeomen1").length>0){$(".m-list-box").find("li").eq(2).after('<li class="bor">'+$(".rac-yeomen1").html()+"</li>")}if(rxNum1==5||typeof $(".rac-yeomen1>div").attr("data-engineer")=="undefined"){clearInterval(rxAdd1)}},200);var rxAdd2=setInterval(function(){rxNum2++;if(typeof $(".rac-yeomen2>div").attr("data-engineer")=="undefined"&&$(".rac-yeomen2").length>0){$(".m-list-box").find("li").eq(5).after('<li class="bor">'+$(".rac-yeomen2").html()+"</li>")}if(rxNum2==5||typeof $(".rac-yeomen1>div").attr("data-engineer")=="undefined"){clearInterval(rxAdd2)}},200)};var dataManageOne=function(sliderHotData){var sliderHtml="";var toplineHtml="";for(var svi=0;svi<sliderHotData.carousel.length;svi++){sliderHtml+='<div class="swiper-slide">'+'                    <a href="'+sliderHotData.carousel[svi].url+'">'+'                        <img src="'+sliderHotData.carousel[svi].litpic.split("@")[0]+'@!m_top_slide" alt="">'+'                        <span class="tt">'+sliderHotData.carousel[svi].title+"</span>"+"                    </a>"+"                </div>"}swiper4.removeAllSlides();swiper4.appendSlide(sliderHtml);swiper4.slideTo(1,0,false);swiper4.startAutoplay();for(var topline=0;topline<sliderHotData.headline.length;topline++){toplineHtml+='<a href="'+sliderHotData.headline[topline].url+'">'+sliderHotData.headline[topline].description+"</a>"}$(".m-top-line figcaption").html(toplineHtml)};var dataManageTwo=function(data){var result="";var arrLen=data.list.length;var recArrLen=data.listRec.length;var recArrData=[];indexPageId=data.page.s;indexRecPageId=data.page.s1;console.log(data);if(recArrLen>0){$.each(data.listRec,function(indexInArray,valueOfElement){recArrData.push(valueOfElement)})}for(var i=0;i<arrLen;i++){var icon="";switch(data.list[i].icon_id){case 1:icon='<i class="ic ic2"></i>';break;case 2:icon='<i class="ic ic1"></i>';break;default:break}indexListBar++;if(data.list[i].archive_type!="3"){if(data.list[i].images&&data.list[i].images.length>2){var im1=data.list[i].images[0].split("@")[0];var im2=data.list[i].images[1].split("@")[0];var im3=data.list[i].images[2].split("@")[0];result+='<li class="u-item1">'+'                    <a href="'+data.list[i].url+'">'+'                        <span class="tt">'+data.list[i].title+"</span>"+'                        <span class="pic-list">'+'                            <img src="//js.18183.com/public/img/pixel.gif" class="listScrollLoading" data-url="'+im1+'@!m_list" alt="">'+'                            <img src="//js.18183.com/public/img/pixel.gif" class="listScrollLoading" data-url="'+im2+'@!m_list" alt="">'+'                            <img src="//js.18183.com/public/img/pixel.gif" class="listScrollLoading" data-url="'+im3+'@!m_list" alt="">'+"                        </span>"+"                    </a>"+'                        <span class="r-ft">'+"                            "+icon+""+'                            <i class="txt">'+data.list[i].pubdate+"</i>"+'                            <i class="txt">'+data.list[i].type_name+"</i>"+"                        </span>"+"                </li>"}else{result+='<li class="u-item2">'+'                    <a href="'+data.list[i].url+'">'+'                        <span class="con">'+'                            <span class="tt">'+data.list[i].title+"</span>"+'                            <span class="r-ft">'+"                                "+icon+""+'                                <i class="txt">'+data.list[i].pubdate+"</i>"+'                                <i class="txt">'+data.list[i].type_name+"</i>"+"                            </span>"+"                        </span>"+'                        <img src="//js.18183.com/public/img/pixel.gif" class="listScrollLoading" data-url="'+(data.list[i].litpic?data.list[i].litpic.split("@")[0]+"@!m_list":"//js.18183.com/wap/levelc/2018/images/webp.jpg")+'" alt="'+data.list[i].title+'">'+"                    </a>"+"                </li>"}}else{result+='<li class="u-item3">'+'                    <a href="'+data.list[i].url+'">'+'                        <span class="tt">'+data.list[i].title+"</span>"+'                        <span class="video">'+'                            <img src="//js.18183.com/public/img/pixel.gif" class="listScrollLoading" data-url="'+data.list[i].litpic.split("@")[0]+'@!m_top_slide" alt="'+data.list[i].title+'">'+'                            <i class="ic"></i>'+'                            <i class="time">'+data.list[i].video_time+"</i>"+"                        </span>"+"                    </a>"+"                </li>"}var rxtong="";if(all_engineer_18183.defFunBlock.browserJudge().os=="ios"){rxtong=".rac-itemios"}else{rxtong=".rac-itemand"}switch(indexListBar){case 3:result+='<li class="divbox">'+$(".rac-item1"+rxtong).html()+"</li>";break;case 6:result+='<li class="divbox">'+$(".rac-item2"+rxtong).html()+"</li>";break;case 9:result+='<li class="divbox">'+$(".rac-item3"+rxtong).html()+"</li>";break;case 12:result+='<li class="divbox">'+$(".rac-item4"+rxtong).html()+"</li>";break;default:break}var recArrFn=function(rd){if(rd.archive_type=="3"){return'<li class="u-item3">'+'                    <a href="'+rd.url+'">'+'                        <span class="tt">'+rd.title+"</span>"+'                        <span class="video">'+'                            <img src="'+rd.litpic+'@!m_top_slide" alt="'+rd.title+'">'+'                            <i class="ic"></i>'+'                            <i class="time">'+rd.video_time+"</i>"+"                        </span>"+"                    </a>"+"                </li>"}else{return'<li class="u-item4">'+'                    <a href="">'+'                        <img src="'+rd.litpic+'" alt="'+rd.title+'">'+'                        <span class="tt">'+rd.title+"</span>"+'                        <span class="ic">'+rd.archive_tag+"</span>"+"                    </a>    "+"                </li>"}};switch(i){case 2:if(recArrData[0]){result+=recArrFn(recArrData[0])};break;case 5:if(recArrData[1]){result+=recArrFn(recArrData[1])};break;case 8:if(recArrData[2]){result+=recArrFn(recArrData[2])};break;default:break}}return result};var indexListLoad=function(me,callBack){$.ajax({type:"GET",url:"//api-mcms.18183.com/web/wap-home_"+indexPageId+"_"+indexRecPageId+".json",dataType:"json",success:function(data){if(data.code==0){var arrLen=data.list.length;if(arrLen>0){callBack(data)}else{me.lock();me.noData()}}else{callBack(null);me.lock();me.noData()}},error:function(xhr,type){alert("Ajax error!");me.resetload()}})};var sliderHotFn=function(me){var sliderHotData;var sliderHotPromise=function(){return new Promise(function(resolve,reject){$.ajax({type:"GET",url:"//api-mcms.18183.com/web/wap-top.json",dataType:"json",success:function(data){if(data.code==0){sliderHotData=data;resolve()}else{sliderHotData=null;resolve()}},error:function(xhr,type){reject()}})})};var newsListPromise=function(){return new Promise(function(resolve,reject){indexPageId=0;indexListBar=0;indexListLoad(me,function(result){resolve(result)})})};sliderHotPromise().then(function(){return newsListPromise()}).then(function(indexListData){setTimeout(function(){if(sliderHotData!=null){dataManageOne(sliderHotData)}else{$(".m-slider img").scrollLoading({attr:"data-src"})}if(indexListData!=null){$(".m-list-box").html(dataManageTwo(indexListData));rollPolingBn();$(".listScrollLoading").scrollLoading()}wsCache.set("183jsondatas",{d1:sliderHotData,d2:indexListData},{exp:3600});me.resetload();page=0;me.unlock();me.noData(false)},1400)})};var sfRenovate=false;var wsCache=new WebStorageCache;var stroageDate=JSON.parse(localStorage.getItem("183jsondatas")).c;var threeDayDate=(new Date).valueOf()-864e5*3;if(stroageDate<threeDayDate){console.log("重置缓存列表数据");localStorage.removeItem("183jsondatas")}if(!wsCache.get("183jsondatas")){sfRenovate=true}else{var wsCachedata=wsCache.get("183jsondatas");if(wsCachedata.d1!=null){dataManageOne(wsCachedata.d1)}if(wsCachedata.d2!=null){$(".m-list-box").html(dataManageTwo(wsCachedata.d2));rollPolingBn();$(".listScrollLoading").scrollLoading()}$(".m-slider img").scrollLoading({attr:"data-src"})}$(".content").dropload({scrollArea:window,domUp:{domClass:"dropload-up",domRefresh:'<div class="dropload-refresh">下拉刷新</div>',domUpdate:'<div class="dropload-update">释放更新</div>',domLoad:'<div class="dropload-load"><span class="loading-up"></span></div>'},domDown:{domClass:"dropload-down",domRefresh:'<div class="dropload-refresh">↑上拉加载更多内容</div>',domLoad:'<div class="dropload-load"><span class="loading-down"></span>努力加载中...</div>',domNoData:'<div class="dropload-noData">暂无数据</div>'},loadRenovate:function(me){sliderHotFn(me)},loadUpFn:function(me){sliderHotFn(me)},loadDownFn:function(me){indexListLoad(me,function(data){setTimeout(function(){if(data!=null){$(".m-list-box").append(dataManageTwo(data));$(".listScrollLoading").scrollLoading()}me.resetload()},1e3)})},renovate:sfRenovate,threshold:50})}});function setType(cAnd,cIos){var u=navigator.userAgent;var isAndroid=u.indexOf("Android")>-1||u.indexOf("Adr")>-1;var isiOS=!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(isAndroid){$(cIos).hide();$(cAnd).show()}else if(isiOS){$(cIos).show();$(cAnd).hide()}}